{
  "version": 3,
  "sources": ["../../../../node_modules/restmc/src/Http/Builder.ts", "../../../../node_modules/restmc/src/Dispatcher/DispatcherEvent.ts", "../../../../node_modules/restmc/src/Dispatcher/Dispatcher.ts", "../../../../node_modules/restmc/src/Core.ts", "../../../../node_modules/form-data/lib/browser.js", "../../../../node_modules/axios/lib/helpers/bind.js", "../../../../node_modules/axios/lib/utils.js", "../../../../node_modules/axios/lib/helpers/buildURL.js", "../../../../node_modules/axios/lib/core/InterceptorManager.js", "../../../../node_modules/axios/lib/helpers/normalizeHeaderName.js", "../../../../node_modules/axios/lib/core/enhanceError.js", "../../../../node_modules/axios/lib/core/createError.js", "../../../../node_modules/axios/lib/core/settle.js", "../../../../node_modules/axios/lib/helpers/cookies.js", "../../../../node_modules/axios/lib/helpers/isAbsoluteURL.js", "../../../../node_modules/axios/lib/helpers/combineURLs.js", "../../../../node_modules/axios/lib/core/buildFullPath.js", "../../../../node_modules/axios/lib/helpers/parseHeaders.js", "../../../../node_modules/axios/lib/helpers/isURLSameOrigin.js", "../../../../node_modules/axios/lib/adapters/xhr.js", "../../../../node_modules/axios/lib/defaults.js", "../../../../node_modules/axios/lib/core/transformData.js", "../../../../node_modules/axios/lib/cancel/isCancel.js", "../../../../node_modules/axios/lib/core/dispatchRequest.js", "../../../../node_modules/axios/lib/core/mergeConfig.js", "../../../../node_modules/axios/package.json", "../../../../node_modules/axios/lib/helpers/validator.js", "../../../../node_modules/axios/lib/core/Axios.js", "../../../../node_modules/axios/lib/cancel/Cancel.js", "../../../../node_modules/axios/lib/cancel/CancelToken.js", "../../../../node_modules/axios/lib/helpers/spread.js", "../../../../node_modules/axios/lib/helpers/isAxiosError.js", "../../../../node_modules/axios/lib/axios.js", "../../../../node_modules/axios/index.js", "../../../../node_modules/restmc/src/Cache.ts", "../../../../node_modules/restmc/src/Http/RequestError.ts", "../../../../node_modules/restmc/src/Http/Request.ts", "../../../../node_modules/restmc/src/ActiveRecord.ts", "../../../../node_modules/restmc/src/CollectionIterator.ts", "../../../../node_modules/restmc/src/Model.ts", "../../../../node_modules/restmc/src/Collection.ts", "../../../../node_modules/restmc/src/index.ts", "../../src/Common/Constants.ts", "../../src/ChalkySticks.ts", "../../src/Collection/index.ts", "../../src/Model/index.ts", "../../src/Event/index.ts", "../../src/Event/DispatcherEvent.ts", "../../src/Event/Dispatcher.ts", "../../src/Provider/index.ts", "../../src/Provider/Store.ts", "../../src/Common/Environment.ts", "../../src/Model/Base.ts", "../../src/Model/Advertisement.ts", "../../src/Model/Geocode.ts", "../../src/Model/Media.ts", "../../src/Model/Meta.ts", "../../src/Model/User.ts", "../../src/Collection/Base.ts", "../../src/Collection/Advertisement.ts", "../../src/Collection/Media.ts", "../../src/Collection/Meta.ts", "../../src/Collection/User.ts", "../../src/Exception/index.ts", "../../src/Exception/ConnectionRefused.ts", "../../src/Exception/Geolocation.ts", "../../src/Exception/InvalidInput.ts", "../../src/Exception/InvalidRenderer.ts", "../../src/Exception/InvalidStorageProvider.ts", "../../src/Exception/NotImplemented.ts", "../../src/Exception/ParserFailure.ts", "../../src/Exception/Unauthorized.ts", "../../src/Factory/index.ts", "../../src/Factory/Advertisement.ts", "../../src/Factory/Geocode.ts", "../../src/Input/index.ts", "../../src/Input/Keyboard/Shortcut.ts", "../../src/Input/Keyboard.ts", "../../src/Input/Pointer.ts", "../../src/Input/Sensor.ts", "../../src/Input/Video.ts", "../../src/Utility/index.ts", "../../src/Utility/Analytics.ts", "../../src/Utility/Device.ts", "../../src/Utility/Format.ts", "../../src/Utility/Geolocation.ts", "../../src/Utility/Cache.ts", "../../src/Utility/Math.ts", "../../src/Utility/Easing.ts", "../../src/Utility/Share.ts", "../../src/Utility/Debounce.ts", "../../src/Utility/General.ts", "../../src/Common/Functions.ts", "../../src/Utility/Interval.ts", "../../src/Utility/Hysteresis.ts", "../../src/Utility/String.ts", "../../src/Common/Core.ts", "../../src/index.ts"],
  "sourcesContent": ["import { IDispatcherCallbackFunction, IDispatchData } from '../Interfaces.js';\nimport ActiveRecord from '../ActiveRecord.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package Http\n * @project RestMC\n */\nexport default class Builder<T> {\n\t/**\n\t * @type string\n\t */\n\tpublic id: string = '';\n\n\t/**\n\t * Define a list of relationships to include\n\t * e.g. media, tags\n\t *\n\t * @type string[]\n\t */\n\tpublic includes: string[] = [];\n\n\t/**\n\t * What to concatenate our includes with\n\t *\n\t * @type string\n\t */\n\tpublic includeJoinBy: string = ',';\n\n\t/**\n\t * Key that the server expects for defining relationships\n\t *\n\t * @type string\n\t */\n\tpublic includeKey: string = 'include';\n\n\t/**\n\t * @type object\n\t */\n\tpublic queryParams: any = {};\n\n\t/**\n\t * Reference to ActiveRecord (Model/Collection) we're building for\n\t *\n\t * @type ActiveRecord\n\t */\n\tprotected activeRecord: ActiveRecord<T>;\n\n\t/**\n\t * @param ActiveRecord activeRecord\n\t */\n\tconstructor(activeRecord: ActiveRecord<T>) {\n\t\tthis.activeRecord = activeRecord;\n\t}\n\n\t/**\n\t * Requestable URL\n\t *\n\t * @return string\n\t */\n\tpublic getUrl(): string {\n\t\tconst baseUrl: string = this.getBaseUrl();\n\t\tconst endpoint: string = this.getEndpoint();\n\t\tconst queryParamStr: string = this.getQueryParamsAsString();\n\t\tconst isModified: boolean = this.activeRecord.isUsingModifiedEndpoint();\n\t\tconst modifiedBefore: boolean = isModified && this.activeRecord.modifiedEndpointPosition == 'before';\n\t\tconst modifiedAfter: boolean = isModified && this.activeRecord.modifiedEndpointPosition == 'after';\n\n\t\tlet urlBuilder = '';\n\n\t\t// Root API URI\n\t\turlBuilder += baseUrl;\n\n\t\t// Enforce a preceded slash\n\t\turlBuilder += endpoint[0] === '/' ? endpoint : '/' + endpoint;\n\n\t\t// If we are modifying after (base / x / modified), then use active record id at the end\n\t\tif (isModified && modifiedAfter && this.activeRecord?.getReferencedEndpoint()) {\n\t\t\turlBuilder += '/' + this.activeRecord?.getReferencedEndpoint()?.id || '';\n\t\t}\n\n\t\t// Use the explicit ID set in this builder\n\t\telse if (this.id !== '') {\n\t\t\turlBuilder += '/' + this.id;\n\t\t}\n\n\t\t// Use the ID from the Model/Collection host as long as\n\t\t// we don't want the modified endpoint last\n\t\telse if (!modifiedAfter && this.activeRecord.id !== '') {\n\t\t\turlBuilder += '/' + this.activeRecord.id;\n\t\t}\n\n\t\t// Separate query string\n\t\tif (queryParamStr) {\n\t\t\turlBuilder += '?' + queryParamStr;\n\t\t}\n\n\t\t// Clean URL\n\t\t// mk: We tried split/join at first but that created errors\n\t\t// on \"https://\" and \"//api.sotw.com...\"\n\t\turlBuilder = urlBuilder.replace(/([a-zA-Z0-9])\\/\\//g, '$1/');\n\n\t\treturn urlBuilder;\n\t}\n\n\t/**\n\t * @type string\n\t */\n\tpublic getBaseUrl(): string {\n\t\treturn this.activeRecord.baseUrl;\n\t}\n\n\t/**\n\t * If we attach a model to modify the endpoint, this will distinguish\n\t * between the two. An example of this would be if we attached\n\t * a ModelFilm, then this might return\n\t *\n\t *      /film/1/my-endpoint\n\t *\n\t * as opposed to\n\t *\n\t *      /my-endpoint\n\t *\n\t *  @type string\n\t */\n\tpublic getEndpoint(): string {\n\t\treturn this.activeRecord.isUsingModifiedEndpoint()\n\t\t\t? this.activeRecord.getModifiedEndpoint()\n\t\t\t: this.activeRecord.getEndpoint();\n\t}\n\n\t/**\n\t * @param string key\n\t * @return string | number\n\t */\n\tpublic getQueryParam(key: string): string {\n\t\treturn (this.queryParams[key] || '') as string;\n\t}\n\n\t/**\n\t * @return any\n\t */\n\tpublic getQueryParams(): any {\n\t\treturn this.queryParams;\n\t}\n\n\t/**\n\t * There are alternate approaches to this logic, but this is\n\t * written verbosely to allow for conditionals, modifications,\n\t * and clarity.\n\t *\n\t * We don't force logic into one-liners.\n\t *\n\t * @type string\n\t */\n\tpublic getQueryParamsAsString(): string {\n\t\tlet str: string = '';\n\n\t\tObject.entries(this.queryParams)\n\t\t\t.sort((entryA, entryB) => entryA[0].localeCompare(entryB[0]))\n\t\t\t.forEach((entry, index) => {\n\t\t\t\tconst key: string = entry[0];\n\t\t\t\tconst value: string = (entry[1] || '') + '';\n\n\t\t\t\tif (value != null && value != '') {\n\t\t\t\t\tstr += '&' + encodeURIComponent(key) + '=' + encodeURIComponent(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Add includes\n\t\tif (this.includeKey && this.includes.length) {\n\t\t\tstr += '&' + this.includeKey + '=' + this.includes.join(this.includeJoinBy);\n\t\t}\n\n\t\t// Remove preceding ampersand\n\t\tstr = str.replace(/^&/, '');\n\n\t\treturn str;\n\t}\n\n\t/**\n\t * @param string | number id\n\t * @return Builder\n\t */\n\tpublic identifier(id: string | number): Builder<T> {\n\t\tthis.id = id.toString();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add an include\n\t *\n\t * @param string value\n\t * @return Builder\n\t */\n\tpublic include(value: string): Builder<T> {\n\t\tthis.includes.push(value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add a query parameter\n\t *\n\t * @param string key\n\t * @param number | string value\n\t * @return Builder\n\t */\n\tpublic queryParam(key: string, value: number | string): Builder<T> {\n\t\t// Make sure this.queryParams is an object\n\t\tif (typeof this.queryParams !== 'object') {\n\t\t\tthis.queryParams = {};\n\t\t}\n\n\t\t// Set query param\n\t\tthis.queryParams[key] = value;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Alias for queryParam\n\t *\n\t * @param  string key\n\t * @param  number | string value\n\t * @return Builder\n\t */\n\tpublic qp(key: string, value: number | string): Builder<T> {\n\t\treturn this.queryParam(key, value);\n\t}\n}\n", "import { IDispatcherCallbackFunction, IDispatcherEvent, IDispatchData } from '../Interfaces.js';\n\n/**\n * The DispatcherEvent can be instantiated with data that's included\n * every time it fires in addition to ephemeral data per firing.\n *\n * Example:\n *\n *   const event: DispatcherEvent = new DispatcherEvent('my-event', { foo: 'bar' });\n *\n *   event.registerCallback((e: IDispatcherEvent) => {\n *       console.log('Triggered event', e.name, 'with data', e.detail);\n *   });\n *\n *   event.fire();\n *\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package Dispatcher\n * @project RestMC\n */\nexport default class DispatcherEvent {\n\t/**\n\t * @type IDispatcherCallbackFunction[]\n\t */\n\tpublic callbacks: IDispatcherCallbackFunction[];\n\n\t/**\n\t * @type IDispatchData\n\t */\n\tpublic detail: IDispatchData;\n\n\t/**\n\t * @type string\n\t */\n\tpublic eventName: string;\n\n\t/**\n\t * @param string eventName\n\t * @param IDispatchData dispatchData\n\t */\n\tconstructor(eventName: string, detail: IDispatchData = {}) {\n\t\tthis.callbacks = [];\n\t\tthis.detail = detail;\n\t\tthis.eventName = eventName;\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic clearCallbacks(): void {\n\t\tthis.callbacks = [];\n\t}\n\n\t/**\n\t * @param IDispatcherEvent event\n\t * @return number\n\t */\n\tpublic fire(detail: IDispatchData): number {\n\t\tconst callbacks = this.callbacks.slice(0);\n\t\tlet fires: number = 0;\n\t\tconst event: IDispatcherEvent = {\n\t\t\tdetail: Object.assign({}, this.detail, detail),\n\t\t\tname: this.eventName,\n\t\t};\n\n\t\tcallbacks.forEach((callback: IDispatcherCallbackFunction) => {\n\t\t\tcallback(event);\n\t\t\tfires++;\n\t\t});\n\n\t\treturn fires;\n\t}\n\n\t/**\n\t * @param IDispatcherCallbackFunction callback\n\t * @return boolean\n\t */\n\tpublic hasCallback(callback: IDispatcherCallbackFunction): boolean {\n\t\treturn !!this.callbacks.find((value: IDispatcherCallbackFunction) => value === callback);\n\t}\n\n\t/**\n\t * @param IDispatchData callback\n\t * @return void\n\t */\n\tpublic registerCallback(callback: IDispatcherCallbackFunction): void {\n\t\tthis.callbacks.push(callback);\n\t}\n\n\t/**\n\t * @param IDispatcherCallbackFunction callback\n\t * @return boolean\n\t */\n\tpublic unregisterCallback(callback: IDispatcherCallbackFunction): boolean {\n\t\tconst index = this.callbacks.indexOf(callback);\n\n\t\tif (index > -1) {\n\t\t\tthis.callbacks.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n", "import { IDispatcherCallbackFunction, IDispatchData } from '../Interfaces.js';\nimport DispatcherEvent from './DispatcherEvent.js';\n\n/**\n * The Dispatcher is used as a superclass or mixin that provides the\n * functionality of an event system.\n *\n * Example:\n *\n *   class MyClass extends Dispatcher { ... }\n *\n *   const instance: MyClass = new MyClass;\n *\n *   instance.on('my-event', (e: IDispatcherEvent) => {\n *       console.log('Triggered event', e.name, 'with data', e.detail);\n *   });\n *\n *   instance.dispatch('my-event');\n *\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package Dispatcher\n * @project RestMC\n */\nexport default class Dispatcher {\n\t/**\n\t * @type Record<String, DispatcherEvent>\n\t */\n\tprotected events: Record<string, DispatcherEvent> = {};\n\n\t/**\n\t * If duplicate event is passed, will attempt to bubble the data rather\n\t * than duplicating the event entirely.\n\t *\n\t * Returns true if there are any events to broadcast to\n\t *\n\t * @param string eventName\n\t * @param IDispatchData dispatchData\n\t * @return boolean\n\t */\n\tpublic dispatch(name: string, detail: IDispatchData = {}): boolean {\n\t\tconst event: DispatcherEvent = this.events[name] as DispatcherEvent;\n\n\t\tif (event) {\n\t\t\tevent.fire(detail);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Check if we have an event registered\n\t *\n\t * @return boolean\n\t */\n\tpublic hasEvent(eventName: string): boolean {\n\t\treturn !!this.events[eventName];\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param IDispatcherCallbackFunction callback\n\t * @return void\n\t */\n\tpublic off(eventName: string, callback?: IDispatcherCallbackFunction): void {\n\t\tconst event: DispatcherEvent = this.events[eventName] as DispatcherEvent;\n\n\t\t// Clear all\n\t\tif (event && !callback) {\n\t\t\tevent.clearCallbacks();\n\t\t\tdelete this.events[eventName];\n\t\t}\n\n\t\t// Remove specific\n\t\telse if (event && callback && event.callbacks.indexOf(callback) > -1) {\n\t\t\tevent.unregisterCallback(callback);\n\n\t\t\tif (event.callbacks.length === 0) {\n\t\t\t\tdelete this.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param IDispatcherCallbackFunction callback\n\t * @return void\n\t */\n\tpublic on(eventName: string, callback: IDispatcherCallbackFunction): void {\n\t\tlet event = this.events[eventName];\n\n\t\tif (!event) {\n\t\t\tevent = new DispatcherEvent(eventName, {});\n\t\t\tthis.events[eventName] = event;\n\t\t}\n\n\t\tevent.registerCallback(callback);\n\t}\n\n\t/**\n\t * Alias for dispatch\n\t *\n\t * @param string eventName\n\t * @param IDispatchData eventData\n\t */\n\tpublic trigger(eventName: string, detail: IDispatchData = {}): boolean {\n\t\treturn this.dispatch(eventName, detail);\n\t}\n}\n", "import { IAttributes, IDispatcher } from './Interfaces.js';\nimport Dispatcher from './Dispatcher/Dispatcher.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class Core extends Dispatcher implements IDispatcher {\n\t/**\n\t * @param IAttributes options\n\t */\n\tconstructor(options: IAttributes = {}) {\n\t\tsuper();\n\t\tObject.assign(this, options);\n\t}\n}\n", "/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n", "'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n", "'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n", "'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n", "'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n", "'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n", "'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n", "'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n", "'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n", "'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n", "'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n", "'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n", "'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n", "'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n", "'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n", "'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(\n        timeoutErrorMessage,\n        config,\n        config.transitional && config.transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n", "'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\nvar enhanceError = require('./core/enhanceError');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nvar defaults = {\n\n  transitional: {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  },\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return stringifySafely(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional;\n    var silentJSONParsing = transitional && transitional.silentJSONParsing;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';\n\n    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw enhanceError(e, this, 'E_JSON_PARSE');\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n", "'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('./../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers);\n  });\n\n  return data;\n};\n", "'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n", "'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n", "'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n", "{\n  \"name\": \"axios\",\n  \"version\": \"0.21.4\",\n  \"description\": \"Promise based HTTP client for the browser and node.js\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"grunt test\",\n    \"start\": \"node ./sandbox/server.js\",\n    \"build\": \"NODE_ENV=production grunt build\",\n    \"preversion\": \"npm test\",\n    \"version\": \"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json\",\n    \"postversion\": \"git push && git push --tags\",\n    \"examples\": \"node ./examples/server.js\",\n    \"coveralls\": \"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js\",\n    \"fix\": \"eslint --fix lib/**/*.js\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/axios/axios.git\"\n  },\n  \"keywords\": [\n    \"xhr\",\n    \"http\",\n    \"ajax\",\n    \"promise\",\n    \"node\"\n  ],\n  \"author\": \"Matt Zabriskie\",\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/axios/axios/issues\"\n  },\n  \"homepage\": \"https://axios-http.com\",\n  \"devDependencies\": {\n    \"coveralls\": \"^3.0.0\",\n    \"es6-promise\": \"^4.2.4\",\n    \"grunt\": \"^1.3.0\",\n    \"grunt-banner\": \"^0.6.0\",\n    \"grunt-cli\": \"^1.2.0\",\n    \"grunt-contrib-clean\": \"^1.1.0\",\n    \"grunt-contrib-watch\": \"^1.0.0\",\n    \"grunt-eslint\": \"^23.0.0\",\n    \"grunt-karma\": \"^4.0.0\",\n    \"grunt-mocha-test\": \"^0.13.3\",\n    \"grunt-ts\": \"^6.0.0-beta.19\",\n    \"grunt-webpack\": \"^4.0.2\",\n    \"istanbul-instrumenter-loader\": \"^1.0.0\",\n    \"jasmine-core\": \"^2.4.1\",\n    \"karma\": \"^6.3.2\",\n    \"karma-chrome-launcher\": \"^3.1.0\",\n    \"karma-firefox-launcher\": \"^2.1.0\",\n    \"karma-jasmine\": \"^1.1.1\",\n    \"karma-jasmine-ajax\": \"^0.1.13\",\n    \"karma-safari-launcher\": \"^1.0.0\",\n    \"karma-sauce-launcher\": \"^4.3.6\",\n    \"karma-sinon\": \"^1.0.5\",\n    \"karma-sourcemap-loader\": \"^0.3.8\",\n    \"karma-webpack\": \"^4.0.2\",\n    \"load-grunt-tasks\": \"^3.5.2\",\n    \"minimist\": \"^1.2.0\",\n    \"mocha\": \"^8.2.1\",\n    \"sinon\": \"^4.5.0\",\n    \"terser-webpack-plugin\": \"^4.2.3\",\n    \"typescript\": \"^4.0.5\",\n    \"url-search-params\": \"^0.10.0\",\n    \"webpack\": \"^4.44.2\",\n    \"webpack-dev-server\": \"^3.11.0\"\n  },\n  \"browser\": {\n    \"./lib/adapters/http.js\": \"./lib/adapters/xhr.js\"\n  },\n  \"jsdelivr\": \"dist/axios.min.js\",\n  \"unpkg\": \"dist/axios.min.js\",\n  \"typings\": \"./index.d.ts\",\n  \"dependencies\": {\n    \"follow-redirects\": \"^1.14.0\"\n  },\n  \"bundlesize\": [\n    {\n      \"path\": \"./dist/axios.min.js\",\n      \"threshold\": \"5kB\"\n    }\n  ]\n}\n", "'use strict';\n\nvar pkg = require('./../../package.json');\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\nvar currentVerArr = pkg.version.split('.');\n\n/**\n * Compare package versions\n * @param {string} version\n * @param {string?} thanVersion\n * @returns {boolean}\n */\nfunction isOlderVersion(version, thanVersion) {\n  var pkgVersionArr = thanVersion ? thanVersion.split('.') : currentVerArr;\n  var destVer = version.split('.');\n  for (var i = 0; i < 3; i++) {\n    if (pkgVersionArr[i] > destVer[i]) {\n      return true;\n    } else if (pkgVersionArr[i] < destVer[i]) {\n      return false;\n    }\n  }\n  return false;\n}\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator\n * @param {string?} version\n * @param {string} message\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  var isDeprecated = version && isOlderVersion(version);\n\n  function formatMessage(opt, desc) {\n    return '[Axios v' + pkg.version + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new Error(formatMessage(opt, ' has been removed in ' + version));\n    }\n\n    if (isDeprecated && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new TypeError('options must be an object');\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new TypeError('option ' + opt + ' must be ' + result);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw Error('Unknown option ' + opt);\n    }\n  }\n}\n\nmodule.exports = {\n  isOlderVersion: isOlderVersion,\n  assertOptions: assertOptions,\n  validators: validators\n};\n", "'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      forcedJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      clarifyTimeoutError: validators.transitional(validators.boolean, '1.0.0')\n    }, false);\n  }\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain = chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n", "'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n", "'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n", "'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n", "'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n", "'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n", "module.exports = require('./lib/axios');", "/**\n * @type interface\n */\ninterface ICachedItem {\n\timmutable: boolean;\n\ttime: number;\n\tttl: number;\n\tvalue: any;\n}\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class Cache {\n\t/**\n\t * @type Record<string, ICachedItem>\n\t */\n\tprivate storage: Record<string, ICachedItem> = {};\n\n\t/**\n\t * @param string key\n\t * @return void\n\t */\n\tpublic delete(key: string): void {\n\t\tif (this.storage[key]) {\n\t\t\tdelete this.storage[key];\n\t\t}\n\t}\n\n\t/**\n\t * @param string key\n\t * @return any\n\t */\n\tpublic get(key: string, keep: boolean = false): any {\n\t\t// Check time on it\n\t\tconst item: ICachedItem = this.storage[key];\n\t\tlet value: any;\n\n\t\t// Does item exist?\n\t\tif (!item) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Check if it's a 0 expiration (first-access)\n\t\telse if (item.ttl === 0) {\n\t\t\tvalue = item.value;\n\n\t\t\t// The .has() method calls .get() so we don't want to\n\t\t\t// destroy this object before we retrieve it\n\t\t\t!keep && this.delete(key);\n\t\t}\n\n\t\t// Check if it's healthy within the TTL\n\t\telse if (this.isCachedItemHealthy(item)) {\n\t\t\tvalue = item.value;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Checks whether or not a cached item exists at all without\n\t * regard to the TTL\n\t *\n\t * @param string key\n\t * @return boolean\n\t */\n\tpublic exists(key: string): boolean {\n\t\treturn this.storage[key] !== undefined;\n\t}\n\n\t/**\n\t * Checks if we have a cached item within our TTL\n\t *\n\t * @param string key\n\t * @return boolean\n\t */\n\tpublic has(key: string): boolean {\n\t\treturn this.get(key, true) !== undefined;\n\t}\n\n\t/**\n\t * Returns false if trying to overwrite existing cache when\n\t * overwrite is set to false\n\t *\n\t * @param string key\n\t * @param any value\n\t * @param number ttl\n\t * @param boolean overwrite\n\t * @return boolean\n\t */\n\tpublic set(key: string, value: any, ttl: number = 0, immutable: boolean = false): boolean {\n\t\tconst hasItem: boolean = this.has(key);\n\t\tconst time: number = Date.now();\n\n\t\t// Do not overwrite existing item\n\t\tif (hasItem && this.isImmutable(key)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Set cache\n\t\tthis.storage[key] = {\n\t\t\timmutable,\n\t\t\ttime,\n\t\t\tttl,\n\t\t\tvalue,\n\t\t};\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @param ICachedItem item\n\t * @return boolean\n\t */\n\tprivate isCachedItemHealthy(item: ICachedItem): boolean {\n\t\tconst now: number = Date.now();\n\t\tconst then: number = item.time;\n\t\tconst ttl: number = item.ttl;\n\n\t\treturn then + ttl > now;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return boolean\n\t */\n\tprivate isImmutable(key: string): boolean {\n\t\tconst item: ICachedItem = this.storage[key];\n\t\treturn !!item?.immutable;\n\t}\n}\n", "/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package Http\n * @project RestMC\n */\nexport default class RequestError extends Error {\n\t/**\n\t * @type number\n\t */\n\tpublic status: number;\n\n\t/**\n\t * @type string\n\t */\n\tpublic text: string;\n\n\t/**\n\t * @param number status\n\t * @param string text\n\t */\n\tconstructor(status: number, text: string) {\n\t\tsuper(text);\n\n\t\tthis.status = status;\n\t\tthis.text = text;\n\t}\n}\n", "// The node-fetch module creates failures in things like NativeScript which\n// would use a built-in version of \"fetch\". Do we need this?\nimport axios, { AxiosResponse } from 'axios';\nimport {\n\tIAttributes,\n\tIAxiosConfig,\n\tIAxiosError,\n\tIAxiosResponse,\n\tIAxiosSuccess,\n\tIDispatchData,\n\tIProgressEvent,\n\tIRequest,\n\tIRequestEvent,\n\tIResponse,\n} from '../Interfaces.js';\nimport Cache from '../Cache.js';\nimport Core from '../Core.js';\nimport RequestError from './RequestError.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package Http\n * @project RestMC\n */\nexport default class Request extends Core implements IRequest {\n\t/**\n\t * Create a cache for previously sent requests.\n\t *\n\t * 11/07/22\n\t * mk: This isn't completely hooked up yet. We're adding it now\n\t * so we can add mock data requests that simulate cached entries\n\t *\n\t * @type Cache\n\t */\n\tpublic static cachedResponses: Cache = new Cache();\n\n\t/**\n\t * Represents the expected key to find our data on in remote responses.\n\t * It's frequently found on 'data':\n\t *\n\t * {\n\t *     \"data\": [ ... ]\n\t * }\n\t *\n\t * @type string\n\t */\n\tpublic dataKey: string = 'data';\n\n\t/**\n\t * Do not set the 'Content-Type' here because it wont be\n\t * overridden; which will break file uploads.\n\t *\n\t * @type string\n\t */\n\tpublic headers: Record<string, string> = {};\n\n\t/**\n\t * If this Request is currently loading\n\t *\n\t * @type boolean\n\t */\n\tpublic loading: boolean = false;\n\n\t/**\n\t * Method (get, post, patch, ...)\n\t *\n\t * @type string\n\t */\n\tpublic method: string = 'get';\n\n\t/**\n\t * Mode (cors, no-cors, same-origin, navigate)\n\t *\n\t * @type string\n\t */\n\tpublic mode: string = 'cors';\n\n\t/**\n\t * Last fetch\n\t *\n\t * @type Promise<Repsonse>\n\t */\n\tpublic request?: Promise<Request | Response | AxiosResponse<any>>;\n\n\t/**\n\t * Response from fetch\n\t *\n\t * @type Response\n\t */\n\tpublic response?: IAxiosResponse | IAxiosSuccess;\n\n\t/**\n\t * Parsed data from response\n\t *\n\t * @type object\n\t */\n\tpublic responseData: IAttributes = {};\n\n\t/**\n\t * @type number\n\t */\n\tpublic status: number = 0;\n\n\t/**\n\t * @type string\n\t */\n\tpublic url: string;\n\n\t/**\n\t * @type boolean\n\t */\n\tpublic withCredentials: boolean = true;\n\n\t/**\n\t * @param string url\n\t * @param IAttributes options\n\t */\n\tconstructor(url: string = '', options: IAttributes = {}) {\n\t\tsuper();\n\n\t\t// Set url and datakey\n\t\tthis.dataKey = options.dataKey || this.dataKey;\n\n\t\t// Set withCredentials\n\t\tthis.withCredentials = options.hasOwnProperty('withCredentials') ? options.withCredentials : true;\n\n\t\t// Set URL and remove common mistakes\n\t\tthis.url = url;\n\t\tthis.url = this.url.replace(/\\?$/, '');\n\t\tthis.url = this.url.replace(/\\?&/, '?');\n\t}\n\n\t/**\n\t * Actually fetch the data\n\t *\n\t * @param string method\n\t * @param IAttributes body\n\t * @param IAttributes headers\n\t * @param number ttl\n\t * @return Promise<Request | AxiosResponse<any>>\n\t */\n\tpublic fetch(\n\t\tmethod: string = 'GET',\n\t\tbody: IAttributes = {},\n\t\theaders: IAttributes = {},\n\t\tttl: number = 0\n\t): Promise<Request> {\n\t\tconst params: IAttributes = {};\n\t\tconst requestEvent: IRequestEvent = {\n\t\t\tbody,\n\t\t\theaders,\n\t\t\tmethod,\n\t\t\tparams,\n\t\t};\n\n\t\t// Set request method\n\t\tthis.method = (method || 'GET').toUpperCase();\n\n\t\t// Combine headers\n\t\theaders = Object.assign(this.headers, headers);\n\n\t\t// Fetch params\n\t\tparams.data = body;\n\t\tparams.headers = headers;\n\t\tparams.method = this.method;\n\t\tparams.redirect = 'follow';\n\t\tparams.url = this.url;\n\t\tparams.withCredentials = this.withCredentials;\n\t\tparams.onUploadProgress = (event: any) => {\n\t\t\tconst progressEvent: IProgressEvent = {\n\t\t\t\tloaded: event.loaded,\n\t\t\t\tratio: event.loaded / event.total,\n\t\t\t\ttotal: event.total,\n\t\t\t};\n\n\t\t\tthis.dispatch('progress', { progress: progressEvent });\n\t\t};\n\n\t\t// Event trigger\n\t\tthis.dispatch('fetch:before', { request: requestEvent });\n\n\t\t// Loading\n\t\tthis.loading = true;\n\n\t\t// Events\n\t\tthis.dispatch('requesting', { request: requestEvent });\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet cacheKey = `${params.method}.${params.url}`;\n\n\t\t\t// Get cache OR fetch new\n\t\t\tnew Promise((resolveCacheLayer) => {\n\t\t\t\t// Find cache\n\t\t\t\tif (Request.cachedResponses.has(cacheKey)) {\n\t\t\t\t\tconst result = Request.cachedResponses.get(cacheKey);\n\n\t\t\t\t\t// console.log('\uD83D\uDCBE Cached Response: ', cacheKey);\n\t\t\t\t\tresolveCacheLayer(result);\n\t\t\t\t} else if (Request.cachedResponses.has('any')) {\n\t\t\t\t\tconst result = Request.cachedResponses.get('any');\n\n\t\t\t\t\t// console.log('\uD83D\uDCBF Any Cached Response');\n\t\t\t\t\tresolveCacheLayer(result);\n\t\t\t\t} else {\n\t\t\t\t\t// console.log('\uD83D\uDEA6 Requesting remote');\n\t\t\t\t\tresolveCacheLayer(axios(params));\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t\t// @see https://axios-http.com/docs/res_schema\n\t\t\t\t// console.log(response.data);\n\t\t\t\t// console.log(response.status);\n\t\t\t\t// console.log(response.statusText);\n\t\t\t\t// console.log(response.headers);\n\t\t\t\t// console.log(response.config);\n\t\t\t\t.then((response: AxiosResponse<any> | any) => {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tthis.response = response;\n\n\t\t\t\t\t// Set response to cache\n\t\t\t\t\tif (ttl > 0) {\n\t\t\t\t\t\tRequest.cachedResponses.set(cacheKey, response, ttl);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Nothing to report\n\t\t\t\t\tif (!this.response) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.beforeParse(this.response);\n\t\t\t\t\tthis.parse(this.response);\n\t\t\t\t\tthis.afterParse(this.response);\n\t\t\t\t\tthis.afterFetch(this.response);\n\t\t\t\t\tthis.afterAll(this.response);\n\t\t\t\t\tthis.afterAny();\n\n\t\t\t\t\tresolve(this);\n\n\t\t\t\t\treturn response;\n\t\t\t\t})\n\n\t\t\t\t// This will catch the potential error thrown by afterParse\n\t\t\t\t// that raises issues 400+ or missing responses\n\t\t\t\t//\n\t\t\t\t// @see https://axios-http.com/docs/handling_errors\n\t\t\t\t// console.log(error.response?.data);\n\t\t\t\t// console.log(error.response?.status);\n\t\t\t\t// console.log(error.response?.headers);\n\t\t\t\t// console.log(error.request?);\n\t\t\t\t// console.log(error.message?);\n\t\t\t\t.catch((error: IAxiosError) => {\n\t\t\t\t\tthis.response = error.response as IResponse;\n\n\t\t\t\t\t// Network Errors will not return a response\n\t\t\t\t\t// if (!this.response) {\n\t\t\t\t\t// \treturn;\n\t\t\t\t\t// }\n\n\t\t\t\t\tthis.afterAllError(error);\n\t\t\t\t\tthis.afterAny();\n\n\t\t\t\t\treject(this);\n\n\t\t\t\t\treturn error;\n\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * XHR Fetch\n\t *\n\t * Specifically for file uploaders\n\t * I don't think we use this anymore.\n\t *\n\t * XMLHttpRequest\n\t *     onabort: null\n\t *     onerror: \u0192 ()\n\t *     onload: \u0192 ()\n\t *     onloadend: \u0192 (e)\n\t *     onloadstart: null\n\t *     onprogress: \u0192 (e)\n\t *     onreadystatechange: null\n\t *     ontimeout: null\n\t *     readyState: 4\n\t *     response: \"{\"id\":262,\"url\":\"https:\\/\\/static.sotw.com\\/media\\/film\\/154\\/5f2d54d1c26dc.jpg\",\n\t *     responseText: \"{\"id\":262,\"url\":\"https:\\/\\/static.sotw.com\\/media\\/film\\/154\\/5f2d54d1c26dc.jpg\",\n\t *     responseType: \"\"\n\t *     responseURL: \"https://api.sotw.com/v1/film/154/media?&mediaType=1&imageType=4&videoType=4&limit=15&page=1\"\n\t *     responseXML: null\n\t *     send: \u0192 ()\n\t *     status: 200\n\t *     statusText: \"OK\"\n\t *     timeout: 0\n\t *     upload: XMLHttpRequestUpload {onloadstart: null, onprogress: null, onabort: null, onerror: null, onload: null, \u2026}\n\t *     withCredentials: false\n\t *\n\t * Response\n\t *     body: (...)\n\t *     bodyUsed: false\n\t *     headers: Headers {}\n\t *     ok: true\n\t *     redirected: false\n\t *     status: 200\n\t *     statusText: \"\"\n\t *     type: \"default\"\n\t *     url: \"\"\n\t *\n\t * @param  {string} url\n\t * @param  {any} params\n\t * @return {any}\n\t */\n\tpublic xhrFetch(url: string, params: any): any {\n\t\tlet self = this;\n\t\tlet xhr = new XMLHttpRequest();\n\n\t\t// Open Request\n\t\txhr.open(params.method, url);\n\n\t\t// Set Headers\n\t\tfor (let key in params.headers) {\n\t\t\txhr.setRequestHeader(key, params.headers[key]);\n\t\t}\n\n\t\t// Copy old `send`\n\t\tconst xhrSend = xhr.send;\n\n\t\t// Create new `send`\n\t\txhr.send = function () {\n\t\t\tconst xhrArguments: any = arguments;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\txhr.upload.onprogress = function (e) {\n\t\t\t\t\tconst progressEvent: IProgressEvent = {\n\t\t\t\t\t\tloaded: e.loaded,\n\t\t\t\t\t\tratio: 1,\n\t\t\t\t\t\ttotal: e.total,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (e.lengthComputable) {\n\t\t\t\t\t\tprogressEvent.ratio = e.loaded / e.total;\n\t\t\t\t\t}\n\n\t\t\t\t\tself.dispatch('progress', { progress: progressEvent });\n\t\t\t\t};\n\n\t\t\t\txhr.onload = function () {\n\t\t\t\t\tlet blob = new Blob([xhr.response], { type: 'application/json' });\n\t\t\t\t\tlet init = {\n\t\t\t\t\t\tstatus: xhr.status,\n\t\t\t\t\t\tstatusText: xhr.statusText,\n\t\t\t\t\t};\n\t\t\t\t\tlet response = new Response(xhr.response ? blob : null, init);\n\n\t\t\t\t\tresolve(response);\n\t\t\t\t};\n\n\t\t\t\txhr.onerror = function () {\n\t\t\t\t\treject({ request: xhr });\n\t\t\t\t};\n\n\t\t\t\txhrSend.apply(xhr, xhrArguments);\n\t\t\t});\n\t\t};\n\n\t\t// Send cookies\n\t\txhr.withCredentials = this.withCredentials;\n\n\t\treturn xhr.send(params.body);\n\t}\n\n\t/**\n\t * @param string header\n\t * @param string value\n\t * @return self\n\t */\n\tpublic setHeader(header: string, value: string): any {\n\t\tthis.headers[header] = value;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Override and set headers\n\t *\n\t * @param object headers\n\t * @return self\n\t */\n\tpublic setHeaders(headers: any): any {\n\t\tthis.headers = headers;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Before parsing data\n\t *\n\t * @todo Check if we have valid JSON\n\t * @todo Check if the request was an error\n\t *\n\t * @param e IAxiosResponse\n\t */\n\tprivate beforeParse(response: IAxiosSuccess): void {\n\t\t// Trigger\n\t\tthis.dispatch('parse:before', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\t}\n\n\t/**\n\t * Parse data\n\t *\n\t * @param IAxiosSuccess response\n\t * @return IAxiosSuccess\n\t */\n\tprivate parse(response: IAxiosSuccess): void {\n\t\t// Trigger\n\t\tthis.dispatch('parse:parsing', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\n\t\t// Set data\n\t\tif (response.status != 204) {\n\t\t\tthis.responseData = response.data;\n\t\t}\n\n\t\t// Trigger\n\t\tthis.dispatch('parse', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\t}\n\n\t/**\n\t * @param IAxiosSuccess response\n\t * @return void\n\t */\n\tprivate afterParse(response: IAxiosSuccess): void {\n\t\t// Check if we have a status in the JSON as well\n\t\tif (response.status >= 400 && response.data?.status) {\n\t\t\tconst message: string = response.data?.message || response.data || '';\n\n\t\t\tthrow new RequestError(response.status, message);\n\t\t}\n\n\t\t// Trigger\n\t\tthis.dispatch('parse:after', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\t}\n\n\t/**\n\t * @param IAxiosSuccess response\n\t * @return void\n\t */\n\tprivate afterFetch(response: IAxiosSuccess): void {\n\t\t// Trigger\n\t\tthis.dispatch('fetch', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\n\t\tthis.dispatch('fetch:after', {\n\t\t\trequest: this,\n\t\t\tresponse: response,\n\t\t});\n\n\t\t// Not loading\n\t\tthis.loading = false;\n\t}\n\n\t/**\n\t * @param IAxiosSuccess response\n\t * @return void\n\t */\n\tprivate afterAll(e: IAxiosSuccess): void {\n\t\tif (e === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst data: any = e.data;\n\t\tconst status: number = e.status;\n\t\tconst method: string = (e.config?.method || 'get').toLowerCase();\n\n\t\t// Set status\n\t\tthis.status = status;\n\n\t\t// Check request\n\t\tthis.dispatch('complete', {\n\t\t\trequest: this,\n\t\t\tresponse: e,\n\t\t});\n\n\t\tthis.dispatch('complete:' + method, {\n\t\t\trequest: this,\n\t\t\tresponse: e,\n\t\t});\n\t}\n\n\t/**\n\t * @param IAxiosSuccess response\n\t * @return void\n\t */\n\tprivate afterAllError(e: IAxiosError): void {\n\t\tconst data: any = e.message || 'Unknown error';\n\t\tconst status: number = e.response?.status || 503; // Default to 503 Service Unavailable\n\t\tconst method: string = (e.config?.method || 'get').toLowerCase();\n\n\t\t// mk: Apparently, throw Error does same as dispatch 'error' which\n\t\t// causes duplicates when listening on('error' ...)\n\t\t// this.dispatch('error', e.data);\n\t\tthis.responseData = data;\n\n\t\t// Set status\n\t\tthis.status = status;\n\n\t\tthis.dispatch('error', {\n\t\t\trequest: this,\n\t\t\tresponse: e,\n\t\t});\n\n\t\tthis.dispatch('error:' + method, {\n\t\t\trequest: this,\n\t\t\tresponse: e,\n\t\t});\n\t}\n\n\t/**\n\t * @param IAxiosSuccess response\n\t * @return void\n\t */\n\tprivate afterAny(): void {\n\t\tthis.dispatch('finish', { request: this });\n\t}\n}\n", "import {\n\tIAttributes,\n\tIAxiosResponse,\n\tIAxiosSuccess,\n\tICachedResponse,\n\tICachedResponses,\n\tIDispatcherCallbackFunction,\n\tIDispatcherEvent,\n\tIModelRequestOptions,\n\tIModelRequestQueryParams,\n\tIProgressEvent,\n\tIRequest,\n\tIRequestEvent,\n\tIResponse,\n} from './Interfaces.js';\nimport { AxiosResponse } from 'axios';\nimport Builder from './Http/Builder.js';\nimport Collection from './Collection.js';\nimport Core from './Core.js';\nimport FormData from 'form-data'; // @see https://github.com/form-data/form-data/issues/484\nimport HttpRequest from './Http/Request.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class ActiveRecord<T> extends Core {\n\t/**\n\t * Class hooks that allow us to trigger custom functionality\n\t * on an instantiation level.\n\t *\n\t * Example:\n\t *\n\t *  MyCollection.setHook('init', instance => {\n\t *      instance.setMockData(...);\n\t *  });\n\t *\n\t * @type Map\n\t */\n\tprivate static hooks = new Map<string, string[]>();\n\n\t/**\n\t * @param string event\n\t * @param Function func\n\t * @return void\n\t */\n\tpublic static setHook(event: string = 'init', func: any): void {\n\t\tconst key: string = `${this.name}.${event}`;\n\t\tthis.hooks.set(key, func);\n\t}\n\n\t/**\n\t * @param string event\n\t * @return void\n\t */\n\tpublic static unsetHook(event: string = 'init'): void {\n\t\tconst key: string = `${this.name}.${event}`;\n\t\tthis.hooks.delete(key);\n\t}\n\n\t/**\n\t * @param string event\n\t * @param array params\n\t * @return void\n\t */\n\tpublic static hook(key: string = 'init', params: any = []): void {\n\t\tconst func = this.hooks.get(key);\n\n\t\t// @ts-ignore\n\t\tfunc && func(...params);\n\t}\n\n\t/**\n\t * @return Builder\n\t */\n\tpublic get b(): Builder<T> {\n\t\treturn this.builder;\n\t}\n\n\t/**\n\t * It's a Model if it has an ID or explicitly identified by Model\n\t *\n\t * @return boolean\n\t */\n\tprotected get isModel(): boolean {\n\t\treturn this.builder.id != '';\n\t}\n\n\t/**\n\t * @type IAttributes\n\t */\n\tpublic attributes: IAttributes = {};\n\n\t/**\n\t * @type string\n\t */\n\tpublic baseUrl: string = '/v1';\n\n\t/**\n\t * Body for POST\n\t *\n\t * @type IAttributes\n\t */\n\tpublic body: IAttributes;\n\n\t/**\n\t * Applies a cache buster query param if FALSE\n\t *\n\t * @type boolean\n\t */\n\tpublic cacheable: boolean = true;\n\n\t/**\n\t * @type string\n\t */\n\tpublic cid: string = '';\n\n\t/**\n\t * The key that collection data exists on, e.g.\n\t *\n\t * {\n\t *     data: [ .. ]\n\t * }\n\t *\n\t * @type string\n\t */\n\tpublic dataKey: string | undefined = 'data';\n\n\t/**\n\t * https://api.example.com/v1/{endpoint}\n\t *\n\t * @type string\n\t */\n\tpublic endpoint: string = '';\n\n\t/**\n\t * Optional override for DELETEs\n\t *\n\t * https://api.example.com/v1/{endpointDelete}\n\t *\n\t * @type string | undefined\n\t */\n\tpublic endpointDelete: string | undefined;\n\n\t/**\n\t * Optional override for POSTs\n\t *\n\t * https://api.example.com/v1/{endpointPost}\n\t *\n\t * @type string | undefined\n\t */\n\tpublic endpointPost: string | undefined;\n\n\t/**\n\t * Optional override for PUTs\n\t *\n\t * https://api.example.com/v1/{endpointPut}\n\t *\n\t * @type string | undefined\n\t */\n\tpublic endpointPut: string | undefined;\n\n\t/**\n\t * @type boolean\n\t */\n\tpublic hasFetched: boolean = false;\n\n\t/**\n\t * @type boolean\n\t */\n\tpublic hasLoaded: boolean = false;\n\n\t/**\n\t * @type Record<string, null | number | string>\n\t */\n\tpublic headers: Record<string, null | number | string> = {};\n\n\t/**\n\t * @type string\n\t */\n\tpublic id: string = '';\n\n\t/**\n\t * @type number\n\t */\n\tpublic limit: number = 30;\n\n\t/**\n\t * @type boolean\n\t */\n\tpublic loading: boolean = false;\n\n\t/**\n\t * Meta data supplied by the server adjacent to datas\n\t *\n\t * @type IAttributes\n\t */\n\tpublic meta: IAttributes = {};\n\n\t/**\n\t * Mock data responses to use\n\t *\n\t * @type IAttributes\n\t */\n\tpublic mockData: IAttributes = {};\n\n\t/**\n\t * Where to position our modified endpoint (before or after)\n\t *\n\t * @type string\n\t */\n\tpublic modifiedEndpointPosition: string = 'before';\n\n\t/**\n\t * @type IAttributes\n\t */\n\tpublic options: IAttributes = {\n\t\tdataKey: 'data',\n\t\twithCredentials: true,\n\t};\n\n\t/**\n\t * @type number\n\t */\n\tpublic page: number = 1;\n\n\t/**\n\t * Reference to parent object with a relationship is involved\n\t * e.g. model.hasOne('review').parent === model\n\t *\n\t * @type ActiveRecord\n\t */\n\tpublic parent: ActiveRecord<any> | undefined;\n\n\t/**\n\t * @type HttpRequest\n\t */\n\tpublic request?: HttpRequest;\n\n\t/**\n\t * @type number\n\t */\n\tpublic requestTime: number = -1;\n\n\t/**\n\t * @type Builder\n\t */\n\tprotected builder: Builder<T>;\n\n\t/**\n\t * @type string\n\t */\n\tprotected cidPrefix: string = 'c';\n\n\t/**\n\t * Saves fetch arguments from our last request:\n\t *\n\t *      body\n\t *      headers\n\t *      method\n\t *      options\n\t *      queryParams\n\t *\n\t * @type IAttributes\n\t */\n\tprotected lastRequest: any;\n\n\t/**\n\t * Function to call before a loading hook is triggered\n\t *\n\t * @type function | undefined\n\t */\n\tprotected loadingHookPre: IDispatcherCallbackFunction | undefined;\n\n\t/**\n\t * Function to call after a loading hook is triggered\n\t *\n\t * @type function | undefined\n\t */\n\tprotected loadingHookPost: IDispatcherCallbackFunction | undefined;\n\n\t/**\n\t * Reference to ActiveRecord we are using for our modified endpoint\n\t *\n\t * @type ActiveRecord<any>\n\t */\n\tprotected referenceForModifiedEndpoint: ActiveRecord<any> | undefined;\n\n\t/**\n\t * We have a function called \"runLast\" that will execute the last request\n\t * to be used primarily around authorization issues where new tokens\n\t * are distributed. This key will prevent a recursion loop.\n\t *\n\t * @type number\n\t */\n\tprotected runLastAttempts: number = 0;\n\n\t/**\n\t * How many times we're allowed to execute \"runLast\" before we quit the loop\n\t *\n\t * @type number\n\t */\n\tprotected runLastAttemptsMax: number = 2;\n\n\t/**\n\t * Set by the .cache(ttl) method and is applied on the next _fetch call\n\t *\n\t * @type number\n\t */\n\tprotected ttl: number = 0;\n\n\t/**\n\t * @param IAttributes options\n\t */\n\tconstructor(options: IAttributes = {}) {\n\t\tsuper(options);\n\n\t\t// Set options on class\n\t\tObject.assign(this, options);\n\n\t\t// Set defaults\n\t\tthis.body = {};\n\t\tthis.cid = this.cidPrefix + Math.random().toString(36).substr(2, 5);\n\t\tthis.parent = undefined;\n\n\t\t// Set default content type header\n\t\tthis.setHeader('Content-Type', 'application/json; charset=utf-8');\n\n\t\t// Setup URL builder\n\t\tthis.builder = new Builder<T>(this);\n\n\t\t// Set options\n\t\tthis.setOptions(options);\n\n\t\t// Hook\n\t\tActiveRecord.hook(`${this.constructor.name}.setup`, [this]);\n\t}\n\n\t/**\n\t * e.g. model.attr('username');\n\t *\n\t * @param string key\n\t * @return number | string | null\n\t */\n\tpublic attr(key: string): string | number | null {\n\t\treturn this.attributes[key];\n\t}\n\n\t/**\n\t * @return ActiveRecord\n\t */\n\tpublic clone() {\n\t\t// @ts-ignore\n\t\tconst instance = new this.constructor();\n\t\tinstance.add(this.toJSON());\n\n\t\tinstance.setOptions(this.options);\n\t\tinstance.setHeaders(this.headers);\n\t\tinstance.parent = this.parent;\n\n\t\treturn instance;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic hasAttributes(): boolean {\n\t\treturn Object.keys(this.attributes).length > 0;\n\t}\n\n\t/**\n\t * Set data to our attributes object. It traditionally fires a 'set' event,\n\t * but we can silence that by setting `trigger` to false.\n\t *\n\t * @param IAttributes attributes\n\t * @param IAttributes options\n\t * @param boolean trigger\n\t * @return ActiveRecord\n\t */\n\tpublic set(attributes: IAttributes = {}, options: IAttributes = {}, trigger: boolean = true): ActiveRecord<T> {\n\t\t// @ts-ignore\n\t\tconst possibleSetters = Object.getOwnPropertyDescriptors(this.__proto__);\n\n\t\t/*\n\t\t * Set key/value relationship on `attributes`, but also on class if it's an intended root property\n\t\t * @todo I forget why we added the setters bit\n\t\t */\n\t\tfor (const key in attributes) {\n\t\t\tthis.attributes[key] = attributes[key];\n\n\t\t\t// Check for setters\n\t\t\tif (possibleSetters && possibleSetters[key] && possibleSetters[key].set) {\n\t\t\t\tthis[key] = attributes[key];\n\t\t\t}\n\t\t}\n\n\t\t// Check for ID\n\t\tif (attributes && attributes['id']) {\n\t\t\tthis.setId(attributes.id);\n\t\t}\n\n\t\t// Trigger\n\t\tif (trigger) {\n\t\t\tthis.dispatch('set', { attributes });\n\n\t\t\t// Hook\n\t\t\tActiveRecord.hook(`${this.constructor.name}.set`, [this, attributes]);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return ActiveRecord\n\t */\n\tpublic unset(key: string): ActiveRecord<T> {\n\t\tdelete this.attributes[key];\n\t\treturn this;\n\t}\n\n\t/**\n\t * Accepts special options:\n\t *\n\t *  baseUrl\n\t *  endpoint\n\t *  headers\n\t *  meta\n\t *  params | qp | queryParams\n\t *\n\t * @param IAttributes options\n\t * @return ActiveRecord\n\t */\n\tpublic setOptions(options: IAttributes = {}): ActiveRecord<T> {\n\t\tthis.options = Object.assign(this.options, options);\n\n\t\t// Override baseUrl\n\t\tif (options.baseUrl) {\n\t\t\tthis.baseUrl = options.baseUrl;\n\t\t}\n\n\t\t// Override endpoint\n\t\tif (options.endpoint) {\n\t\t\tthis.setEndpoint(options.endpoint);\n\t\t}\n\n\t\t// Check options for headers\n\t\tif (options.headers) {\n\t\t\tthis.setHeaders(options.headers);\n\t\t}\n\n\t\t// Set metadata\n\t\tif (options.meta) {\n\t\t\t/*\n\t\t\t * Increase count\n\t\t\t * mk: This is kind of wonky...\n\t\t\t */\n\t\t\tif (options.merge) {\n\t\t\t\tif (options.meta.pagination.count && this.meta.pagination.count) {\n\t\t\t\t\toptions.meta.pagination.count += this.meta.pagination.count;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tthis.meta = options.meta;\n\t\t}\n\n\t\t// Check options for params\n\t\tif (options.params || options.qp || options.queryParams) {\n\t\t\tthis.setQueryParams(options.queryParams || options.qp || options.params);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Converts model to JSON object\n\t *\n\t * @return object\n\t */\n\tpublic toJSON(): object {\n\t\tconst json: any = this.attributes;\n\n\t\t/*\n\t\t * @todo is this code copasetic?\n\t\t * @ts-ignore\n\t\t */\n\t\t// const possibleGetters = Object.getOwnPropertyNames(this.__proto__);\n\t\tconst possibleGetters = Object.keys(Object.getPrototypeOf(this));\n\n\t\t// Convert toJSON on subobjects so they stay in sync\n\t\tfor (const key of possibleGetters) {\n\t\t\t// @ts-ignore\n\t\t\tif (json[key] && this[key] && this[key].toJSON) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tjson[key] = this[key].toJSON();\n\t\t\t}\n\t\t}\n\n\t\treturn json;\n\t}\n\n\t/*\n\t * region: Actions\n\t * -------------------------------------------------------------------------\n\t */\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic create(attributes: IAttributes): Promise<HttpRequest> {\n\t\treturn this.post(attributes);\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic delete(attributes: IAttributes = {}): Promise<HttpRequest> {\n\t\tconst url: string = this.builder.identifier(this.id || attributes?.id || '').getUrl();\n\t\tconst output: Promise<HttpRequest> = this._fetch(\n\t\t\tnull,\n\t\t\t{},\n\t\t\t'DELETE',\n\t\t\tObject.assign(attributes || {}, this.attributes),\n\t\t\tthis.headers\n\t\t);\n\n\t\t// Check if it was successful\n\t\toutput.then((request: HttpRequest) => {\n\t\t\t// Exit if we have an error\n\t\t\tif (request.status < 200 || request.status > 299) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if we have a parent collection, and if so, remove it\n\t\t\tif (this.hasParentCollection()) {\n\t\t\t\t(this.parent as Collection<any>)?.remove(this);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic post(attributes: IAttributes = {}): Promise<HttpRequest> {\n\t\tconst url: string = this.builder.getUrl();\n\t\tconst output: Promise<HttpRequest> = this._fetch(\n\t\t\tnull,\n\t\t\t{},\n\t\t\t'POST',\n\t\t\tObject.assign(attributes || {}, this.attributes),\n\t\t\tthis.headers\n\t\t);\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic put(attributes: IAttributes): Promise<HttpRequest> {\n\t\tconst url: string = this.builder.getUrl();\n\t\tconst output: Promise<HttpRequest> = this._fetch(\n\t\t\tnull,\n\t\t\t{},\n\t\t\t'PUT',\n\t\t\tObject.assign(attributes || {}, this.attributes),\n\t\t\tthis.headers\n\t\t);\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic save(attributes: IAttributes = {}): Promise<HttpRequest> {\n\t\tconst method: string = this.id ? 'PUT' : 'POST';\n\t\tconst output: Promise<HttpRequest> = this._fetch(\n\t\t\tnull,\n\t\t\t{},\n\t\t\tmethod,\n\t\t\tObject.assign(attributes || {}, this.attributes),\n\t\t\tthis.headers\n\t\t);\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * Interface for Collection\n\t *\n\t * @param IAttributes attributes\n\t * @return ActiveRecord\n\t */\n\tpublic add(attributes: IAttributes): ActiveRecord<T> {\n\t\treturn this.set(attributes);\n\t}\n\n\t/**\n\t * @return ActiveRecord\n\t */\n\tpublic reset(): ActiveRecord<T> {\n\t\tthis.attributes = {};\n\n\t\t// Event\n\t\tthis.dispatch('reset');\n\n\t\t// Hook\n\t\tActiveRecord.hook(`${this.constructor.name}.reset`, [this]);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add loading hooks on a collection for a view\n\t *\n\t * @param ViewBase view\n\t * @param Function | undefined preHook\n\t * @param Function | undefined postHook\n\t * @return this\n\t */\n\tpublic addLoadingHooks(\n\t\tview: any,\n\t\tpreHook: IDispatcherCallbackFunction | undefined = undefined,\n\t\tpostHook: IDispatcherCallbackFunction | undefined = undefined\n\t): ActiveRecord<T> {\n\t\t// Remove existing hooks\n\t\tthis.removeLoadingHooks();\n\n\t\t// Set preloading hook\n\t\tthis.loadingHookPre = () => {\n\t\t\treturn (preHook || view?.loading?.bind(view) || function () {})();\n\t\t};\n\n\t\t// Set postloading hook\n\t\tthis.loadingHookPost = () => {\n\t\t\treturn (postHook || view?.notloading?.bind(view) || function () {})();\n\t\t};\n\n\t\t// Set events\n\t\tthis.loadingHookPost && this.on('complete', this.loadingHookPost);\n\t\tthis.loadingHookPost && this.on('error', this.loadingHookPost);\n\t\tthis.loadingHookPre && this.on('requesting', this.loadingHookPre);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove loading hooks if we have them set\n\t *\n\t * @return ActiveRecord\n\t */\n\tpublic removeLoadingHooks(): ActiveRecord<T> {\n\t\t// Remove posthook\n\t\tthis.loadingHookPost && this.off('complete', this.loadingHookPost);\n\t\tthis.loadingHookPost && this.off('error', this.loadingHookPost);\n\t\tthis.loadingHookPre && this.off('requesting', this.loadingHookPre);\n\n\t\t// Unset\n\t\tthis.loadingHookPost = undefined;\n\t\tthis.loadingHookPre = undefined;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set ttl on next fetch\n\t *\n\t * Usage:\n\t *\n\t *     myCollection.cache(1000).fetch();\n\t *\n\t * @param number ttl\n\t * @return this\n\t */\n\tpublic cache(ttl: number): ActiveRecord<T> {\n\t\tthis.ttl = ttl;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set mock data for one fetch call\n\t *\n\t * Example:\n\t *\n\t *  myCollection.mock({ ... }).fetch();\n\t *\n\t * @param object data\n\t * @return ActiveRecord<T>\n\t */\n\tpublic mock(data: any): ActiveRecord<T> {\n\t\tconst self = this;\n\n\t\t/**\n\t\t * @return void\n\t\t */\n\t\tfunction callback() {\n\t\t\tself.unsetMockData('any');\n\t\t\tself.off('finish', this);\n\t\t}\n\n\t\t// On the next _fetch, this should be called regardless\n\t\tthis.on('finish', callback);\n\n\t\t// Set temp mock data\n\t\tthis.setMockData('any', data);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Searches the remote server for an ID-based record\n\t *\n\t * @param number | string id\n\t * @return Promise<ActiveRecord<T>>\n\t */\n\tpublic async find(id: string | number, queryParams: IModelRequestQueryParams = {}): Promise<ActiveRecord<T>> {\n\t\treturn await this.fetch({ id }, queryParams).then((request) => this);\n\t}\n\n\t/**\n\t * Upload file\n\t *\n\t * @param string name\n\t * @param HTMLInputElement | FileList | File file\n\t * @param Record<string, any> additionalFields\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic async file(name: string, file: any, additionalFields: Record<string, any> = {}): Promise<HttpRequest> {\n\t\tconst url: string = this.builder.identifier(this.id).getUrl();\n\n\t\t// const files = event.target.files\n\t\tconst formData = new FormData();\n\n\t\t// HTMLInputElement\n\t\tif (file.hasOwnProperty('files') && file.files) {\n\t\t\tfile = (file.files as any)[0];\n\t\t}\n\n\t\t// FileList\n\t\tif (file.hasOwnProperty('length')) {\n\t\t\tfile = file[0];\n\t\t}\n\n\t\t// Set header\n\t\tthis.unsetHeader('Content-Type');\n\n\t\t// Add files\n\t\tformData.append(name, file);\n\n\t\t// Add additional fields\n\t\tif (additionalFields) {\n\t\t\tlet key: string;\n\n\t\t\tfor (key in additionalFields) {\n\t\t\t\tconst value: any = additionalFields[key];\n\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue.forEach((item: number | string) => formData.append(key + '[]', item));\n\t\t\t\t} else {\n\t\t\t\t\tformData.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set fetch\n\t\treturn this._fetch(null, {}, 'POST', formData).then((request: any) => {\n\t\t\tthis.dispatch('file:complete');\n\t\t\treturn request;\n\t\t});\n\t}\n\n\t/**\n\t * Alias for `file`\n\t *\n\t * @param string name\n\t * @param HTMLInputElement | FileList | File file\n\t * @param Record<string, any> additionalFields\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic async upload(name: string, file: any, additionalFields: Record<string, any> = {}): Promise<HttpRequest> {\n\t\treturn this.file(name, file, additionalFields);\n\t}\n\n\t/**\n\t * NOTE: It is preferred to use other methods\n\t *\n\t * @param  IModelRequestOptions options\n\t * @param  IModelRequestQueryParams queryParams\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic async fetch(\n\t\toptions: IModelRequestOptions = {},\n\t\tqueryParams: IModelRequestQueryParams = {},\n\t\tmethod: string = 'get',\n\t\tbody: IAttributes = {},\n\t\theaders: IAttributes = {}\n\t): Promise<HttpRequest> {\n\t\treturn await this._fetch(options, queryParams, method, body, headers);\n\t}\n\n\t/**\n\t * @return Promise<HttpRequest> | void\n\t */\n\tpublic runLast(): Promise<HttpRequest> | void {\n\t\t// Check if we can do this\n\t\tif (++this.runLastAttempts >= this.runLastAttemptsMax) {\n\t\t\tconsole.warn('Run last attempts expired');\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.runLastAttempts = 0;\n\t\t\t}, 1000);\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._fetch(\n\t\t\tthis.lastRequest.options,\n\t\t\tthis.lastRequest.queryParams,\n\t\t\tthis.lastRequest.method,\n\t\t\tthis.lastRequest.body,\n\t\t\tthis.lastRequest.headers\n\t\t);\n\t}\n\n\t// endregion: Actions\n\n\t// region: Get Params\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * @param string method\n\t * @return string\n\t */\n\tpublic getUrlByMethod(method: string): string {\n\t\tlet url: string = '';\n\t\tconst originalEndpoint: string = this.getEndpoint();\n\n\t\t// Use a modified endpoint, if one exists\n\t\tif (method === 'delete' && this.endpointDelete) {\n\t\t\tthis.endpoint = this.endpointDelete;\n\t\t} else if (method === 'put' && this.endpointPut) {\n\t\t\tthis.endpoint = this.endpointPut;\n\t\t} else if (method === 'post' && this.endpointPost) {\n\t\t\tthis.endpoint = this.endpointPost;\n\t\t}\n\n\t\t// Check if we're using modified\n\t\tif (this.referenceForModifiedEndpoint) {\n\t\t\tthis.useModifiedEndpoint(this.referenceForModifiedEndpoint, this.modifiedEndpointPosition);\n\t\t}\n\n\t\t// Mark url\n\t\turl = this.builder.getUrl();\n\n\t\t// Reset endpoint in the class so we don't continually compound changes on it\n\t\tthis.endpoint = originalEndpoint;\n\n\t\t// Query params\n\t\treturn url;\n\t}\n\n\t// endregion: Get Params\n\n\t// region: Set Params\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * @return Promise<void>\n\t */\n\tpublic async beforeFetch(): Promise<void> {\n\t\t// Do nothing\n\t}\n\n\t/**\n\t * We automatically assign modified endpoints through relationships\n\t * like hasOne/hasMany, but sometimes we may not want to change that\n\t * endpoint. This allows us to cancel the change.\n\t *\n\t * @return ActiveRecord\n\t */\n\tpublic cancelModifiedEndpoint(): ActiveRecord<T> {\n\t\tthis.referenceForModifiedEndpoint = undefined;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Determines if we should be using the modified endpoint\n\t *\n\t * @return bool\n\t */\n\tpublic isUsingModifiedEndpoint(): boolean {\n\t\treturn !!this.referenceForModifiedEndpoint;\n\t}\n\n\t/**\n\t * The endpoint we are referencing for modified endpoints\n\t *\n\t * @return ActiveRecord<T> | undefined\n\t */\n\tpublic getReferencedEndpoint(): ActiveRecord<T> | undefined {\n\t\treturn this.referenceForModifiedEndpoint;\n\t}\n\n\t/**\n\t * Build modified endpoint each time so we can use the ID\n\t * as a reference. If we set it too early, the scalar value\n\t * for `id` will be wrong\n\t *\n\t * @return string\n\t */\n\tpublic getModifiedEndpoint(): string {\n\t\tconst activeRecord: any = this.referenceForModifiedEndpoint;\n\n\t\t// Warnings\n\t\tif (!activeRecord || (!activeRecord.id && this.modifiedEndpointPosition == 'before')) {\n\t\t\tconsole.warn(\n\t\t\t\t'Modified ActiveRecord [`' +\n\t\t\t\t\tactiveRecord.getEndpoint() +\n\t\t\t\t\t'.' +\n\t\t\t\t\tthis.getEndpoint() +\n\t\t\t\t\t'] usually has an ID signature. [ar/this]',\n\t\t\t\tthis\n\t\t\t);\n\n\t\t\treturn this.getEndpoint();\n\t\t}\n\n\t\t/*\n\t\t * Set modified endpoint\n\t\t * e.g. content / 1 / test\n\t\t * e.g. test / x / contentf\n\t\t */\n\t\treturn this.modifiedEndpointPosition == 'before'\n\t\t\t? [activeRecord.getEndpoint(), activeRecord.id, this.getEndpoint()].join('/')\n\t\t\t: [this.getEndpoint(), this.id, activeRecord.getEndpoint()].join('/');\n\t}\n\n\t/**\n\t * @param string key\n\t * @return string\n\t */\n\tpublic getQueryParam(key: string): string {\n\t\treturn this.builder.getQueryParam(key) || '';\n\t}\n\n\t/**\n\t * @return any\n\t */\n\tpublic getQueryParams(): any {\n\t\treturn this.builder.getQueryParams() || {};\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic hasParent(): boolean {\n\t\treturn !!this.parent;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic hasParentCollection(): boolean {\n\t\treturn this.hasParent() && (this.parent as any).isCollection;\n\t}\n\n\t/**\n\t * Set specific endpoint override\n\t *\n\t * @param  ActiveRecord activeRecord\n\t * @param  string position\n\t * @return ActiveRecord\n\t */\n\tpublic useModifiedEndpoint(activeRecord: ActiveRecord<any>, position: string = 'before'): ActiveRecord<T> {\n\t\t// Object we reference for modified\n\t\tthis.referenceForModifiedEndpoint = activeRecord;\n\t\tthis.modifiedEndpointPosition = position;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t * @return ActiveRecord\n\t */\n\tpublic setBody(value: IAttributes): ActiveRecord<T> {\n\t\tthis.body = value;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getEndpoint(): string {\n\t\treturn this.endpoint;\n\t}\n\n\t/**\n\t * @param string endpoint\n\t * @return ActiveRecord\n\t */\n\tpublic setEndpoint(endpoint: string): ActiveRecord<T> {\n\t\tthis.referenceForModifiedEndpoint = undefined;\n\t\tthis.endpoint = endpoint;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string header\n\t * @param string value\n\t * @return ActiveRecord\n\t */\n\tpublic setHeader(header: string, value: string | null): ActiveRecord<T> {\n\t\tthis.headers[header] = value;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param Record<string, string> headers\n\t * @return ActiveRecord\n\t */\n\tpublic setHeaders(headers: Record<string, string>): ActiveRecord<T> {\n\t\tfor (const k in headers) {\n\t\t\tthis.setHeader(k, headers[k]);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param number | string id\n\t * @return ActiveRecord\n\t */\n\tpublic setId(id: number | string): ActiveRecord<T> {\n\t\tthis.id = typeof id === 'number' ? id.toString() : id;\n\t\tthis.b.identifier(this.id);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return ActiveRecord\n\t */\n\tpublic unsetId(): ActiveRecord<T> {\n\t\tthis.id = '';\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string header\n\t * @return ActiveRecord\n\t */\n\tpublic unsetHeader(header: string): ActiveRecord<T> {\n\t\tthis.setHeader(header, null);\n\t\tdelete this.headers[header];\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string key\n\t * @param IAttributes jsonResponse\n\t * @return ActiveRecord<T>\n\t */\n\tpublic setMockData(key: string = 'any', jsonData: IAttributes): ActiveRecord<T> {\n\t\tconst response = {\n\t\t\tconfig: {},\n\t\t\tdata: jsonData,\n\t\t\theaders: {},\n\t\t\tstatus: 200,\n\t\t\tstatusText: 'OK',\n\t\t};\n\n\t\t// Set cache to HttpRequest statically @danger\n\t\tHttpRequest.cachedResponses.set(key, response, 1000 * 9999);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return ActiveRecord<T>\n\t */\n\tpublic unsetMockData(key: string = 'any'): ActiveRecord<T> {\n\t\tHttpRequest.cachedResponses.delete(key);\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string key\n\t * @param string value\n\t * @return ActiveRecord\n\t */\n\tpublic setQueryParam(key: string, value: string): ActiveRecord<T> {\n\t\tthis.builder.qp(key, value);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param Record<string, number | string> params\n\t * @return ActiveRecord\n\t */\n\tpublic setQueryParams(params: Record<string, number | string>): ActiveRecord<T> {\n\t\tfor (const k in params) {\n\t\t\tthis.setQueryParam(k, params[k] as unknown as string);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param string param\n\t * @return ActiveRecord\n\t */\n\tpublic unsetQueryParam(param: string): ActiveRecord<T> {\n\t\tdelete this.builder.queryParams[param];\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Override and set headers\n\t *\n\t * @param string token\n\t * @return ActiveRecord\n\t */\n\tpublic setToken(token: string): ActiveRecord<T> {\n\t\tthis.setHeader('Authorization', 'Bearer ' + token);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Function to call after setting a fetch\n\t * This is useful if we're doing callbacks from cached promises\n\t *\n\t * @todo Have another look at this\n\t * @param IDispatcherEvent e\n\t * @param IAttribute options\n\t * @return void\n\t */\n\tpublic setAfterResponse(e: IDispatcherEvent, options: any = {}) {\n\t\tconst request: HttpRequest = e.detail.request as HttpRequest;\n\t\tconst response: IResponse = e.detail.response as IResponse;\n\t\tconst method: string = request.method || 'get';\n\t\tconst remoteJson: any = response.data;\n\n\t\t// If this isn't a model, try appending to\n\t\tif (method.toLowerCase() === 'post' && !this.isModel) {\n\t\t\t/*\n\t\t\t * \"data\" comes from axios\n\t\t\t * \"data.data\" is our default key on the API\n\t\t\t */\n\t\t\tthis.add((this.dataKey ? remoteJson[this.dataKey] : remoteJson) || response.data);\n\t\t} else if (method.toLowerCase() === 'delete') {\n\t\t\t// Intentionally empty\n\t\t} else {\n\t\t\tconst data =\n\t\t\t\tthis.dataKey !== undefined ? remoteJson[this.dataKey] : remoteJson.responseData || response.data;\n\n\t\t\tthis.set(data, options);\n\t\t}\n\n\t\t// Set options\n\t\tthis.setOptions(Object.assign({}, options, { meta: remoteJson.meta }));\n\n\t\t// Events\n\t\tthis.dispatch('parse:after', e.detail);\n\t}\n\n\t// endregion: Set Params\n\n\t// @todo Update return\n\tprotected async _fetch(\n\t\toptions: IModelRequestOptions | null = {},\n\t\tqueryParams: IModelRequestQueryParams = {},\n\t\tmethod: string = 'get',\n\t\tbody: IAttributes = {},\n\t\theaders: IAttributes = {}\n\t): Promise<HttpRequest> {\n\t\t// Normalize method\n\t\tmethod = method ? method.toLowerCase() : 'get';\n\n\t\t// Save request params\n\t\tthis.lastRequest = {\n\t\t\tbody,\n\t\t\theaders,\n\t\t\tmethod,\n\t\t\toptions,\n\t\t\tqueryParams,\n\t\t};\n\n\t\t// Set last request time\n\t\tthis.requestTime = Date.now();\n\n\t\t// Check cacheable\n\t\tif (!this.cacheable) {\n\t\t\tthis.builder.qp('cb', Date.now());\n\t\t}\n\n\t\t// Run before fetch methods\n\t\tawait this.beforeFetch();\n\n\t\t// Check for query params\n\t\tthis.setQueryParams(queryParams);\n\n\t\t// Check for headers\n\t\tthis.setHeaders(headers);\n\n\t\t// Check for ID\n\t\tif (options && options.id) {\n\t\t\tthis.builder.identifier(options.id);\n\t\t}\n\n\t\t// Query params\n\t\tconst url: string = this.getUrlByMethod(method);\n\t\tconst ttl: number = this.ttl || 0;\n\n\t\t// Reset ttl\n\t\tthis.ttl = 0;\n\n\t\t// Events\n\t\tthis.dispatch('requesting', { request: this.lastRequest });\n\n\t\t// Has fetched\n\t\tthis.hasFetched = true;\n\n\t\t// Set loading\n\t\tthis.loading = true;\n\n\t\t// Setup request\n\t\tconst request = (this.request = new HttpRequest(url, {\n\t\t\tdataKey: this.dataKey,\n\t\t\twithCredentials: this.options.withCredentials,\n\t\t}));\n\n\t\t/*\n\t\t * note: this *should* be set by fetch as well, but\n\t\t * we have an issue right now we're working out\n\t\t */\n\t\tthis.request.method = method;\n\n\t\t// After parse\n\t\trequest.on('complete:delete', (e: IDispatcherEvent) => {\n\t\t\tthis.dispatch('complete:delete', e.detail);\n\n\t\t\t// Remove possible identifiers if we deleted something\n\t\t\tthis.builder.identifier('');\n\t\t});\n\n\t\t/*\n\t\t * The \"e' bubbling up is an Event, where \"e.target\" == HttpRequest\n\t\t * I want to add a new solution for this, but will wait for now.\n\t\t */\n\t\trequest.on('complete:get', (e: IDispatcherEvent) => this.dispatch('complete:get', e.detail));\n\t\trequest.on('complete:post', (e: IDispatcherEvent) => this.dispatch('complete:post', e.detail));\n\t\trequest.on('complete:put', (e: IDispatcherEvent) => this.dispatch('complete:put', e.detail));\n\t\trequest.on('complete', (e: IDispatcherEvent) => this.FetchComplete(e));\n\t\trequest.on('error:delete', (e: IDispatcherEvent) => this.dispatch('error:delete', e.detail));\n\t\trequest.on('error:get', (e: IDispatcherEvent) => this.dispatch('error:get', e.detail));\n\t\trequest.on('error:post', (e: IDispatcherEvent) => this.dispatch('error:post', e.detail));\n\t\trequest.on('error:put', (e: IDispatcherEvent) => this.dispatch('error:put', e.detail));\n\t\trequest.on('error', (e: IDispatcherEvent) => {\n\t\t\tthis.loading = false;\n\t\t\treturn this.dispatch('error', e.detail);\n\t\t});\n\t\trequest.on('finish', (e: IDispatcherEvent) => this.dispatch('finish'));\n\t\trequest.on('parse:after', (e: IDispatcherEvent) => this.FetchParseAfter(e, options || {}));\n\t\trequest.on('progress', (e: IDispatcherEvent) => this.FetchProgress(e));\n\n\t\t/*\n\t\t * Request (method, body headers)\n\t\t * @ts-ignore\n\t\t */\n\t\treturn request.fetch(\n\t\t\tmethod,\n\t\t\tObject.assign(body || {}, this.body),\n\t\t\tObject.assign(headers || {}, this.headers),\n\t\t\tttl\n\t\t);\n\t}\n\n\t/*\n\t * region: Cache (mk: I think this is outdated now, but I like the subscribers part)\n\t * -------------------------------------------------------------------------\n\t */\n\n\t// /**\n\t//  * @type ICachedResponses\n\t//  */\n\t// protected static cachedResponses: ICachedResponses = {};\n\n\t// /**\n\t//  * Usage:\n\t//  *\n\t//  *     this.cache('foo', 'bar');\n\t//  *\n\t//  * @param string, key\n\t//  * @param any value\n\t//  * @param boolean isComplete\n\t//  * @param number tll\n\t//  * @return void\n\t//  */\n\t// protected cache(key: string, value: any, isComplete: boolean = false, ttl: number = 5000): void {\n\t// \t// If exists, save only value as to not overwrite subscribers\n\t// \tif (ActiveRecord.cachedResponses[key]) {\n\t// \t\tActiveRecord.cachedResponses[key].complete = isComplete;\n\t// \t\tActiveRecord.cachedResponses[key].time = Date.now();\n\t// \t\tActiveRecord.cachedResponses[key].value = value;\n\t// \t}\n\t// \telse {\n\t// \t\tActiveRecord.cachedResponses[key] = {\n\t// \t\t\tcomplete: false,\n\t// \t\t\tsubscribers: [],\n\t// \t\t\ttime: Date.now(),\n\t// \t\t\tttl: ttl,\n\t// \t\t\tvalue: value,\n\t// \t\t};\n\t// \t}\n\t// }\n\n\t// /**\n\t//  * @param string key\n\t//  * @return boolean\n\t//  */\n\t// protected isCached(key: string): boolean {\n\t// \treturn !!ActiveRecord.cachedResponses[key];\n\n\t// \t/*\n\t// \t * return !!ActiveRecord.cachedResponses[key]\n\t// \t *     && (ActiveRecord.cachedResponses[key].time + ActiveRecord.cachedResponses[key].ttl) < Date.now();\n\t// \t */\n\t// }\n\n\t// /**\n\t//  * @param string key\n\t//  * @return boolean\n\t//  */\n\t// protected isCachePending(key: string): boolean {\n\t// \treturn !!this.isCached(key) && (!this.getCache(key).complete || !!this.getCache(key).failed);\n\t// }\n\n\t// /**\n\t//  * @param string key\n\t//  * @return ICachedResponse\n\t//  */\n\t// protected getCache(key: string): ICachedResponse {\n\t// \treturn ActiveRecord.cachedResponses[key];\n\t// }\n\n\t// /**\n\t//  * Add subscriber\n\t//  *\n\t//  * @param string key\n\t//  * @param any resolve\n\t//  * @param any reject\n\t//  * @param any collection\n\t//  * @return void\n\t//  */\n\t// protected addCacheSubscriber(key: string, resolve: any, reject: any, collection: any): void {\n\t// \tconst cache: any = this.getCache(key);\n\n\t/*\n\t * \tcache.subscribers.push({\n\t * \t\tcollection,\n\t * \t\treject,\n\t * \t\tresolve,\n\t * \t});\n\t * }\n\t */\n\n\t// /**\n\t//  * @param string key\n\t//  * @return void\n\t//  */\n\t// protected clearCacheSubscribers(key: string): void {\n\t// \tconst cache: any = this.getCache(key);\n\t// \tcache.subscribers = [];\n\t// }\n\n\t// endregion: Cache\n\n\t/*\n\t * region: Http Events\n\t * ---------------------------------------------------------------------------\n\t */\n\n\t/*\n\t * Complete from fetch request\n\t *\n\t * @param HttpRequest request\n\t * @return void\n\t */\n\tprotected FetchComplete(e: IDispatcherEvent): void {\n\t\tthis.hasLoaded = true;\n\t\tthis.loading = false;\n\t\tthis.dispatch('complete', e.detail);\n\t}\n\n\t/**\n\t * Progress from fetch request\n\t *\n\t * @param IProgressEvent progress\n\t * @return void\n\t */\n\tprotected FetchProgress(e: IDispatcherEvent): void {\n\t\tthis.dispatch('progress', e.detail);\n\t}\n\n\t/**\n\t * Overrideable fetch parse:after\n\t *\n\t * @param HttpRequest request\n\t * @param IAttributes options\n\t * @return void\n\t */\n\tprotected FetchParseAfter(e: IDispatcherEvent, options: IAttributes = {}): void {\n\t\t// @ts-ignore\n\t\tconst code: number = e.detail?.response?.status || 0;\n\n\t\t// Only set for acceptable responses\n\t\tif (code < 400) {\n\t\t\tthis.setAfterResponse(e, options);\n\t\t}\n\n\t\t// Fetched event\n\t\tthis.dispatch('fetched', e.detail);\n\t}\n\n\t// endregion: Http Events\n}\n", "import Collection from './Collection.js';\nimport Model from './Model.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class CollectionIterator<GenericModel extends Model> {\n\t/**\n\t * @type number\n\t */\n\tpublic static ITERATOR_VALUES = 0;\n\n\t/**\n\t * @type number\n\t */\n\tpublic static ITERATOR_KEYS = 1;\n\n\t/**\n\t * @type number\n\t */\n\tpublic static ITERATOR_KEYSVALUES = 2;\n\n\t/**\n\t * @type number\n\t */\n\tpublic index: number = 0;\n\n\t/**\n\t * @type Collection<any>\n\t */\n\tprotected collection: Collection<GenericModel> | undefined;\n\n\t/**\n\t * @type number\n\t */\n\tprotected kind: number = CollectionIterator.ITERATOR_VALUES;\n\n\t/**\n\t * @type function\n\t */\n\tprotected filter!: (model: GenericModel, index: number) => boolean;\n\n\t/**\n\t * @constructor\n\t * @param Collection collection\n\t * @param number kind\n\t * @param any filter\n\t */\n\tconstructor(\n\t\tcollection: Collection<GenericModel>,\n\t\tkind: number = 0,\n\t\tfilter: (model: GenericModel, index: number) => boolean = (model: GenericModel) => true\n\t) {\n\t\tthis.collection = collection;\n\t\tthis.index = 0;\n\t\tthis.kind = kind;\n\t\tthis.filter = filter;\n\t}\n\n\t/**\n\t * @return object\n\t */\n\tpublic next(filter?: (model: GenericModel, index: number) => boolean): IteratorResult<any> {\n\t\tconst iteratorFilter = filter || this.filter;\n\n\t\twhile (this.collection && this.index < this.collection.length) {\n\t\t\tconst model = this.collection.at(this.index);\n\t\t\tthis.index++;\n\n\t\t\tif (iteratorFilter(model, this.index - 1)) {\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue: this.getValue(model),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: true,\n\t\t\tvalue: undefined,\n\t\t};\n\t}\n\n\t/**\n\t * @param function filter\n\t * @return IteratorResult<any>\n\t */\n\tpublic previous(filter?: (model: GenericModel, index: number) => boolean): IteratorResult<any> {\n\t\tconst iteratorFilter = filter || this.filter;\n\n\t\twhile (this.collection && this.index > 0) {\n\t\t\tthis.index--;\n\t\t\tconst model = this.collection.at(this.index);\n\n\t\t\tif (iteratorFilter(model, this.index)) {\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue: this.getValue(model),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: true,\n\t\t\tvalue: undefined,\n\t\t};\n\t}\n\n\t/**\n\t * @return IteratorResult<any>\n\t */\n\tpublic current(): IteratorResult<any> {\n\t\tif (this.collection && this.index > 0 && this.index <= this.collection.length) {\n\t\t\tconst model = this.collection.at(this.index - 1);\n\n\t\t\tif (this.filter(model, this.index - 1)) {\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue: this.getValue(model),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdone: true,\n\t\t\tvalue: undefined,\n\t\t};\n\t}\n\n\t/**\n\t * @param GenericModel model\n\t * @return any\n\t */\n\tprivate getValue(model: GenericModel): any {\n\t\tif (this.kind === CollectionIterator.ITERATOR_VALUES) {\n\t\t\treturn model;\n\t\t} else if (this.kind === CollectionIterator.ITERATOR_KEYS) {\n\t\t\treturn this.collection!.modelId;\n\t\t} else {\n\t\t\treturn [this.collection!.modelId, model];\n\t\t}\n\t}\n\n\t/**\n\t * @return this\n\t */\n\t[Symbol.iterator](): any {\n\t\treturn this;\n\t}\n}\n", "import ActiveRecord from './ActiveRecord.js';\nimport Collection from './Collection.js';\nimport Request from './Http/Request.js';\nimport { IAttributes, IModelRequestOptions, IModelRequestQueryParams } from './Interfaces.js';\n\n/**\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class Model extends ActiveRecord<Model> {\n\t/**\n\t * @param IAttributes attributes\n\t * @param IAttributes options\n\t * @return Model\n\t */\n\tpublic static hydrate<T>(attributes: IAttributes = {}, options: IAttributes = {}): Model {\n\t\t// Instantiate model\n\t\tconst model = new this(options);\n\n\t\t// Add models to model\n\t\tmodel.set(attributes);\n\n\t\t// Set options to model\n\t\tmodel.setOptions(options);\n\n\t\treturn model;\n\t}\n\n\t/**\n\t * Use this if your relationships exist within a subkey of some type.\n\t * For example:\n\t *\n\t * {\n\t *     \"id\": 1,\n\t *     \"media\": { ... },\n\t * }\n\t *\n\t * versus\n\t *\n\t * {\n\t *     \"id\": 1,\n\t *     \"relationships\": {\n\t *         \"media\": { ... }\n\t *     },\n\t * }\n\t *\n\t * @type string | null\n\t */\n\tpublic static relationshipKey: string | null = null;\n\n\t/**\n\t * For our relationships like hasOne, we assume that the resulting\n\t * endpoint will consume the other endpoint.\n\t *\n\t *     film.hasOne('review', ModelReview)\n\t *\n\t * becomes film/1/review. If you disable this feature, then the\n\t * endpoint will be: /review\n\t *\n\t * @type string | null\n\t */\n\tpublic static useDescendingRelationships: boolean = true;\n\n\t/**\n\t * Model if we provide a specific identifier\n\t *\n\t * @return boolean\n\t */\n\tprotected get isModel(): boolean {\n\t\treturn true;\n\t}\n\n\t/**\n\t * Instance cache for relationships\n\t *\n\t * @type IAttributes\n\t */\n\tprivate relationshipCache: IAttributes = {};\n\n\t/**\n\t * @param IAttributes attributes\n\t * @param IAttributes options\n\t */\n\tconstructor(attributes: IAttributes = {}, options: IAttributes = {}) {\n\t\tsuper(options);\n\n\t\t// Set datakey\n\t\tthis.dataKey = undefined;\n\n\t\t// Set attributes\n\t\tthis.set(attributes);\n\n\t\t// Set options\n\t\tthis.setOptions(options);\n\t}\n\n\t/**\n\t * @note Unsure if we should delete existing relationships\n\t * or `set` on them. I think we have failures with the `set`\n\t *\n\t * @param IAttributes attributes\n\t * @return Model\n\t */\n\tpublic set(attributes: IAttributes = {}): Model {\n\t\tlet key: string;\n\n\t\t// Trigger event\n\t\tthis.dispatch('set:before', { attributes });\n\n\t\t// mk: 29, we disabled this because it breaks references\n\t\t// but we had previously enabled it for some reason.\n\t\t// What would that reason be?\n\n\t\t// This forces a reset of relationship caches\n\t\t// for (let key in hash) {\n\t\t//     // @ts-ignore\n\t\t//     if (this.relationshipCache[key]) {\n\t\t//         // @ts-ignore\n\t\t//         delete this.relationshipCache[key];\n\t\t//     }\n\t\t// }\n\n\t\t// Don't trigger event\n\t\tsuper.set(attributes, {}, false);\n\n\t\t// If we find an array of data on our dataKey, it's likely that\n\t\t// we accidentally received collection data on a model. We won't\n\t\t// stop it from happening, but we should raise an alert\n\t\tif (this.dataKey && this.attributes[this.dataKey] && this.attributes[this.dataKey].length) {\n\t\t\tconsole.warn(\n\t\t\t\t[\n\t\t\t\t\t'This model is incorrectly receiving data meant for a collection.',\n\t\t\t\t\t'We found an array on key: ',\n\t\t\t\t\tthis.dataKey,\n\t\t\t\t].join(' '),\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\t// Update any relationship caches that exist\n\t\t// Don't delete them, as to save object references\n\t\tfor (key in attributes) {\n\t\t\tif (this.relationshipCache[key]) {\n\t\t\t\tthis.relationshipCache[key].set(attributes[key]);\n\t\t\t}\n\t\t}\n\n\t\t// Trigger event\n\t\tthis.dispatch('set', { attributes });\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param IModelRequestOptions options\n\t * @param IModelRequestQueryParams queryParams\n\t * @return Promise\n\t */\n\tpublic async fetch(options: IModelRequestOptions = {}, queryParams: IModelRequestQueryParams = {}) {\n\t\t// Allow options to override the ID of our URL\n\t\tthis.builder.identifier(options && options.id ? options.id : this.id);\n\n\t\t// Check if ID exists\n\t\tif (!(options && options.id) && !this.id) {\n\t\t\tconsole.warn('Fetching a model without an ID is likely incorrect behavior.', this, this.toJSON());\n\t\t}\n\n\t\treturn await super.fetch(options, queryParams);\n\t}\n\n\t// region: Relationships\n\t// ------------------------------------------------------------------------\n\n\t/**\n\t * Return singular instance of related content\n\t * e.g. return this.hasOne('review', ModelContent);\n\t *\n\t * @param string relationshipName\n\t * @param any relationshipClass\n\t * @return ActiveRecord\n\t */\n\tpublic hasOne<T>(relationshipName: string, relationshipClass: any): T {\n\t\t// Return cached relationship, if exists\n\t\tif (this.relationshipCache[relationshipName]) {\n\t\t\treturn this.relationshipCache[relationshipName];\n\t\t}\n\n\t\t// Create new model using data from this object\n\t\t// e.g. new ModelContent(this.attr('review'))\n\t\tlet content = this.getRelationship(relationshipName) || {};\n\t\tlet model = new relationshipClass(content);\n\n\t\t// Reference this model as parent\n\t\tmodel.parent = this;\n\n\t\t// If the content is empty, check to see if the parent has an \"id\"\n\t\t// that might be worth prefilling.\n\t\t// e.g. `relationshipName` == 'product', look for 'product_id'\n\t\tif (!model.id) {\n\t\t\tconst camelRelationship: string = `${relationshipName}_id`;\n\t\t\tconst underscoreRelationship: string = camelRelationship.replace(\n\t\t\t\t/[A-Z]/g,\n\t\t\t\t(x: string) => '_' + x.toLowerCase()\n\t\t\t);\n\t\t\tconst relationshipId: string | number =\n\t\t\t\tthis.attr(camelRelationship) || this.attr(underscoreRelationship) || '';\n\n\t\t\tmodel.setId(relationshipId as string);\n\t\t}\n\n\t\t// Use modified endpoints\n\t\tif (Model.useDescendingRelationships) {\n\t\t\tmodel.useModifiedEndpoint(this);\n\t\t}\n\n\t\treturn (this.relationshipCache[relationshipName] = model) as T;\n\t}\n\n\t/**\n\t * Return multiple instances of related content\n\t *\n\t * @param string relationshipName\n\t * @param any relationshipClass\n\t * @return Collection\n\t */\n\tpublic hasMany<T>(relationshipName: string, relationshipClass: any): T {\n\t\t// Return cached relationship, if exists\n\t\tif (this.relationshipCache[relationshipName]) {\n\t\t\treturn this.relationshipCache[relationshipName];\n\t\t}\n\n\t\tconst dataKey: string | undefined = new relationshipClass().dataKey;\n\t\tconst content: Collection<any> | Model | undefined = this.getRelationship(relationshipName);\n\t\tconst collection: any = relationshipClass.hydrate((dataKey && content ? content[dataKey] : null) || content);\n\n\t\t// Reference relationship parent\n\t\tcollection.parent = this;\n\n\t\t// Use modified endpoints\n\t\tif (Model.useDescendingRelationships) {\n\t\t\tcollection.useModifiedEndpoint(this);\n\t\t}\n\n\t\treturn (this.relationshipCache[relationshipName] = collection) as T;\n\t}\n\n\t/**\n\t * @param string relationshipName\n\t * @return object\n\t */\n\tprotected getRelationship(relationshipName: string): any {\n\t\t// Relationship is on root\n\t\tif (Model.relationshipKey === null) {\n\t\t\treturn this.attr(relationshipName);\n\t\t}\n\n\t\t// Relationship is buried\n\t\telse {\n\t\t\treturn (this.attr(Model.relationshipKey) || {})[relationshipName];\n\t\t}\n\t}\n\n\t// endregion\n}\n", "import ActiveRecord from './ActiveRecord.js';\nimport CollectionIterator from './CollectionIterator.js';\nimport HttpRequest from './Http/Request.js';\nimport Model from './Model.js';\nimport {\n\tIAttributes,\n\tIAxiosResponse,\n\tIAxiosSuccess,\n\tICollectionMeta,\n\tIDispatcherEvent,\n\tIRequest,\n\tIModelRequestOptions,\n\tIModelRequestQueryParams,\n\tIPagination,\n\tISortOptions,\n} from './Interfaces.js';\n\n/**\n * 'meta': {\n *     'pagination': {\n *         'total': 1938,\n *         'count': 15,\n *         'per_page': 15,\n *         'current_page': 1,\n *         'total_pages': 130,\n *         'links': {\n *             'next': 'http://api.sotw.com/v1/film?page=2'\n *         }\n *     }\n * }\n *\n * @author Matt Kenefick <matt@polymermallard.com>\n * @package RestMC\n * @project RestMC\n */\nexport default class Collection<GenericModel extends Model>\n\textends ActiveRecord<Collection<GenericModel>>\n\timplements Iterable<GenericModel>\n{\n\t/**\n\t * This static function could be overridden globally depending on the\n\t * structure of your API. By default, we assume it's within .meta\n\t *\n\t * @param Collection collection\n\t * @return object\n\t */\n\tpublic static paginator(collection: any): IPagination {\n\t\treturn collection.meta.pagination;\n\t}\n\n\t/**\n\t * Hydrate a collection full of models\n\t *\n\t * @param Model[] models\n\t * @param object options\n\t * @param boolean trigger\n\t * @type Collection\n\t */\n\tpublic static hydrate<T>(models: Model[] | any = [], options: object = {}, trigger: boolean = true): any {\n\t\t// Instantiate collection\n\t\tconst collection = new this(options);\n\n\t\t// Add models to collection\n\t\tif (models) {\n\t\t\tcollection.add(models, {}, trigger);\n\t\t}\n\n\t\t// Add options to collection\n\t\tcollection.setOptions(options);\n\n\t\treturn collection;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tprotected get isCollection(): boolean {\n\t\treturn true;\n\t}\n\n\t/**\n\t * @todo In tests, make sure this doesn't cache\n\t * @return number\n\t */\n\tpublic get length(): number {\n\t\treturn this.models.length;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic get modelId(): string {\n\t\treturn 'id';\n\t}\n\n\t/**\n\t * @return IPagination\n\t */\n\tpublic get pagination(): IPagination {\n\t\treturn Collection.paginator(this);\n\t}\n\n\t/**\n\t * This allows us to iterate through a list of subobjects\n\t * when we use our \".at(x)\" command. So if on the collection,\n\t * we wanted to iterate and get:\n\t *\n\t *     .at(0).receiver.person\n\t *\n\t * We could set this property to be:\n\t *\n\t *     ['receiver', 'person']\n\t *\n\t * Which we could then call as:\n\t *\n\t *     at(0) === at(0).receiver.person\n\t *\n\t * It's sort of like a disguise for the at(x) call\n\t *\n\t * @type string[]\n\t */\n\tpublic atRelationship: string[] = [];\n\n\t/**\n\t * Meta data associated with collection\n\t *\n\t * @type ICollectionMeta\n\t */\n\tpublic meta: ICollectionMeta = {\n\t\tpagination: {\n\t\t\tcount: 15,\n\t\t\tcurrent_page: 1,\n\t\t\tlinks: {},\n\t\t\tper_page: 15,\n\t\t\ttotal: 0,\n\t\t\ttotal_pages: 1,\n\t\t},\n\t};\n\n\t/**\n\t * Model object instantiated by this collection\n\t * This should be replaced by subclass\n\t *\n\t * @type GenericModel\n\t */\n\tpublic model!: GenericModel;\n\n\t/**\n\t * @type GenericModel[]\n\t */\n\tpublic models: GenericModel[] = [];\n\n\t/**\n\t * @type string\n\t */\n\tprotected sortKey: string = 'id';\n\n\t/**\n\t * @type CollectionIterator<GenericModel>\n\t */\n\tprivate iterator: CollectionIterator<GenericModel>;\n\n\t/**\n\t * We specifically don't set models here because the Model doesn't exist\n\t * until constructor is done. We must use hydrate for that. Don't add data.\n\t *\n\t * If we do it early, we won't get FilmModels, we'll get Models.\n\t *\n\t * @param IAttributes options\n\t */\n\tconstructor(options: IAttributes = {}) {\n\t\tsuper(options);\n\n\t\t// Setup basic class iterator\n\t\tthis.iterator = new CollectionIterator(this);\n\n\t\t// Set default data key\n\t\tthis.dataKey = 'data';\n\n\t\t// Set options\n\t\tthis.setOptions(options);\n\n\t\t// Default builder\n\t\tthis.builder.qp('limit', options.limit || this.limit).qp('page', options.page || this.page);\n\n\t\t// Custom options\n\t\tif (options.atRelationship) {\n\t\t\tthis.atRelationship = options.atRelationship;\n\t\t}\n\t}\n\n\t/**\n\t * @return object\n\t */\n\tpublic toJSON(): object {\n\t\treturn JSON.parse(JSON.stringify(this.models));\n\t}\n\n\t/**\n\t * Fetch next page with last used set of options\n\t *\n\t * @param bool append\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic async fetchNext(append: boolean = false): Promise<HttpRequest> {\n\t\tlet options = Object.assign({}, this.lastRequest.options);\n\t\tlet qp = Object.assign({}, this.builder.queryParams, this.lastRequest.queryParams);\n\n\t\t// Increase page number\n\t\tqp.page = parseFloat(qp.page) + 1;\n\n\t\t// Merge\n\t\toptions.merge = append;\n\n\t\t// Fetch\n\t\treturn await this._fetch(options, qp, this.lastRequest.method, this.lastRequest.body, this.lastRequest.headers);\n\t}\n\n\t/**\n\t * Fetch previous page with last used set of options\n\t *\n\t * @param bool append\n\t * @return Promise<HttpRequest>\n\t */\n\tpublic async fetchPrevious(append: boolean = false): Promise<HttpRequest> {\n\t\tlet options = Object.assign({}, this.lastRequest.options);\n\t\tlet qp = Object.assign({}, this.builder.queryParams, this.lastRequest.queryParams);\n\n\t\t// Decrease page number\n\t\tqp.page = Math.max(1, parseFloat(qp.page) - 1);\n\n\t\t// Merge\n\t\toptions.merge = append;\n\n\t\t// Fetch\n\t\treturn await this._fetch(options, qp, this.lastRequest.method, this.lastRequest.body, this.lastRequest.headers);\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getEndpoint(): string {\n\t\treturn super.getEndpoint() || this.model.endpoint;\n\t}\n\n\t/**\n\t * Add or prepend Model(s) to our list. Set `prepend` = true on options\n\t * if you'd like to prepend the models\n\t *\n\t * @param  Model[] | Model | object data\n\t * @param  IAttributes options\n\t * @param  boolean trigger\n\t * @return Collection\n\t */\n\tpublic add(\n\t\tdata: GenericModel[] | GenericModel | object,\n\t\toptions: IAttributes = {},\n\t\ttrigger: boolean = true\n\t): Collection<GenericModel> {\n\t\tif (data == undefined) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Allow multiple models/data or single\n\t\tconst models: any = Array.isArray(data) ? data : [data];\n\n\t\t// Iterate through supplied models/data\n\t\tmodels.forEach((model: GenericModel) => {\n\t\t\t// Data supplied is an object that must be instantiated\n\t\t\tif (!(model instanceof Model)) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tmodel = new this.model.constructor(model);\n\t\t\t}\n\n\t\t\t// Set references on model\n\t\t\tmodel.parent = this;\n\t\t\tmodel.headers = this.headers;\n\n\t\t\t// Check the modified endpoint\n\t\t\tif (this.referenceForModifiedEndpoint) {\n\t\t\t\tmodel.useModifiedEndpoint(this.referenceForModifiedEndpoint);\n\t\t\t}\n\n\t\t\t// Trigger event before adding it\n\t\t\ttrigger && this.dispatch('add:before', { model });\n\n\t\t\t// Add to list\n\t\t\tif (options.prepend) {\n\t\t\t\tthis.models.unshift(model);\n\t\t\t} else {\n\t\t\t\tthis.models.push(model);\n\t\t\t}\n\t\t});\n\n\t\t// Event for add\n\t\ttrigger && this.dispatch('change', { from: 'add' });\n\t\ttrigger && this.dispatch('add');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove a model, a set of models, or an object\n\t *\n\t * @param  Model[] | Model | object model\n\t * @param  boolean trigger\n\t * @return Collection\n\t */\n\tpublic remove(model: Model[] | Model | object, trigger: boolean = true): Collection<GenericModel> {\n\t\tlet i: number = 0;\n\t\tlet ii: number = 0;\n\t\tconst items: any = Array.isArray(model) ? model : [model];\n\n\t\t// Take the first model in our list and iterate through our local\n\t\t// models. If we are successful, call recursive\n\t\tfor (ii = 0; ii < items.length; ii++) {\n\t\t\ti = 0;\n\n\t\t\twhile (i < this.models.length) {\n\t\t\t\ttrigger && this.dispatch('remove:before', { model: this.models[i] });\n\n\t\t\t\tif (this.models[i] == items[ii]) {\n\t\t\t\t\tthis.models.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Event for add\n\t\ttrigger && this.dispatch('change', { from: 'remove' });\n\t\ttrigger && this.dispatch('remove');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Reset and add new models\n\t *\n\t * @todo Review this\n\t *\n\t * @param  Model[] | Model | object model\n\t * @param  IAttributes options\n\t * @param  boolean trigger\n\t * @return Collection\n\t */\n\tpublic set(\n\t\tmodel: Model[] | Model | object,\n\t\toptions: IAttributes = {},\n\t\ttrigger: boolean = true\n\t): Collection<GenericModel> {\n\t\tif (!options || (options && options.merge != true)) {\n\t\t\tthis.reset();\n\t\t}\n\n\t\t// Add model to list\n\t\tthis.add(model, options, trigger);\n\n\t\t// Event for add\n\t\ttrigger && this.dispatch('set');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return Collection\n\t */\n\tpublic clear(): Collection<GenericModel> {\n\t\treturn this.reset();\n\t}\n\n\t/**\n\t * @return number\n\t */\n\tpublic count(): number {\n\t\treturn this.length;\n\t}\n\n\t/**\n\t * @param IAttributes attributes\n\t */\n\tpublic delete(attributes: IAttributes = {}) {\n\t\tconst url: string = this.builder.identifier(this.id || attributes?.id || '').getUrl();\n\n\t\t// Check for identifier\n\t\tif (this.builder.id) {\n\t\t\tlet model: Model | undefined = this.findWhere(attributes);\n\n\t\t\tmodel && this.remove(model);\n\t\t}\n\n\t\t// Attributes\n\t\tconst body: any = null;\n\t\tconst headers: any = this.headers;\n\t\tconst method: string = 'DELETE';\n\n\t\treturn this._fetch(null, {}, method, body, headers);\n\t}\n\n\t/**\n\t * Iterate over the models list\n\t * @return void\n\t */\n\tpublic each(callback: any): void {\n\t\tthis.models.forEach(callback);\n\t}\n\n\t/**\n\t * Filter through a models list\n\t * @return void\n\t */\n\tpublic filter(predicate: any): GenericModel[] {\n\t\treturn this.models.filter(predicate);\n\t}\n\n\t/**\n\t * @return Model[]\n\t */\n\tpublic map(...params: any): any[] {\n\t\treturn <Model[]>Array.prototype.map.apply(this.models, params);\n\t}\n\n\t/**\n\t * @param Model[] | Model | object model\n\t * @param object = {} options\n\t * @return Collection\n\t */\n\tpublic push(model: Model[] | Model | object, options: object = {}): Collection<GenericModel> {\n\t\tthis.add(model, options);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return Collection\n\t */\n\tpublic pop(): Collection<GenericModel> {\n\t\tconst model: GenericModel = this.at(this.length - 1);\n\n\t\treturn this.remove(model);\n\t}\n\n\t/**\n\t * @todo Might want to do more with this\n\t * @return Collection\n\t */\n\tpublic reset(): Collection<GenericModel> {\n\t\tthis.models = [];\n\n\t\tthis.dispatch('change', { from: 'reset' });\n\t\tthis.dispatch('reset');\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Add Model(s) to beginning of list\n\t *\n\t * @param  Model[] | Model | object model\n\t * @param  IAttributes options\n\t * @return Collection\n\t */\n\tpublic unshift(model: GenericModel[] | GenericModel | object, options: IAttributes = {}): Collection<GenericModel> {\n\t\treturn this.add(model, Object.assign({ prepend: true }, options));\n\t}\n\n\t/**\n\t * Remove first object\n\t *\n\t * @return Collection\n\t */\n\tpublic shift(): Collection<GenericModel> {\n\t\tconst model: GenericModel = this.at(0);\n\n\t\treturn this.remove(model);\n\t}\n\n\t/**\n\t * Cut up collection models\n\t *\n\t * @return Model[]\n\t */\n\tpublic slice(...params: any): GenericModel[] {\n\t\treturn <GenericModel[]>Array.prototype.slice.apply(this.models, params);\n\t}\n\n\t/**\n\t * Get model by ID\n\t *\n\t * @param  string | number  id\n\t * @return Model | undefined\n\t */\n\tpublic get(query: GenericModel | number | string): Model | undefined {\n\t\tif (query == null) {\n\t\t\treturn void 0;\n\t\t}\n\n\t\treturn this.where({ [this.modelId]: query instanceof Model ? query.id : query }, true) as GenericModel;\n\t}\n\n\t/**\n\t * Checks if we have an object or Model\n\t *\n\t * @param  GenericModel | object  obj\n\t * @return boolean\n\t */\n\tpublic has(obj: GenericModel | number | string): boolean {\n\t\treturn this.get(obj) != undefined;\n\t}\n\n\t/**\n\t * Get model at index\n\t *\n\t * @param number index\n\t * @return GenericModel\n\t */\n\tpublic at(index: number = 0): GenericModel {\n\t\tif (index < 0) {\n\t\t\tindex += this.length;\n\t\t}\n\n\t\t// Get model\n\t\tlet item: any = this.models[index];\n\n\t\t// Transform through\n\t\t// mk: This doesn't look like it works yet?\n\t\tif (this.atRelationship && this.atRelationship.length) {\n\t\t\tthis.atRelationship.forEach((key) => (item = item[key]));\n\t\t}\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Get first item\n\t *\n\t * @return GenericModel\n\t */\n\tpublic first(): GenericModel {\n\t\treturn this.at(0);\n\t}\n\n\t/**\n\t * @return GenericModel\n\t */\n\tpublic last(): GenericModel {\n\t\treturn this.at(this.length - 1);\n\t}\n\n\t/**\n\t * Comparing hard object attributes to model attr\n\t *\n\t * @param  IAttributes json\n\t * @param  boolean first\n\t * @param  boolean fullMatch\n\t * @return Collection | Model\n\t */\n\tpublic where(\n\t\tjson: IAttributes = {},\n\t\tfirst: boolean = false,\n\t\tfullMatch: boolean = false\n\t): this | Collection<GenericModel> | GenericModel {\n\t\tconst constructor: any = this.constructor;\n\t\tconst filteredModels: any[] = [];\n\n\t\tthis.models.forEach((model: GenericModel) => {\n\t\t\t// Get assigned attributes per model\n\t\t\tconst attributes: string[] = Object.keys(json);\n\n\t\t\t// Find intersection of our model and what has been passed in\n\t\t\tconst intersection: string[] = attributes.filter((key: string) => {\n\t\t\t\treturn (\n\t\t\t\t\t// Exists in our search request\n\t\t\t\t\tkey in json &&\n\t\t\t\t\t// The two values are equivalent\n\t\t\t\t\tmodel.attr(key) == json[key]\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// We have a full intersection\n\t\t\tif (fullMatch && intersection.length == attributes.length) {\n\t\t\t\tfilteredModels.push(model);\n\t\t\t}\n\n\t\t\t// We have a partial intersection\n\t\t\telse if (!fullMatch && intersection.length) {\n\t\t\t\tfilteredModels.push(model);\n\t\t\t}\n\t\t});\n\n\t\t// Hydrate from models\n\t\tconst collection = constructor.hydrate(filteredModels, this.options, false);\n\n\t\treturn first ? collection.first() : collection;\n\t}\n\n\t/**\n\t * @param  IAttributes attributes\n\t * @return Model\n\t */\n\tpublic findWhere(attributes: IAttributes = {}): GenericModel {\n\t\treturn this.where(attributes, true) as GenericModel;\n\t}\n\n\t/**\n\t * @param  string cid\n\t * @return Model | undefined\n\t */\n\tpublic findByCid(cid: string): GenericModel {\n\t\treturn this.findWhere({ cid });\n\t}\n\n\t/**\n\t * Sorting models by key or in reverse\n\t *\n\t * We have a basic `sortKey` defined on the collection, but\n\t * can also pass in an object with `key` and `reverse` on it\n\t *\n\t * @param  IAttributes options\n\t * @return Collection\n\t */\n\tpublic sort(options: IAttributes = {}): Collection<GenericModel> {\n\t\tlet key: string = this.sortKey;\n\n\t\t// Sort options\n\t\tif (options !== null) {\n\t\t\tkey = options.key || key;\n\t\t}\n\n\t\t// Sort\n\t\tthis.models = this.models.sort((a: any, b: any) => {\n\t\t\treturn options && options.reverse ? (a.attr(key) - b.attr(key)) * -1 : (a.attr(key) - b.attr(key)) * 1;\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Pull out an attribute from our models\n\t *\n\t * Example:\n\t *     collection.pluck('name');\n\t *\n\t *     ['Ashley', 'Briana', 'Chloe', ...]\n\t *\n\t * @param  string attribute\n\t * @return any\n\t */\n\tpublic pluck(attribute: string): any {\n\t\treturn this.models.map((model) => model.attr(attribute));\n\t}\n\n\t/**\n\t * Return an iterator for values based on this collection\n\t *\n\t * @param filter Optional filter function\n\t * @return CollectionIterator\n\t */\n\tpublic values(filter?: (model: GenericModel, index: number) => boolean): CollectionIterator<GenericModel> {\n\t\treturn new CollectionIterator<GenericModel>(this, CollectionIterator.ITERATOR_VALUES, filter);\n\t}\n\n\t/**\n\t * Return an iterator for keys based on this collection\n\t *\n\t * @param filter Optional filter function\n\t * @return CollectionIterator\n\t */\n\tpublic keys(filter?: (model: GenericModel, index: number) => boolean): CollectionIterator<GenericModel> {\n\t\treturn new CollectionIterator<GenericModel>(this, CollectionIterator.ITERATOR_KEYS, filter);\n\t}\n\n\t/**\n\t * Return an iterator for entries (key + value) based on this collection\n\t *\n\t * @param filter Optional filter function\n\t * @return CollectionIterator\n\t */\n\tpublic entries(filter?: (model: GenericModel, index: number) => boolean): CollectionIterator<GenericModel> {\n\t\treturn new CollectionIterator<GenericModel>(this, CollectionIterator.ITERATOR_KEYSVALUES, filter);\n\t}\n\n\t/**\n\t * @param filter Optional filter function\n\t * @return GenericModel | undefined\n\t */\n\tpublic next(filter?: (model: GenericModel, index: number) => boolean): GenericModel | undefined {\n\t\tconst result = this.iterator.next(filter);\n\t\treturn result.done ? undefined : result.value;\n\t}\n\n\t/**\n\t * @param filter Optional filter function\n\t * @return GenericModel | undefined\n\t */\n\tpublic previous(filter?: (model: GenericModel, index: number) => boolean): GenericModel | undefined {\n\t\tconst result = this.iterator.previous(filter);\n\t\treturn result.done ? undefined : result.value;\n\t}\n\n\t/**\n\t * @return number\n\t */\n\tpublic index(): number {\n\t\treturn this.iterator.index;\n\t}\n\n\t/**\n\t * @param filter Optional filter function\n\t * @return GenericModel | undefined\n\t */\n\tpublic current(filter?: (model: GenericModel, index: number) => boolean): GenericModel | undefined {\n\t\tconst result = this.iterator.current();\n\n\t\tif (!result.done && filter) {\n\t\t\tconst model = result.value;\n\t\t\tconst index = this.indexOf(model);\n\n\t\t\tif (filter(model, index)) {\n\t\t\t\treturn model;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn result.done ? undefined : result.value;\n\t}\n\n\t/**\n\t * Reset the main iterator to the beginning of the collection\n\t */\n\tpublic resetIterator(): void {\n\t\tthis.iterator = new CollectionIterator<GenericModel>(this);\n\t}\n\n\t/**\n\t * Find the index of a model in the collection\n\t * @param model The model to find\n\t * @return number The index of the model, or -1 if not found\n\t */\n\tpublic indexOf(model: GenericModel): number {\n\t\t// Implement this method based on how you store models in your collection\n\t\t// This is a placeholder implementation\n\t\treturn this.models.indexOf(model);\n\t}\n\n\t/**\n\t * Used when iterating on the class itself, like\n\t *\n\t * for (const model of collection) { ...\n\t *\n\t * @type Iterator<any>\n\t */\n\t[Symbol.iterator](): any {\n\t\treturn new CollectionIterator<GenericModel>(this, CollectionIterator.ITERATOR_VALUES);\n\t}\n}\n", "export { default as ActiveRecord } from './ActiveRecord.js';\nexport { default as Cache } from './Cache.js';\nexport { default as Collection } from './Collection.js';\nexport { default as Core } from './Core.js';\nexport { default as Dispatcher } from './Dispatcher/Dispatcher.js';\nexport { default as DispatcherEvent } from './Dispatcher/DispatcherEvent.js';\nexport { default as Model } from './Model.js';\nexport { default as Request } from './Http/Request.js';\n\nexport {\n\tIAttributes,\n\tIAxiosConfig,\n\tIAxiosError,\n\tIAxiosResponse,\n\tIAxiosSuccess,\n\tICachedResponse,\n\tICachedResponses,\n\tICollectionChange,\n\tICollectionMeta,\n\tIDispatcher,\n\tIDispatcherCallbackFunction,\n\tIDispatcherEvent,\n\tIDispatchData,\n\tIModelRequestOptions,\n\tIModelRequestQueryParams,\n\tIPagination,\n\tIProgressEvent,\n\tIRequestEvent,\n\tIResponse,\n\tISortOptions,\n} from './Interfaces.js';\n", "/**\n * @class Constants\n * @package Common\n * @project ChalkySticks SDK Core\n */\nexport default {\n\t/**\n\t * Base URL for API calls\n\t *\n\t * @type string\n\t */\n\tAPI_URL: 'https://api.chalkysticks.com/v3',\n\n\t/**\n\t * DEV API URL\n\t *\n\t * @type string\n\t */\n\tAPI_URL_DEV_V1: 'http://localhost:8000/v1',\n\n\t/**\n\t * DEV API URL\n\t *\n\t * @type string\n\t */\n\tAPI_URL_DEV_V2: 'http://localhost:8000/v2',\n\n\t/**\n\t * V1 API URL\n\t *\n\t * @type string\n\t */\n\tAPI_URL_V1: 'https://api.chalkysticks.com/v1',\n\n\t/**\n\t * V2 API URL\n\t *\n\t * @type string\n\t */\n\tAPI_URL_V2: 'https://api.chalkysticks.com/v2',\n\n\t/**\n\t * V3 API URL\n\t *\n\t * @type string\n\t */\n\tAPI_URL_V3: 'https://api.chalkysticks.com/v3',\n\n\t/**\n\t * Date string to use when generating a new Date object\n\t *\n\t * @type string\n\t */\n\tCURRENT_DATE: '',\n\n\t/**\n\t * @type number\n\t */\n\tDEFAULT_COLLECTION_LIMIT: 20,\n\n\t/**\n\t * @type string\n\t */\n\tNOTIFICATION_PREFERENCE: 'native',\n\n\t/**\n\t * @type string\n\t */\n\tSTATIC_URL: 'https://static.chalkysticks.com',\n};\n", "import Constants from './Common/Constants';\n\n/**\n * @class ChalkySticks\n * @project Style Engine Library\n */\nexport default class ChalkySticks {\n\t/**\n\t * Configure library options\n\t *\n\t * @param any options\n\t * @return void\n\t */\n\tpublic static configure(options: any = {}): void {\n\t\tlet key: string;\n\n\t\t// Assign options\n\t\tObject.assign(Constants, options.constants);\n\t}\n}\n", "export * from './Advertisement';\nexport * from './Base';\nexport * from './Media';\nexport * from './Meta';\nexport * from './User';\n", "export * from './Advertisement';\nexport * from './Base';\nexport * from './Geocode';\nexport * from './Media';\nexport * from './Meta';\nexport * from './User';\n", "export { default as Bus } from './Dispatcher';\nexport * from './Dispatcher';\nexport * from './DispatcherEvent';\n", "/**\n * @type type\n */\nexport type TDispatcherData = Record<string, any>;\n\n/**\n * @type type\n */\nexport type TDispatcherCallback<T = any> = (envelope: IDispatcherEvent<T>) => void;\n\n/**\n * @type interface\n */\nexport interface IDispatcherEvent<T = any> {\n\tdata: T;\n\tevent: {\n\t\tname: string;\n\t\ttime: number;\n\t};\n\ttarget: any;\n}\n\n/**\n * This is a class that represents a particular event and\n * has callbacks associated with it. The class can have\n * base-level properties in the envelope, but it is merged\n * with whatever is supplied by .fire();\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Event\n * @project ChalkySticks SDK Core\n */\nexport class DispatcherEvent<T = any> {\n\t/**\n\t * @type Array<TDispatcherCallback<T>>\n\t */\n\tpublic callbacks: TDispatcherCallback<T>[];\n\n\t/**\n\t * @type IDispatcherEvent<T>\n\t */\n\tprotected envelope: IDispatcherEvent<T>;\n\n\t/**\n\t * @type string\n\t */\n\tprotected eventName: string;\n\n\t/**\n\t * @constructor\n\t * @param string eventName\n\t * @param IDispatcherEvent<T> envelope\n\t */\n\tconstructor(eventName: string, envelope?: IDispatcherEvent<T>) {\n\t\tthis.callbacks = [];\n\t\tthis.eventName = eventName;\n\n\t\tif (envelope) {\n\t\t\tthis.envelope = envelope;\n\t\t}\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic clearCallbacks(): void {\n\t\tthis.callbacks = [];\n\t}\n\n\t/**\n\t * @param TDispatcherCallback callback\n\t * @return void\n\t */\n\tpublic registerCallback(callback: TDispatcherCallback<T>): void {\n\t\tthis.callbacks.push(callback);\n\t}\n\n\t/**\n\t * @param TDispatcherCallback callback\n\t * @return void\n\t */\n\tpublic unregisterCallback(callback: TDispatcherCallback<T>): void {\n\t\tconst index = this.callbacks.indexOf(callback);\n\n\t\tif (index > -1) {\n\t\t\tthis.callbacks.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * @param IDispatcherEvent envelope\n\t * @return void\n\t */\n\tpublic fire(envelope: IDispatcherEvent<T>): void {\n\t\tconst callbacks = this.callbacks.slice(0);\n\n\t\tcallbacks.forEach((callback: TDispatcherCallback<T>) => {\n\t\t\tcallback(Object.assign({}, this.envelope, envelope));\n\t\t});\n\t}\n}\n", "import { DispatcherEvent, IDispatcherEvent, TDispatcherCallback, TDispatcherData } from './DispatcherEvent';\n\n/**\n * @interface IDispatcher\n */\nexport interface IDispatcher {\n\tdispatch(eventName: string, data?: TDispatcherData): void;\n\ton(eventName: string, callback: TDispatcherCallback): void;\n\toff(eventName: string, callback?: TDispatcherCallback): void;\n}\n\n/**\n * Dispatcher is a simple event dispatcher that allows for easy event\n * registration and firing.\n *\n * Example Usage:\n *\n * class MyClass extends Event.Dispatcher {\n *     myMethod() {\n *         this.dispatch('myEvent', { foo: 'bar' });\n *     }\n * }\n *\n * const myClass = new MyClass();\n *\n * myClass.on('myEvent', (e) => {\n *    console.log(e.data.foo); // bar\n * });\n *\n * myClass.myMethod();\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Event\n * @project ChalkySticks SDK Core\n */\nexport class Dispatcher {\n\t/**\n\t * @type Record<string, DispatcherEvent<any>>\n\t */\n\tprotected events: Record<string, DispatcherEvent<any>> = {};\n\n\t/**\n\t * Sometimes we might want to explicitly describe the data when\n\t * dispatching like this:\n\t *\n\t * ChalkySticks.Core.Event.Bus.dispatch<CustomType>('custom:event', customData);\n\t *\n\t * and/or\n\t *\n\t * ChalkySticks.Core.Event.Bus.on<GeolocationPosition>('location:change', this.Handle_OnLocationChange);\n\t *\n\t * @param string eventName\n\t * @param TDispatcherData data\n\t * @return void\n\t */\n\tpublic dispatch<T = any>(eventName: string, data?: T): void {\n\t\tconst event = this.events[eventName] as DispatcherEvent<T>;\n\n\t\tif (event) {\n\t\t\tevent.fire({\n\t\t\t\tdata: data as T,\n\t\t\t\tevent: {\n\t\t\t\t\tname: eventName,\n\t\t\t\t\ttime: Date.now(),\n\t\t\t\t},\n\t\t\t\ttarget: this,\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherCallback callback\n\t * @return void\n\t */\n\tpublic on<T = any>(eventName: string, callback: TDispatcherCallback<T>): void {\n\t\tlet event = this.events[eventName] as DispatcherEvent<T>;\n\n\t\t// Create new event, if not exists\n\t\tif (!event) {\n\t\t\tevent = new DispatcherEvent<T>(eventName);\n\t\t\tthis.events[eventName] = event;\n\t\t}\n\n\t\t// Add callback to said event\n\t\tevent.registerCallback(callback);\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherCallback callback\n\t * @return void\n\t */\n\tpublic once<T = any>(eventName: string, callback: TDispatcherCallback<T>): void {\n\t\tconst onceCallback = (envelope: IDispatcherEvent<T>) => {\n\t\t\tcallback(envelope);\n\t\t\tthis.off(eventName, onceCallback);\n\t\t};\n\n\t\tthis.on(eventName, onceCallback);\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherCallback callback\n\t * @return void\n\t */\n\tpublic off<T = any>(eventName: string, callback?: TDispatcherCallback<T>): void {\n\t\tconst event: DispatcherEvent<T> = this.events[eventName] as DispatcherEvent<T>;\n\n\t\t// Clear all if we don't supply a callback\n\t\tif (event && !callback) {\n\t\t\tevent.clearCallbacks();\n\t\t\tdelete this.events[eventName];\n\t\t}\n\n\t\t// Remove specific function\n\t\telse if (event && callback && event.callbacks.indexOf(callback) > -1) {\n\t\t\tevent.unregisterCallback(callback);\n\n\t\t\tif (event.callbacks.length === 0) {\n\t\t\t\tdelete this.events[eventName];\n\t\t\t}\n\t\t}\n\t}\n\n\t// region: Aliases\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherData data\n\t * @return void\n\t */\n\tpublic $emit(eventName: string, data: TDispatcherData = {}): void {\n\t\treturn this.dispatch(eventName, data);\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherData data\n\t * @return void\n\t */\n\tpublic trigger(eventName: string, data: TDispatcherData = {}): void {\n\t\treturn this.dispatch(eventName, data);\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherCallback<T> callback\n\t * @return void\n\t */\n\tpublic $on<T = any>(eventName: string, callback: TDispatcherCallback<T>): void {\n\t\treturn this.on(eventName, callback);\n\t}\n\n\t/**\n\t * @param string eventName\n\t * @param TDispatcherCallback<T> callback\n\t * @return void\n\t */\n\tpublic $off<T = any>(eventName: string, callback: TDispatcherCallback<T>): void {\n\t\treturn this.off(eventName, callback);\n\t}\n\n\t// endregion: Aliases\n}\n\n/**\n * Create a global event bus that can be used\n * throughout the application.\n */\nexport default new Dispatcher();\n", "export { default as Store } from './Store';\n", "/**\n * @class Store\n * @package Provider\n * @project ChalkySticks SDK Core\n */\nexport class Store {\n\t/**\n\t * Reference to Store\n\t *\n\t * @type IStore\n\t */\n\tprivate instance: IStore;\n\n\t/**\n\t * Register a Store instance to the provider\n\t *\n\t * @param IStore store\n\t * @return void\n\t */\n\tpublic get(): IStore {\n\t\tif (!this.instance) {\n\t\t\tthis.register({\n\t\t\t\tactions: {},\n\t\t\t\tcommit: (context: any, payload: any) => {},\n\t\t\t\tdispatch: (context: any, payload: any) => {},\n\t\t\t\tgetters: {},\n\t\t\t\tmutations: {},\n\t\t\t\tstate: {},\n\t\t\t});\n\t\t}\n\n\t\treturn this.instance as IStore;\n\t}\n\n\t/**\n\t * Register a Store instance to the provider\n\t *\n\t * @param IStore store\n\t * @return void\n\t */\n\tpublic register(store: IStore): void {\n\t\tthis.instance = store;\n\t}\n}\n\nexport default new Store();\n", "/**\n * @class Environment\n * @package Common\n * @project ChalkySticks SDK Core\n */\nexport class Environment {\n\t/**\n\t * @type IEnvironmentApplication\n\t */\n\tpublic get app(): any {\n\t\treturn singleton.getVariable('app', {\n\t\t\tapi_url: '',\n\t\t\tlimit: 32,\n\t\t});\n\t}\n\n\t/**\n\t * If our server asks for debug mode\n\t *\n\t * @type boolean\n\t */\n\tpublic get debug(): boolean {\n\t\treturn singleton.getVariable('debug', false);\n\t}\n\n\t/**\n\t * Environment\n\t *\n\t * @type string\n\t */\n\tpublic get env(): string {\n\t\treturn singleton.getVariable('env', 'development');\n\t}\n\n\t/**\n\t * Google Options\n\t *\n\t * @type IEnvironmentGoogle\n\t */\n\tpublic get google(): any {\n\t\treturn singleton.getVariable('google', {\n\t\t\tanalytics: {\n\t\t\t\tid: '',\n\t\t\t},\n\t\t\tapi_key: '',\n\t\t});\n\t}\n\n\t/**\n\t * Unique ID for this class\n\t *\n\t * @type string\n\t */\n\tpublic id: string = Math.random().toString(36).substr(2, 9);\n\n\t/**\n\t * Check environment type\n\t *\n\t * @return boolean\n\t */\n\tpublic isLocal(): boolean {\n\t\treturn singleton.env === 'local' || singleton.env === 'development';\n\t}\n\n\t/**\n\t * Check environment type\n\t *\n\t * @return boolean\n\t */\n\tpublic isProduction(): boolean {\n\t\treturn singleton.env === 'production';\n\t}\n\n\t/**\n\t * Check environment type\n\t *\n\t * @return boolean\n\t */\n\tpublic isStaging(): boolean {\n\t\treturn singleton.env === 'staging';\n\t}\n\n\t/**\n\t * Where we should get defaults from\n\t *\n\t * @return any\n\t */\n\tprivate getVariable(key: string, defaults: any) {\n\t\tconst output = typeof window === 'object' && (window as any)['env'] ? (window as any)['env'][key] : defaults;\n\n\t\treturn output;\n\t}\n}\n\n// Singleton\nconst singleton = new Environment();\nexport default singleton;\n", "import * as Event from '../Event';\nimport * as Provider from '../Provider';\nimport Constants from '../Common/Constants';\nimport Environment from '../Common/Environment';\nimport { IAttributes, IDispatcherEvent, Model } from 'restmc';\n\n/**\n * @class Base\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class Base extends Model {\n\t/**\n\t * @type string\n\t */\n\tpublic baseUrl: string = Environment.app.api_url;\n\n\t/**\n\t * @param object options\n\t */\n\tconstructor(attributes: IAttributes = {}, options: IAttributes = {}) {\n\t\tsuper(attributes, options);\n\n\t\t// Update baseUrl\n\t\tthis.baseUrl = options.baseUrl || this.baseUrl || Environment.app.api_url || Constants.API_URL;\n\n\t\t// Disable withCredentials\n\t\tthis.setOptions({\n\t\t\twithCredentials: false,\n\t\t});\n\n\t\t// Assign token\n\t\tif (options.token) {\n\t\t\tthis.setToken(options.token);\n\t\t} else if (Provider.Store.get()?.state?.token) {\n\t\t\tthis.setToken(Provider.Store.get().state.token);\n\t\t}\n\n\t\t// Attach events\n\t\tthis.attachEvents();\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic attachEvents(): void {\n\t\t// Listen for loading\n\t\tthis.on('requesting', (e: IDispatcherEvent) => {\n\t\t\tconst data: any = { collection: this };\n\t\t\tthis.dispatch('request:loading', data);\n\t\t\tEvent.Bus.dispatch('request:loading', data);\n\t\t});\n\n\t\t// Listen for loaded\n\t\tthis.on('finish', (e: IDispatcherEvent) => {\n\t\t\tconst data: any = { collection: this };\n\t\t\tthis.dispatch('request:loaded', data);\n\t\t\tEvent.Bus.dispatch('request:loaded', data);\n\t\t});\n\n\t\t// Listen for Unauthorized\n\t\tthis.on('error', (e: IDispatcherEvent) => {\n\t\t\tconst status: number = e.detail.request?.status || e.detail.request?.response?.status;\n\t\t\tconst data: any = { model: this };\n\n\t\t\t// Unauthorized\n\t\t\tif (status === 401) {\n\t\t\t\tthis.dispatch('request:unauthorized', data);\n\t\t\t\tEvent.Bus.dispatch('request:unauthorized', data);\n\t\t\t} else if (status === 403) {\n\t\t\t\tthis.dispatch('request:forbidden', data);\n\t\t\t\tEvent.Bus.dispatch('request:forbidden', data);\n\t\t\t} else if (status === 405) {\n\t\t\t\tthis.dispatch('request:not_allowed', data);\n\t\t\t\tEvent.Bus.dispatch('request:not_allowed', data);\n\t\t\t} else if (status === 406) {\n\t\t\t\tthis.dispatch('request:not_acceptable', data);\n\t\t\t\tEvent.Bus.dispatch('request:not_acceptable', data);\n\t\t\t} else if (status === 409) {\n\t\t\t\tthis.dispatch('request:conflict', data);\n\t\t\t\tEvent.Bus.dispatch('request:conflict', data);\n\t\t\t} else if (status === 503) {\n\t\t\t\tthis.dispatch('request:service_unavailable', data);\n\t\t\t\tEvent.Bus.dispatch('request:service_unavailable', data);\n\t\t\t}\n\n\t\t\t// General error\n\t\t\tthis.dispatch('request:error', data);\n\t\t\tEvent.Bus.dispatch('request:error', data);\n\t\t});\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic detachEvents(): void {\n\t\tthis.off('requesting');\n\t\tthis.off('finish');\n\t\tthis.off('error');\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV1(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v1') > 0;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV2(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v2') > 0;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV3(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v3') > 0;\n\t}\n}\n", "import { Base } from './Base';\n\n/**\n * @class Advertisement\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class Advertisement extends Base {\n\t/**\n\t * Endpoint key\n\t * e.g. https://api.chalkysticks.com/v3/ads\n\t *\n\t * @type string\n\t */\n\tpublic endpoint: string = 'ads';\n\n\t/**\n\t * List of fields available\n\t *\n\t * @type string[]\n\t */\n\tpublic fields: string[] = ['caption', 'company', 'image', 'url'];\n\n\t// region: Getters\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @return string\n\t */\n\tpublic getCaption(): string {\n\t\treturn this.attr('caption') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getCompany(): string {\n\t\treturn this.attr('company') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getImage(): string {\n\t\treturn this.attr('image') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getUrl(): string {\n\t\treturn this.attr('url') as string;\n\t}\n\n\t// endregion: Getters\n}\n", "import { Base } from './Base';\n\n/**\n * @class Geocode\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class Geocode extends Base {\n\t// region: Static Methods\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * Search for address\n\t *\n\t * @param string address\n\t * @return Promise<Geocode>\n\t */\n\tpublic static async search(address: string): Promise<Geocode> {\n\t\tconst geocode = new Geocode();\n\t\tawait geocode.fetch({}, { address });\n\t\treturn geocode;\n\t}\n\n\t// endregion: Static Methods\n\n\t/**\n\t * Endpoint key\n\t * e.g. https://api.chalkysticks.com/v1/data/geocode\n\t *\n\t * @type string\n\t */\n\tpublic endpoint: string = 'data/geocode';\n\n\t/**\n\t * List of fields available\n\t *\n\t * @type string[]\n\t */\n\tpublic fields: string[] = ['status', 'results'];\n\n\t// region: Getters\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * Get formatted city and state\n\t *\n\t * @return string\n\t */\n\tpublic getCityAndState(): string {\n\t\tconst addressComponents = this.getAddressComponents();\n\t\tconst city = addressComponents.find((comp) => comp.types.includes('locality'))?.long_name || '';\n\t\tconst state = addressComponents.find((comp) => comp.types.includes('administrative_area_level_1'))?.short_name || '';\n\t\treturn `${city}, ${state}`;\n\t}\n\n\t/**\n\t * Get the country\n\t *\n\t * @return string\n\t */\n\tpublic getCountry(): string {\n\t\tconst addressComponents = this.getAddressComponents();\n\t\treturn addressComponents.find((comp) => comp.types.includes('country'))?.long_name || '';\n\t}\n\n\t/**\n\t * Get fully qualified address\n\t *\n\t * @return string\n\t */\n\tpublic getFullAddress(): string {\n\t\tconst addressComponents = this.getAddressComponents();\n\t\tconst streetNumber = addressComponents.find((comp) => comp.types.includes('street_number'))?.long_name || '';\n\t\tconst route = addressComponents.find((comp) => comp.types.includes('route'))?.long_name || '';\n\t\tconst locality = addressComponents.find((comp) => comp.types.includes('locality'))?.long_name || '';\n\t\tconst administrativeArea = addressComponents.find((comp) => comp.types.includes('administrative_area_level_1'))?.long_name || '';\n\t\tconst country = addressComponents.find((comp) => comp.types.includes('country'))?.long_name || '';\n\t\tconst postalCode = addressComponents.find((comp) => comp.types.includes('postal_code'))?.long_name || '';\n\n\t\treturn `${streetNumber} ${route}, ${locality}, ${administrativeArea}, ${country}, ${postalCode}`.trim().replace(/,\\s*$/, '');\n\t}\n\n\t/**\n\t * Get the location\n\t *\n\t * @return IGeoLocation\n\t */\n\tpublic getLocation(): IGeoLocation {\n\t\tlet latitude = 0;\n\t\tlet longitude = 0;\n\n\t\tif (this.hasResults()) {\n\t\t\tconst results = this.getResults();\n\t\t\tconst location = results[0].geometry.location;\n\n\t\t\tlatitude = location.lat;\n\t\t\tlongitude = location.lng;\n\t\t}\n\n\t\treturn {\n\t\t\tlatitude,\n\t\t\tlongitude,\n\t\t};\n\t}\n\n\t/**\n\t * Google's Geocode API results\n\t *\n\t * @return any\n\t */\n\tpublic getResults(): any {\n\t\treturn this.attr('results') as any;\n\t}\n\n\t/**\n\t * Get short address\n\t *\n\t * @return string\n\t */\n\tpublic getShortAddress(): string {\n\t\tconst addressComponents = this.getAddressComponents();\n\t\tconst streetNumber = addressComponents.find((comp) => comp.types.includes('street_number'))?.short_name || '';\n\t\tconst route = addressComponents.find((comp) => comp.types.includes('route'))?.short_name || '';\n\t\tconst locality = addressComponents.find((comp) => comp.types.includes('locality'))?.short_name || '';\n\t\tconst administrativeArea = addressComponents.find((comp) => comp.types.includes('administrative_area_level_1'))?.short_name || '';\n\t\tconst country = addressComponents.find((comp) => comp.types.includes('country'))?.short_name || '';\n\t\tconst postalCode = addressComponents.find((comp) => comp.types.includes('postal_code'))?.short_name || '';\n\n\t\treturn `${streetNumber} ${route}, ${locality}, ${administrativeArea}, ${country}, ${postalCode}`.trim().replace(/,\\s*$/, '');\n\t}\n\n\t/**\n\t * Google's Geocode API status\n\t *\n\t * @return string\n\t */\n\tpublic getStatus(): string {\n\t\treturn this.attributes.status || '';\n\t}\n\n\t/**\n\t * Check if results are available\n\t *\n\t * @return boolean\n\t */\n\tpublic hasResults(): boolean {\n\t\tconst results = this.getResults();\n\t\treturn results && results[0] && results[0].geometry;\n\t}\n\n\t/**\n\t * Status was successful\n\t *\n\t * @return boolean\n\t */\n\tpublic isOK(): boolean {\n\t\treturn this.getStatus() === 'OK';\n\t}\n\n\t/**\n\t * Get address components\n\t *\n\t * @return google.maps.GeocoderAddressComponent[]\n\t */\n\tprivate getAddressComponents(): google.maps.GeocoderAddressComponent[] {\n\t\treturn this.getResults()[0].address_components;\n\t}\n\n\t// endregion: Getters\n}\n", "import { Base } from './Base';\n\n/**\n * @type interface\n */\ninterface IThumborOptions {\n\tfitIn?: boolean;\n\theight?: number;\n\tsmart?: boolean;\n\twidth?: number;\n\tfilters?: {\n\t\tblur?: number;\n\t\tbrightness?: number;\n\t\tcontrast?: number;\n\t\tformat?: 'webp' | 'jpeg' | 'png';\n\t\tgrayscale?: boolean;\n\t\tquality?: number;\n\t\twatermark?: {\n\t\t\timage: string;\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t\ttransparency?: number;\n\t\t};\n\t};\n}\n\n/**\n * @class Media\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class Media extends Base {\n\t/**\n\t * Endpoint key\n\t * e.g. https://api.chalkysticks.com/v3/media\n\t *\n\t * @type string\n\t */\n\tpublic endpoint: string = 'media';\n\n\t/**\n\t * List of fields available\n\t *\n\t * @type string[]\n\t */\n\tpublic fields: string[] = ['id', 'type', 'url', 'created_at', 'updated_at'];\n\n\t/**\n\t * @type string\n\t */\n\tprotected proxyUrl: string = 'https://d2k0n0ggvekdpx.cloudfront.net';\n\n\t// region: Getters\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * Examples:\n\t *\n\t * \tmedia.getProxiedUrl({ width: 100, height: 100 });\n\t * \tmedia.getProxiedUrl({ width: 100, height: 100, fitIn: true });\n\t * \tmedia.getProxiedUrl({ width: 100, height: 100, smart: true });\n\t * \tmedia.getProxiedUrl({ width: 100, height: 100, filters: { format: 'webp' } });\n\t *\n\t * @param IThumborOptions options\n\t * @return string\n\t */\n\tpublic getProxiedUrl(\n\t\toptions: IThumborOptions = {\n\t\t\twidth: 1024,\n\t\t},\n\t): string {\n\t\tconst parts: string[] = ['unsafe'];\n\t\tconst filters: string[] = [];\n\n\t\t// Automatic webp\n\t\tfilters.push('format(webp)');\n\n\t\t// Handle dimensions\n\t\tif (options.width || options.height) {\n\t\t\tconst dimension = `${options.width || ''}x${options.height || ''}`;\n\n\t\t\tif (options.fitIn) {\n\t\t\t\tparts.push('fit-in');\n\t\t\t}\n\n\t\t\tparts.push(dimension);\n\t\t}\n\n\t\t// Handle smart cropping\n\t\tif (options.smart) {\n\t\t\tparts.push('smart');\n\t\t}\n\n\t\t// Handle filters\n\t\tif (options.filters) {\n\t\t\tif (options.filters.quality) {\n\t\t\t\tfilters.push(`quality(${options.filters.quality})`);\n\t\t\t}\n\n\t\t\tif (options.filters.blur) {\n\t\t\t\tfilters.push(`blur(${options.filters.blur})`);\n\t\t\t}\n\n\t\t\tif (options.filters.brightness) {\n\t\t\t\tfilters.push(`brightness(${options.filters.brightness})`);\n\t\t\t}\n\n\t\t\tif (options.filters.contrast) {\n\t\t\t\tfilters.push(`contrast(${options.filters.contrast})`);\n\t\t\t}\n\n\t\t\tif (options.filters.grayscale) {\n\t\t\t\tfilters.push('grayscale()');\n\t\t\t}\n\n\t\t\tif (options.filters.watermark) {\n\t\t\t\tconst wm = options.filters.watermark;\n\t\t\t\tfilters.push(`watermark(${wm.image},${wm.x},${wm.y},${wm.transparency || 0})`);\n\t\t\t}\n\n\t\t\tif (filters.length > 0) {\n\t\t\t\tparts.push(`filters:${filters.join(':')}`);\n\t\t\t}\n\t\t}\n\n\t\treturn `${this.proxyUrl}/${parts.join('/')}/${this.getUrl()}`;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getType(): string {\n\t\treturn this.attr('type') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getUrl(): string {\n\t\treturn this.attr('url') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getUrlSmall(): string {\n\t\treturn this.getProxiedUrl({ width: 256 });\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getUrlMedium(): string {\n\t\treturn this.getProxiedUrl({ width: 512 });\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getUrlLarge(): string {\n\t\treturn this.getProxiedUrl({ width: 1024 });\n\t}\n\n\t// endregion: Getters\n}\n", "import { Base } from './Base';\n\n/**\n * @class Meta\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class Meta extends Base {\n\t/**\n\t * List of fields available\n\t *\n\t * @type string[]\n\t */\n\tpublic fields: string[] = ['id', 'group', 'key', 'value'];\n\n\t// region: Getters\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @return string\n\t */\n\tpublic getGroup(): string {\n\t\treturn this.attr('group') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getKey(): string {\n\t\treturn this.attr('key') as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tpublic getValue(): string {\n\t\treturn this.attr('value') as string;\n\t}\n\n\t// endregion: Getters\n}\n", "import * as Collection from '../Collection';\nimport * as Model from '.';\nimport { Base } from './Base';\n\n/**\n * @class User\n * @package Model\n * @project ChalkySticks SDK Core\n */\nexport class User extends Base {\n\t/**\n\t * Endpoint key\n\t * e.g. https://api.chalkysticks.com/v3/users\n\t *\n\t * @type string\n\t */\n\tpublic endpoint: string = 'users';\n\n\t/**\n\t * List of fields available\n\t *\n\t * @type string[]\n\t */\n\tpublic fields: string[] = ['id', 'lat', 'lon', 'name', 'phone', 'slug', 'status', 'wallet_balance', 'created_at', 'updated_at'];\n\n\t// region: Relationship\n\t// ---------------------------------------------------------------------------\n\n\tpublic get avatar(): Model.Media {\n\t\treturn (this.media.primary as Model.Media) || new Model.Media();\n\t}\n\n\tpublic get games(): Collection.Meta {\n\t\treturn this.hasMany('games', Collection.Meta);\n\t}\n\n\tpublic get media(): Collection.Media {\n\t\treturn this.hasMany('media', Collection.Media);\n\t}\n\n\tpublic get metadata(): Collection.Meta {\n\t\treturn this.hasMany('meta', Collection.Meta);\n\t}\n\n\t// endregion: Relationship\n\n\t// region: Getters\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * Retrieve User's Latitude\n\t *\n\t * @return number\n\t */\n\tpublic getLatitude(): number {\n\t\treturn parseFloat(this.attr('lat') as string);\n\t}\n\n\t/**\n\t * Retrieve User's Longitude\n\t *\n\t * @return number\n\t */\n\tpublic getLongitude(): number {\n\t\treturn parseFloat(this.attr('lon') as string);\n\t}\n\n\t/**\n\t * Retrieve User's name\n\t *\n\t * @return string\n\t */\n\tpublic getName(): string {\n\t\treturn this.attr('name') as string;\n\t}\n\n\t/**\n\t * Retrieve User's permissions\n\t *\n\t * @return string\n\t */\n\tpublic getPermissions(): number {\n\t\treturn parseFloat(this.attr('permissions') as string);\n\t}\n\n\t/**\n\t * Retrieve User's phone number\n\t *\n\t * @return string\n\t */\n\tpublic getPhone(): string {\n\t\treturn this.attr('phone') as string;\n\t}\n\n\t/**\n\t * Retrieve User's slug\n\t *\n\t * @return string\n\t */\n\tpublic getSlug(): string {\n\t\treturn this.attr('slug') as string;\n\t}\n\n\t/**\n\t * Retrieve User's status\n\t *\n\t * @return string\n\t */\n\tpublic getStatus(): number {\n\t\treturn parseFloat(this.attr('status') as string);\n\t}\n\n\t/**\n\t * Get amount the user has in their wallet\n\t *\n\t * @return number\n\t */\n\tpublic getWalletBalance(): number {\n\t\treturn parseFloat(this.attr('wallet_balance') as string);\n\t}\n\n\t// endregion: Getters\n}\n", "import * as Event from '../Event';\nimport * as Provider from '../Provider';\nimport Constants from '../Common/Constants';\nimport Environment from '../Common/Environment';\nimport { Collection, IDispatcherEvent, Model } from 'restmc';\n\n/**\n * @class CollectionBase\n * @package Collection\n * @project ChalkySticks SDK Core\n */\nexport class Base<T extends Model> extends Collection<T> {\n\t/**\n\t * @type any\n\t */\n\tpublic declare model: any;\n\n\t/**\n\t * @type string\n\t */\n\tpublic baseUrl: string = Environment.app.api_url;\n\n\t/**\n\t * @type number\n\t */\n\tpublic limit: number = Environment.app.limit;\n\n\t/**\n\t * @param object options\n\t */\n\tconstructor(options: any = {}) {\n\t\tsuper(options);\n\n\t\t// Update baseUrl\n\t\tthis.baseUrl = options.baseUrl || this.baseUrl || Environment.app.api_url || Constants.API_URL;\n\n\t\t// Disable withCredentials\n\t\tthis.setOptions({\n\t\t\twithCredentials: false,\n\t\t});\n\n\t\t// Limits\n\t\tthis.limit = options.limit || this.limit;\n\t\tthis.page = options.page || this.page;\n\n\t\t// Build\n\t\tthis.builder.qp('limit', this.limit);\n\t\tthis.builder.qp('page', this.page);\n\n\t\t// Assign token\n\t\tif (options.token) {\n\t\t\tthis.setToken(options.token);\n\t\t} else if (Provider.Store.get()?.state?.token) {\n\t\t\tthis.setToken(Provider.Store.get().state.token);\n\t\t}\n\n\t\t// Attach\n\t\tthis.attachEvents();\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic attachEvents(): void {\n\t\tthis.on('add:before', (e: IDispatcherEvent) => {\n\t\t\te.detail.model.baseUrl = this.baseUrl;\n\t\t});\n\n\t\t// Listen for loading\n\t\tthis.on('requesting', (e: IDispatcherEvent) => {\n\t\t\tconst data: any = { collection: this };\n\t\t\tthis.dispatch('request:loading', data);\n\t\t\tEvent.Bus.dispatch('request:loading', data);\n\t\t});\n\n\t\t// Listen for loaded\n\t\tthis.on('finish', (e: IDispatcherEvent) => {\n\t\t\tconst data: any = { collection: this };\n\t\t\tthis.dispatch('request:loaded', data);\n\t\t\tEvent.Bus.dispatch('request:loaded', data);\n\t\t});\n\n\t\t// Listen for Unauthorized\n\t\tthis.on('error', (e: IDispatcherEvent) => {\n\t\t\tconst status: number = e.detail.request?.status || e.detail.request?.response?.status;\n\t\t\tconst data: any = { collection: this };\n\n\t\t\t// Unauthorized\n\t\t\tif (status === 401) {\n\t\t\t\tthis.dispatch('request:unauthorized', data);\n\t\t\t\tEvent.Bus.dispatch('request:unauthorized', data);\n\t\t\t} else if (status === 403) {\n\t\t\t\tthis.dispatch('request:forbidden', data);\n\t\t\t\tEvent.Bus.dispatch('request:forbidden', data);\n\t\t\t} else if (status === 405) {\n\t\t\t\tthis.dispatch('request:not_allowed', data);\n\t\t\t\tEvent.Bus.dispatch('request:not_allowed', data);\n\t\t\t} else if (status === 406) {\n\t\t\t\tthis.dispatch('request:not_acceptable', data);\n\t\t\t\tEvent.Bus.dispatch('request:not_acceptable', data);\n\t\t\t} else if (status === 409) {\n\t\t\t\tthis.dispatch('request:conflict', data);\n\t\t\t\tEvent.Bus.dispatch('request:conflict', data);\n\t\t\t} else if (status === 503) {\n\t\t\t\tthis.dispatch('request:service_unavailable', data);\n\t\t\t\tEvent.Bus.dispatch('request:service_unavailable', data);\n\t\t\t}\n\n\t\t\t// General error\n\t\t\tthis.dispatch('request:error', data);\n\t\t\tEvent.Bus.dispatch('request:error', data);\n\t\t});\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic detachEvents(): void {\n\t\tthis.off('requesting');\n\t\tthis.off('finish');\n\t\tthis.off('error');\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV1(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v1') > 0;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV2(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v2') > 0;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic isV3(): boolean {\n\t\treturn this.baseUrl.toLowerCase().indexOf('/v3') > 0;\n\t}\n}\n", "import * as Model from '../Model';\nimport { Base } from './Base';\n\n/**\n * @class Advertisement\n * @package Collection\n * @project ChalkySticks SDK Core\n */\nexport class Advertisement extends Base<Model.Advertisement> {\n\t/**\n\t * @type Model.Advertisement\n\t */\n\tpublic model: Model.Advertisement = new Model.Advertisement();\n}\n", "import * as Model from '../Model';\nimport { Base } from './Base';\n\n/**\n * @class Media\n * @package Collection\n * @project ChalkySticks SDK Core\n */\nexport class Media extends Base<Model.Media> {\n\t/**\n\t * @type Model.Media\n\t */\n\tpublic model: Model.Media = new Model.Media();\n\n\t/**\n\t * @return Model.Media[]\n\t */\n\tpublic get images(): Model.Media[] {\n\t\treturn this.models.filter((media) => media.getType() === 'image');\n\t}\n\n\t/**\n\t * @return Model.Media | undefined\n\t */\n\tpublic get primary(): Model.Media | undefined {\n\t\treturn this.models.at(0);\n\t}\n\n\t/**\n\t * @return Model.Media[]\n\t */\n\tpublic get videos(): Model.Media[] {\n\t\treturn this.models.filter((media) => media.getType() === 'video');\n\t}\n}\n", "import * as Model from '../Model';\nimport { Base } from './Base';\n\n/**\n * @class Meta\n * @package Collection\n * @project ChalkySticks SDK Core\n */\nexport class Meta extends Base<Model.Meta> {\n\t/**\n\t * @type Model.Meta\n\t */\n\tpublic model: Model.Meta = new Model.Meta();\n\n\t/**\n\t * @param string key\n\t * @return Model.Meta[]\n\t */\n\tpublic getByKey(key: string): Model.Meta[] {\n\t\treturn this.models.filter((meta) => meta.getKey() === key);\n\t}\n\n\t/**\n\t * @param string group\n\t * @return Model.Meta[]\n\t */\n\tpublic getByGroup(group: string): Model.Meta[] {\n\t\treturn this.models.filter((meta) => meta.getGroup() === group);\n\t}\n\n\t/**\n\t * @return string[]\n\t */\n\tpublic getKeys(): string[] {\n\t\treturn this.models.map((meta) => meta.getKey());\n\t}\n\n\t/**\n\t * @return string[]\n\t */\n\tpublic getValues(): string[] {\n\t\treturn this.models.map((meta) => meta.getValue());\n\t}\n\n\t/**\n\t * @return string[]\n\t */\n\tpublic getValuesByKey(key: string): string[] {\n\t\treturn this.getByKey(key).map((meta: Model.Meta) => meta.getValue());\n\t}\n\n\t/**\n\t * @return string[]\n\t */\n\tpublic getValuesByGroup(group: string): string[] {\n\t\treturn this.getByGroup(group).map((meta: Model.Meta) => meta.getValue());\n\t}\n}\n", "import * as Model from '../Model';\nimport { Base } from './Base';\n\n/**\n * @class User\n * @package Collection\n * @project ChalkySticks SDK Core\n */\nexport class User extends Base<Model.User> {\n\t/**\n\t * @type Model.User\n\t */\n\tpublic model: Model.User = new Model.User();\n}\n", "export * from './ConnectionRefused';\nexport * from './Geolocation';\nexport * from './InvalidInput';\nexport * from './InvalidRenderer';\nexport * from './InvalidStorageProvider';\nexport * from './NotImplemented';\nexport * from './ParserFailure';\nexport * from './Unauthorized';\n", "/**\n * @class ConnectionRefused\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class ConnectionRefused extends Error {}\n", "/**\n * @class Geolocation\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class Geolocation extends Error {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = 'GeolocationError';\n\t}\n}\n", "/**\n * @class InvalidInput\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class InvalidInput extends Error {}\n", "/**\n * @class InvalidRenderer\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class InvalidRenderer extends Error {}\n", "/**\n * @class InvalidStorageProvider\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class InvalidStorageProvider extends Error {}\n", "/**\n * @class NotImplemented\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class NotImplemented extends Error {}\n", "/**\n * @class ParserFailure\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class ParserFailure extends Error {}\n", "/**\n * @class Unauthorized\n * @package Exception\n * @project ChalkySticks SDK Core\n */\nexport class Unauthorized extends Error {}\n", "export * as Advertisement from './Advertisement';\nexport * as Geocode from './Geocode';\n", "import * as Collection from '../Collection';\nimport * as Model from '../Model';\nimport Constants from '../Common/Constants';\n\n/**\n * @param Record<string, any> options\n * @return Model.Advertisement\n */\nexport function model(options: Record<string, any> = {}): Model.Advertisement {\n\treturn new Model.Advertisement(\n\t\tundefined,\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\tbaseUrl: Constants.API_URL_V1,\n\t\t\t},\n\t\t\toptions,\n\t\t),\n\t);\n}\n\n/**\n * @param Record<string, any> options\n * @return Collection.Advertisement\n */\nexport function collection(options: Record<string, any> = {}): Collection.Advertisement {\n\tconst collection = new Collection.Advertisement(\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\tbaseUrl: Constants.API_URL_V1,\n\t\t\t},\n\t\t\toptions,\n\t\t),\n\t);\n\n\treturn collection;\n}\n", "import * as Model from '../Model';\nimport Constants from '../Common/Constants';\n\n/**\n * @param Record<string, any> options\n * @return Model.Geocode\n */\nexport function model(options: Record<string, any> = {}): Model.Geocode {\n\treturn new Model.Geocode(\n\t\tundefined,\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\tbaseUrl: Constants.API_URL_V1,\n\t\t\t},\n\t\t\toptions,\n\t\t),\n\t);\n}\n", "export * from './Keyboard.js';\nexport * from './Keyboard/Shortcut.js';\nexport * from './Pointer.js';\nexport * from './Sensor.js';\nexport * from './Video.js';\n", "import { Event } from '../../index.js';\n\n/**\n * @type Func\n */\ntype TShortcutCallback = () => void;\n\n/**\n * @type interface\n */\nexport interface IShortcutOptions {\n\tignoreInputs?: boolean;\n}\n\n/**\n * Shortcut is a class that allows you to register keyboard shortcuts\n * and fire callbacks when they're pressed.\n *\n * Example Usage:\n *\n * \t\tShortcut.add('a', () => {\n * \t\t\tconsole.log('A was pressed');\n * \t\t});\n *\n * \t\tShortcut.add('cmd+a', () => {\n * \t\t\tconsole.log('Command + A was pressed');\n * \t\t});\n *\n * Notes:\n *\n * \tThere are still some issues with the keyup removal. If we press\n *  enough meta keys, we'll get stuck in a state where some are not\n *  removed.\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Input/Keyboard\n * @project ChalkySticks SDK Core\n */\nexport class Shortcut extends Event.Dispatcher {\n\t/**\n\t * @param string key\n\t * @param Function callback\n\t * @return void\n\t */\n\tpublic static add(key: string, callback: TShortcutCallback): void {\n\t\tshortcutSingleton.add(key, callback);\n\t}\n\n\t/**\n\t * @type Record<string, TShortcutCallback>\n\t */\n\tprotected keymap: Record<string, TShortcutCallback> = {};\n\n\t/**\n\t * @type boolean\n\t */\n\tprivate attached: boolean = false;\n\n\t/**\n\t * @type Record<string, boolean>\n\t */\n\tprivate keysDown: Record<string, boolean> = {};\n\n\t/**\n\t * @type IShortcutOptions\n\t */\n\tprivate options: IShortcutOptions = {\n\t\tignoreInputs: true,\n\t};\n\n\t/**\n\t * @param IShortcutOptions options\n\t * @constructor\n\t */\n\tconstructor(options: IShortcutOptions = {}) {\n\t\tsuper();\n\n\t\t// Setup options\n\t\tObject.assign(this.options, options || {});\n\t}\n\n\t/**\n\t * @param string key\n\t * @param Function callback\n\t * @return void\n\t */\n\tpublic add(key: string, callback: TShortcutCallback): void {\n\t\t// Ensure we're setup\n\t\tthis.ensureSetup();\n\n\t\t// Add keymap to map\n\t\tthis.keymap[key] = callback;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return void\n\t */\n\tpublic remove(key: string): void {\n\t\tdelete this.keymap[key];\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tprotected ensureSetup(): void {\n\t\t// Prevent multiple setups\n\t\tif (this.attached) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set attached\n\t\tthis.attached = true;\n\n\t\t// Add event listener\n\t\tdocument.addEventListener('keydown', this.Handle_OnKeyDown.bind(this));\n\t\tdocument.addEventListener('keyup', this.Handle_OnKeyUp.bind(this));\n\t}\n\n\t/**\n\t * @return string | undefined\n\t */\n\tprotected findMatch(): string | undefined {\n\t\tlet keys: string[] = Object.keys(this.keymap);\n\n\t\t// Sort longest combinations to shortest\n\t\tkeys = keys.sort((a: string, b: string) => {\n\t\t\treturn (b.match(/\\+/g)?.length || 0) - (a.match(/\\+/g)?.length || 0);\n\t\t});\n\n\t\t// Find key combinations that match keyDown\n\t\treturn keys.find((key: string) => {\n\t\t\tconst parsed: string[] = key.replace(/\\s+/g, '').toLowerCase().split('+');\n\n\t\t\t// Ensure all keys are down\n\t\t\treturn parsed.every((key: string) => {\n\t\t\t\treturn this.keysDown[key.toLowerCase()];\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * @param string key\n\t * @return string\n\t */\n\tprotected normalize(key: string): string {\n\t\treturn key\n\t\t\t.toLowerCase()\n\t\t\t.trim()\n\t\t\t.normalize('NFD')\n\t\t\t.replace(/[\\u0300-\\u036f]/g, '')\n\t\t\t.replace('arrow', '');\n\t}\n\n\t// region: Event Handlers\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @param KeyboardEvent e\n\t * @return void\n\t */\n\tprotected Handle_OnKeyDown(e: KeyboardEvent): void {\n\t\tconst currentTarget: HTMLElement = e.target as HTMLElement;\n\n\t\t// mk: This happens when a user taps the autofill selections\n\t\tif (!(e instanceof KeyboardEvent)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If ignore inputs is enabled\n\t\tif (this.options.ignoreInputs) {\n\t\t\t// Ensure target is not an input\n\t\t\tif (currentTarget.tagName === 'INPUT' || currentTarget.tagName === 'TEXTAREA') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Get key (normalize for accents)\n\t\tconst key: string = this.normalize(e.key);\n\n\t\t// Mark key down\n\t\tthis.keysDown[key] = true;\n\n\t\t// Special keys (alt, control, meta, shift)\n\t\tconst match: string = this.findMatch() || '';\n\n\t\t// Get callback\n\t\tconst callback: TShortcutCallback | undefined = this.keymap[match];\n\n\t\t// Ensure callback\n\t\tif (!callback) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If found, prevent default\n\t\t// I don't know if we should be making this decision\n\t\t// e.preventDefault();\n\n\t\t// Trigger event\n\t\tthis.trigger('shortcut:found', { match });\n\n\t\t// Call callback\n\t\tcallback();\n\t}\n\n\t/**\n\t * @param KeyboardEvent e\n\t * @return void\n\t */\n\tprotected Handle_OnKeyUp(e: KeyboardEvent): void {\n\t\t// mk: This happens when a user taps the autofill selections\n\t\tif (!(e instanceof KeyboardEvent)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get key\n\t\tconst key: string = this.normalize(e.key);\n\n\t\t// Set key down\n\t\tdelete this.keysDown[key];\n\t}\n\n\t// endregion: Event Handlers\n}\n\n/**\n * Shortcut Sequencer is a class that allows you to register\n * a sequence of keyboard shortcuts and fire callbacks when\n * they're pressed.\n *\n * Example Usage:\n *\n * \t\tShortcutSequencer.add(['a', 'b', 'c', 'd'], () => {\n * \t\t\tconsole.log('A, B, C, then D was pressed');\n * \t\t});\n *\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @project ChalkySticks SDK Core\n */\nexport class ShortcutSequencer extends Event.Dispatcher {\n\t/**\n\t * @param string[] keys\n\t * @param Function callback\n\t * @return void\n\t */\n\tpublic static add(keys: string[], callback: TShortcutCallback): void {\n\t\tshortcutSequencerSingleton.add(keys, callback);\n\t}\n\n\t/**\n\t * @param string[] keys\n\t * @return void\n\t */\n\tpublic static remove(keys: string[]): void {\n\t\tshortcutSequencerSingleton.remove(keys);\n\t}\n\n\t/**\n\t * Global instance\n\t *\n\t * @type ShortcutSequencer\n\t */\n\tpublic static get instance(): ShortcutSequencer {\n\t\treturn new ShortcutSequencer();\n\t}\n\n\t/**\n\t * @type string[]\n\t */\n\tprotected matches: string[] = [];\n\n\t/**\n\t * @type Record<string, TShortcutCallback>\n\t */\n\tprotected sequences: Record<string, TShortcutCallback> = {};\n\n\t/**\n\t * @type Shortcut\n\t */\n\tprotected shortcut: Shortcut = new Shortcut();\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\t// Event Listeners\n\t\tthis.shortcut.on('shortcut:found', this.Handle_OnShortcutFound.bind(this));\n\t}\n\n\t/**\n\t * @param string[] keys\n\t * @param Function callback\n\t * @return void\n\t */\n\tpublic add(keys: string[], callback: TShortcutCallback): void {\n\t\tconst key: string = keys.join(',');\n\n\t\t// Add keys to shortcut\n\t\tkeys.forEach((key: string) => {\n\t\t\tthis.shortcut.add(key, () => {});\n\t\t});\n\n\t\t// Add keymap to map\n\t\tthis.sequences[key] = callback;\n\t}\n\n\t/**\n\t * @param string[] keys\n\t * @return void\n\t */\n\tpublic remove(keys: string[]): void {\n\t\tconst key: string = keys.join(',');\n\n\t\t// Remove keys from shortcut\n\t\tkeys.forEach((key: string) => {\n\t\t\tthis.shortcut.remove(key);\n\t\t});\n\n\t\t// Remove keymap from map\n\t\tdelete this.sequences[key];\n\t}\n\n\t// region: Event Handlers\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @param IDispatcherEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnShortcutFound(e: any): Promise<void> {\n\t\tconst match: string = e.data.match;\n\n\t\t// Add match to list\n\t\tthis.matches.push(match);\n\n\t\t// Prune list to only 20 items\n\t\tthis.matches = this.matches.slice(-20);\n\n\t\t// Find matching sequence\n\t\tconst sequence: string | undefined = Object.keys(this.sequences).find((sequence: string) => {\n\t\t\tconst keys: string[] = sequence.split(',');\n\t\t\tconst matches: string[] = this.matches.slice(-keys.length);\n\n\t\t\t// Ensure all keys are down\n\t\t\treturn (\n\t\t\t\tmatches.length >= keys.length &&\n\t\t\t\tmatches.every((match: string, index: number) => {\n\t\t\t\t\treturn match === keys[index];\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\t// Ensure sequence\n\t\tif (!sequence) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get callback\n\t\tconst callback: TShortcutCallback | undefined = this.sequences[sequence];\n\n\t\t// Ensure callback\n\t\tif (!callback) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Call callback\n\t\tcallback();\n\t}\n\n\t// endregion: Event Handlers\n}\n\nconst shortcutSingleton = new Shortcut({\n\tignoreInputs: true,\n});\n\nconst shortcutSequencerSingleton = new ShortcutSequencer();\n", "import { Event } from '../index.js';\nimport { Shortcut } from './Keyboard/Shortcut.js';\n\n/**\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Input\n * @project ChalkySticks SDK Core\n */\nexport class Keyboard extends Event.Dispatcher {\n\t/**\n\t * @type Shortcut\n\t */\n\tprotected shortcut: Shortcut = new Shortcut({\n\t\tignoreInputs: true,\n\t});\n}\n\n// Singleton\nexport default new Keyboard();\n", "import { Event, Utility } from '../index.js';\n\n/**\n * @interface IPointerEvent\n */\nexport interface IPointerEvent {\n\tx: number;\n\ty: number;\n}\n\n/**\n * This is specifically because of IESafari\n * @see https://stackoverflow.com/questions/58473921/why-cant-i-use-touchevent-in-safari\n */\nexport type AppTouchEvent = TouchEvent;\n\n/**\n * @type interface\n */\nexport interface IPointerZoomEvent {\n\tdelta: number;\n\tdirection: string;\n\tisTrackpad: boolean;\n\ttype: 'pinch' | 'wheel';\n}\n\n/**\n * @type interface\n */\nexport interface IPointerDragEvent {\n\tangle: number;\n\tchanged: boolean;\n\tdistance: number;\n\tdx: number;\n\tdy: number;\n\tinertia: number;\n\tmoved: boolean;\n\tox: number;\n\toy: number;\n\trx: number;\n\try: number;\n\trx2: number;\n\try2: number;\n\ttime: number;\n\ttimeDown: number;\n\ttimeDownDifference: number;\n\ttimeDifference: number;\n\tvx: number;\n\tvy: number;\n\tx: number;\n\ty: number;\n}\n\n/**\n * @type interface\n */\nexport interface IPointerSwipeOptions {\n\tdistanceThreshold?: number;\n\ttimeThreshold?: number;\n\tvelocityThreshold?: number;\n}\n\n/**\n * @interface ISwipeEvent\n */\nexport interface ISwipeEvent {\n\tdirection: 'left' | 'right' | 'up' | 'down';\n\tdistance: number;\n\tduration: number;\n\tvelocity: number;\n}\n\n/**\n * Pointer is a singleton class that handles all pointer/touch events\n * and dispatches them to the appropriate targets.\n *\n * Example Usage:\n *\n * \timport Pointer from '@/Input/Pointer';\n *\n * \tconst pointer = new Pointer();\n\n * \tpointer.on('down', ({ data }) => {\n * \t\tconsole.log('Down!', data);\n * \t});\n *\n * \tpointer.on('drag', ({ data }) => {\n * \t\tconsole.log('Drag', data);\n * \t});\n *\n * \tpointer.on('move', ({ data }) => {\n * \t\tconsole.log('Move!', data);\n * \t});\n *\n * \tpointer.on('up', ({ data }) => {\n * \t\tconsole.log('Up!', data);\n * \t});\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Input\n * @project ChalkySticks SDK Core\n */\nexport class Pointer extends Event.Dispatcher {\n\t// region: Static\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @type Pointer\n\t */\n\tpublic static instance: Pointer;\n\n\t/**\n\t * @param string eventType\n\t * @param boolean autoTouchEvents\n\t * @return void\n\t */\n\tpublic static start(eventType: string = 'pointer', autoTouchEvents: boolean = false): void {\n\t\tif (!this.instance) {\n\t\t\tthis.instance = new Pointer(eventType, autoTouchEvents);\n\t\t}\n\t}\n\n\t// endregion: Static\n\n\t// region: Instance\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * Our active target\n\t *\n\t * @type HTMLElement\n\t */\n\tpublic activeTarget: HTMLElement;\n\n\t/**\n\t * Our active target\n\t *\n\t * @type HTMLElement\n\t */\n\tpublic currentTarget: HTMLElement;\n\n\t/**\n\t * Angle from origin\n\t *\n\t * @type number\n\t */\n\tpublic angle: number = 0;\n\n\t/**\n\t * If values have changed (usually velocity)\n\t *\n\t * @type boolean\n\t */\n\tpublic changed: boolean = false;\n\n\t/**\n\t * Distance from origin\n\t *\n\t * @type number\n\t */\n\tpublic distance: number = 0;\n\n\t/**\n\t * If we're pressing\n\t *\n\t * @type boolean\n\t */\n\tpublic down: boolean = false;\n\n\t/**\n\t * Difference X\n\t *\n\t * @type number\n\t */\n\tpublic dx: number = 0;\n\n\t/**\n\t * Difference Y\n\t *\n\t * @type number\n\t */\n\tpublic dy: number = 0;\n\n\t/**\n\t * The higher the number, the slower it stops\n\t *\n\t * @type number\n\t */\n\tpublic friction: number = 0.95;\n\n\t/**\n\t * Inertia\n\t *\n\t * @type number\n\t */\n\tpublic inertia: number = 0;\n\n\t/**\n\t * Last X\n\t *\n\t * @type number\n\t */\n\tpublic lastX: number = 0;\n\n\t/**\n\t * Last Y\n\t *\n\t * @type number\n\t */\n\tpublic lastY: number = 0;\n\n\t/**\n\t * If mouse moved since being down\n\t *\n\t * @type boolean\n\t */\n\tpublic moved: boolean = false;\n\n\t/**\n\t * Relative X\n\t *\n\t * @type number\n\t */\n\tpublic rx: number = 0;\n\n\t/**\n\t * Relative X with velocity\n\t *\n\t * @type number\n\t */\n\tpublic rx2: number = 0;\n\n\t/**\n\t * Relative Y\n\t *\n\t * @type number\n\t */\n\tpublic ry: number = 0;\n\n\t/**\n\t * Relative Y with velocity\n\t *\n\t * @type number\n\t */\n\tpublic ry2: number = 0;\n\n\t/**\n\t * Relative Origin Y\n\t *\n\t * @type number\n\t */\n\tpublic rox: number = 0;\n\tpublic roy: number = 0;\n\tpublic rox2: number = 0;\n\tpublic roy2: number = 0;\n\n\t/**\n\t * Origin X\n\t *\n\t * @type number\n\t */\n\tpublic ox: number = 0;\n\n\t/**\n\t * Origin Y\n\t *\n\t * @type number\n\t */\n\tpublic oy: number = 0;\n\n\t/**\n\t * Our hover target\n\t *\n\t * @type HTMLElement\n\t */\n\tpublic target!: HTMLElement | Document;\n\n\t/**\n\t * Time\n\t * @type number\n\t */\n\tpublic time: number = Date.now();\n\n\t/**\n\t * Time pointer was down\n\t * @type number\n\t */\n\tpublic timeDown: number = 0;\n\n\t/**\n\t * Difference from time down\n\t * @type number\n\t */\n\tpublic timeDownDifference: number = 0;\n\n\t/**\n\t * Time difference\n\t * @type number\n\t */\n\tpublic timeDifference: number = 0;\n\n\t/**\n\t * Current amount of touches on screen\n\t *\n\t * @type number\n\t */\n\tpublic touches: number = 0;\n\n\t/**\n\t * Velocity X\n\t *\n\t * @type number\n\t */\n\tpublic vx: number = 0;\n\n\t/**\n\t * Velocity Y\n\t *\n\t * @type number\n\t */\n\tpublic vy: number = 0;\n\n\t/**\n\t * Current X\n\t *\n\t * @type number\n\t */\n\tpublic x: number = 0;\n\n\t/**\n\t * X with inertia applied\n\t *\n\t * @type number\n\t */\n\tpublic x2: number = 0;\n\n\t/**\n\t * Current Y\n\t *\n\t * @type number\n\t */\n\tpublic y: number = 0;\n\n\t/**\n\t * Y with inertia applied\n\t *\n\t * @type number\n\t */\n\tpublic y2: number = 0;\n\n\t/**\n\t * If wheel is scrolling\n\t *\n\t * @type boolean\n\t */\n\tpublic wheel: boolean = false;\n\n\t/**\n\t * Wheel delta\n\t *\n\t * @type number\n\t */\n\tpublic wheelDelta: number = 0;\n\n\t/**\n\t * @type boolean\n\t */\n\tprotected autoTouchEvents: boolean;\n\n\t/**\n\t * Pixels to move before considering it an actual move\n\t *\n\t * @type number\n\t */\n\tprotected moveThreshold: number = 5;\n\n\t/**\n\t * @type string\n\t */\n\tprivate cid: string = Math.random().toString(36).substr(2, 9);\n\n\t/**\n\t * @type string\n\t */\n\tprivate eventType: string = '';\n\n\t/**\n\t * @type number\n\t */\n\tprivate holdTimeout: number | null = null;\n\n\t/**\n\t * @type number\n\t */\n\tprivate initialPinchDistance: number = 0;\n\n\t/**\n\t * @type number\n\t */\n\tprivate lastPinchDistance: number = 0;\n\n\t/**\n\t * @type number\n\t */\n\tprivate lastTapTime: number = 0;\n\n\t/**\n\t * Minimum distance for a swipe (px)\n\t *\n\t * @type number\n\t */\n\tprotected swipeThreshold: number = 50;\n\n\t/**\n\t * Maximum time for a swipe (ms)\n\t *\n\t * @type number\n\t */\n\tprotected swipeTimeThreshold: number = 300;\n\n\t/**\n\t * Minimum velocity for a swipe\n\t *\n\t * @type number\n\t */\n\tprotected swipeVelocityThreshold: number = 0.3;\n\n\t/**\n\t * @type number\n\t */\n\tprivate tapCount: number = 0;\n\n\t/**\n\t * @type number\n\t */\n\tprivate tapTimeout: number | null = null;\n\n\t/**\n\t * @type number\n\t */\n\tprivate twoFingerTapCount: number = 0;\n\n\t/**\n\t * @type number[]\n\t */\n\tprivate vxHistory: number[] = [];\n\n\t/**\n\t * @type number[]\n\t */\n\tprivate vyHistory: number[] = [];\n\n\t/**\n\t * @param string eventType\n\t * @param boolean autoTouchEvents\n\t * @param HTMLElement target\n\t * @constructor\n\t */\n\tconstructor(eventType: string = 'pointer', autoTouchEvents: boolean = false, target: HTMLElement | Document = document) {\n\t\tsuper();\n\n\t\t// Bindings\n\t\tthis.Handle_OnInterval = this.Handle_OnInterval.bind(this);\n\t\tthis.Handle_OnPointerDown = this.Handle_OnPointerDown.bind(this);\n\t\tthis.Handle_OnPointerMove = this.Handle_OnPointerMove.bind(this);\n\t\tthis.Handle_OnPointerUp = this.Handle_OnPointerUp.bind(this);\n\t\tthis.Handle_OnWheel = this.Handle_OnWheel.bind(this);\n\n\t\t// Set event type\n\t\tthis.autoTouchEvents = autoTouchEvents;\n\t\tthis.eventType = eventType;\n\n\t\t// Set the target\n\t\tthis.target = target;\n\n\t\t// Attach\n\t\tthis.attachEvents();\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic attachEvents(): void {\n\t\t// Event handlers\n\t\tif (typeof window !== 'undefined' && 'ontouchstart' in window && this.autoTouchEvents) {\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener('touchstart', this.Handle_OnPointerDown);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener('touchmove', this.Handle_OnPointerMove);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener('touchend', this.Handle_OnPointerUp);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener(this.downEvent, this.Handle_OnPointerDown);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener(this.moveEvent, this.Handle_OnPointerMove);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.addEventListener(this.upEvent, this.Handle_OnPointerUp);\n\t\t}\n\n\t\t// Wheel\n\t\t// @ts-ignore\n\t\tthis.target.addEventListener('wheel', this.Handle_OnWheel, {\n\t\t\tpassive: false,\n\t\t});\n\n\t\t// Log attachments\n\t\t// console.log(`Pointer: Attached to ${this.downEvent}, ${this.moveEvent}, ${this.upEvent}`);\n\n\t\t// Use interval to update velocity\n\t\tUtility.Interval.add(this.Handle_OnInterval, 1000 / 60, `${this.cid}-pointer-velocity`);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic detachEvents(): void {\n\t\t// Event handlers\n\t\tif (typeof window !== 'undefined' && 'ontouchstart' in window && this.autoTouchEvents) {\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener('touchstart', this.Handle_OnPointerDown);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener('touchmove', this.Handle_OnPointerMove);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener('touchend', this.Handle_OnPointerUp);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener(this.downEvent, this.Handle_OnPointerDown);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener(this.moveEvent, this.Handle_OnPointerMove);\n\t\t\t// @ts-ignore\n\t\t\tthis.target.removeEventListener(this.upEvent, this.Handle_OnPointerUp);\n\t\t}\n\n\t\t// Wheel\n\t\t// @ts-ignore\n\t\tthis.target.removeEventListener('wheel', this.Handle_OnWheel);\n\n\t\t// Use interval to update velocity\n\t\tUtility.Interval.remove(`${this.cid}-pointer-velocity`);\n\t}\n\n\t/**\n\t * @param boolean disableTouchMove\n\t * @param boolean disableTouchEnd\n\t * @param boolean disableContextMenu\n\t * @return void\n\t */\n\tpublic applyForMobile(disableTouchMove: boolean = true, disableTouchEnd: boolean = true, disableContextMenu: boolean = true): void {\n\t\t// Disable overscroll on html,body\n\t\tdocument.body.style.overscrollBehavior = 'none';\n\n\t\t// Globally disable user select\n\t\tdocument.body.style.userSelect = 'none';\n\n\t\t// Disable touch move on document\n\t\tdisableTouchMove &&\n\t\t\tdocument.addEventListener(\n\t\t\t\t'touchmove',\n\t\t\t\tfunction (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t},\n\t\t\t\t{ passive: false },\n\t\t\t);\n\n\t\t// Disable double tap zoom on iOS\n\t\tdisableTouchEnd &&\n\t\t\tdocument.addEventListener(\n\t\t\t\t'touchend',\n\t\t\t\tfunction (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t);\n\n\t\t// Disable context menu\n\t\tdisableContextMenu &&\n\t\t\tdocument.addEventListener('contextmenu', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t}\n\n\t/**\n\t * The purpose is to capture and prevent the default pinch-zoom\n\t * behavior on the webpage.\n\t *\n\t * @param boolean capture\n\t * @return void\n\t */\n\tpublic capturePinchZoom(capture: boolean): void {\n\t\tdocument.addEventListener(\n\t\t\t'wheel',\n\t\t\t(e: WheelEvent) => {\n\t\t\t\tif (capture) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\tthis.Handle_OnWheel(e);\n\t\t\t},\n\t\t\t{\n\t\t\t\tcapture: capture,\n\t\t\t\tpassive: false,\n\t\t\t},\n\t\t);\n\n\t\tdocument.body.style.touchAction = 'pan-x pan-y';\n\t\tdocument.body.style.userSelect = 'none';\n\t}\n\n\t/**\n\t * Configure swipe detection parameters\n\t *\n\t * @param IPointerSwipeOptions Configuration options for swipe detection\n\t * @return Pointer\n\t */\n\tpublic configureSwipe(options: IPointerSwipeOptions): Pointer {\n\t\tif (options.distanceThreshold !== undefined) {\n\t\t\tthis.swipeThreshold = options.distanceThreshold;\n\t\t}\n\n\t\tif (options.timeThreshold !== undefined) {\n\t\t\tthis.swipeTimeThreshold = options.timeThreshold;\n\t\t}\n\n\t\tif (options.velocityThreshold !== undefined) {\n\t\t\tthis.swipeVelocityThreshold = options.velocityThreshold;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * @param number x\n\t * @param number y\n\t * @return Pointer\n\t */\n\tpublic resetRelative(x: number = 0, y: number = 0): Pointer {\n\t\tthis.rox = this.rox2 = this.rx = this.rx2 = x;\n\t\tthis.roy = this.roy2 = this.ry = this.ry2 = y;\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tprivate get downEvent(): string {\n\t\tlet output: string = '';\n\n\t\tswitch (this.eventType) {\n\t\t\tcase 'pointer':\n\t\t\t\toutput = 'pointerdown';\n\t\t\t\tbreak;\n\n\t\t\tcase 'touch':\n\t\t\t\toutput = 'touchstart';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\toutput = 'mousedown';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn output as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tprivate get moveEvent(): string {\n\t\tlet output: string = '';\n\n\t\tswitch (this.eventType) {\n\t\t\tcase 'pointer':\n\t\t\t\toutput = 'pointermove';\n\t\t\t\tbreak;\n\n\t\t\tcase 'touch':\n\t\t\t\toutput = 'touchmove';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\toutput = 'mousemove';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn output as string;\n\t}\n\n\t/**\n\t * @return string\n\t */\n\tprivate get upEvent(): string {\n\t\tlet output: string = '';\n\n\t\tswitch (this.eventType) {\n\t\t\tcase 'pointer':\n\t\t\t\toutput = 'pointerup';\n\t\t\t\tbreak;\n\n\t\t\tcase 'touch':\n\t\t\t\toutput = 'touchend';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\toutput = 'mouseup';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn output as string;\n\t}\n\n\t/**\n\t * @param TouchEvent e\n\t * @return number\n\t */\n\tprivate getDistanceBetweenTouches(e: TouchEvent): number {\n\t\tif (e.touches.length < 2) return 0;\n\n\t\tconst touch1 = e.touches[0];\n\t\tconst touch2 = e.touches[1];\n\t\tconst dx = touch1.pageX - touch2.pageX;\n\t\tconst dy = touch1.pageY - touch2.pageY;\n\n\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t}\n\n\t// endregion: Instance\n\n\t// region: Event Handlers\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnInterval(): Promise<void> {\n\t\tconst ovx = this.vx;\n\t\tconst ovy = this.vy;\n\n\t\t// Slow down the velocity\n\t\tthis.vx *= this.friction;\n\t\tthis.vy *= this.friction;\n\n\t\t// Stop velocity\n\t\tif (Math.abs(this.vx) < 0.025) {\n\t\t\tthis.vx = 0;\n\t\t}\n\n\t\tif (Math.abs(this.vy) < 0.025) {\n\t\t\tthis.vy = 0;\n\t\t}\n\n\t\t// Ensure velocity is a real number and not any version of Infinity or NaN\n\t\tif (!isFinite(this.vx)) {\n\t\t\tthis.vx = 0;\n\t\t}\n\n\t\tif (!isFinite(this.vy)) {\n\t\t\tthis.vy = 0;\n\t\t}\n\n\t\t// Apply velocity\n\t\tif (!this.down) {\n\t\t\tthis.x2 += this.vx * 5;\n\t\t\tthis.y2 += this.vy * 5;\n\t\t\tthis.rx2 += this.vx * 5;\n\t\t\tthis.ry2 += this.vy * 5;\n\t\t}\n\n\t\t// Check if changed\n\t\tthis.changed = this.vx !== ovx || this.vy !== ovy;\n\t}\n\n\t/**\n\t * @param PointerEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnPointerDown(e: MouseEvent | PointerEvent | AppTouchEvent): Promise<void> {\n\t\tconst isTwoFingerTap = 'touches' in e && e.touches.length === 2;\n\n\t\tthis.down = true;\n\t\tthis.moved = false;\n\t\tthis.timeDown = Date.now();\n\t\tthis.touches = 'touches' in e ? e.touches.length : 1;\n\n\t\t// Handle pinches / zooms on touch devices\n\t\tif (this.touches > 1) {\n\t\t\tthis.initialPinchDistance = this.getDistanceBetweenTouches(e as TouchEvent);\n\t\t\tthis.lastPinchDistance = this.initialPinchDistance;\n\t\t}\n\n\t\t// We're using 'touches' in e rather than e instanceof TouchEvent\n\t\t// because of how bad Safari is. The worst browser ever made.\n\t\tthis.ox = this.x = 'touches' in e ? e.touches[0].clientX : e.clientX;\n\t\tthis.oy = this.y = 'touches' in e ? e.touches[0].clientY : e.clientY;\n\n\t\t// Reset dxdy\n\t\tthis.dx = 0;\n\t\tthis.dy = 0;\n\n\t\t// Reduce offset of target if not the Document\n\t\tif (this.target !== document) {\n\t\t\tconst rect = (this.target as HTMLElement).getBoundingClientRect();\n\t\t\tthis.ox -= rect.left;\n\t\t\tthis.oy -= rect.top;\n\t\t\tthis.x -= rect.left;\n\t\t\tthis.y -= rect.top;\n\t\t}\n\n\t\t// Reset relative\n\t\tthis.rox = this.rx;\n\t\tthis.roy = this.ry;\n\t\tthis.rox2 = this.rx2;\n\t\tthis.roy2 = this.ry2;\n\n\t\t// Event\n\t\tthis.dispatch('down', {\n\t\t\ttouches: this.touches,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t});\n\n\t\tconst xy = {\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t};\n\n\t\t// ---------------------------------------------------------------------\n\n\t\tif (isTwoFingerTap) {\n\t\t\tthis.twoFingerTapCount++;\n\n\t\t\tif (this.twoFingerTapCount === 1) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.twoFingerTapCount === 1 && !this.down) {\n\t\t\t\t\t\tthis.dispatch('twofingertap', xy);\n\t\t\t\t\t} else if (this.twoFingerTapCount === 2) {\n\t\t\t\t\t\tthis.dispatch('twofingerdoubletap', xy);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.twoFingerTapCount = 0;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.tapCount++;\n\n\t\t\tif (this.timeDown - this.lastTapTime < 300) {\n\t\t\t\tclearTimeout(this.tapTimeout!);\n\t\t\t\tthis.dispatch('doubletap', xy);\n\t\t\t\tthis.tapCount = 0;\n\t\t\t} else {\n\t\t\t\tthis.tapTimeout = setTimeout(() => {\n\t\t\t\t\tif (this.tapCount === 1 && !this.down) {\n\t\t\t\t\t\tthis.dispatch('tap', xy);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.tapCount = 0;\n\t\t\t\t}, 300) as any;\n\t\t\t}\n\n\t\t\tthis.lastTapTime = this.timeDown;\n\n\t\t\tthis.holdTimeout = setTimeout(() => {\n\t\t\t\tif (this.down) {\n\t\t\t\t\tthis.dispatch('hold', xy);\n\t\t\t\t}\n\t\t\t}, 500) as any;\n\t\t}\n\t}\n\n\t/**\n\t * @param PointerEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnPointerMove(e: MouseEvent | PointerEvent | TouchEvent): Promise<void> {\n\t\t// Clear tap testing\n\t\tif (this.moved && this.holdTimeout) {\n\t\t\tclearTimeout(this.holdTimeout);\n\t\t}\n\n\t\t// Handle pinches on touch devices\n\t\tif (this.touches > 1) {\n\t\t\tconst currentDistance = this.getDistanceBetweenTouches(e as TouchEvent);\n\t\t\tconst delta = currentDistance - this.lastPinchDistance;\n\t\t\tconst totalScale = currentDistance / this.initialPinchDistance;\n\n\t\t\tthis.dispatch('zoom', {\n\t\t\t\tdelta: delta,\n\t\t\t\tisTrackpad: false,\n\t\t\t\ttype: 'pinch',\n\t\t\t\tscale: totalScale,\n\t\t\t});\n\n\t\t\tthis.lastPinchDistance = currentDistance;\n\t\t}\n\n\t\t// Save last position\n\t\tthis.lastX = this.x;\n\t\tthis.lastY = this.y;\n\n\t\t// Get new position\n\t\t// We're using 'touches' in e rather than e instanceof TouchEvent\n\t\t// because of how bad Safari is. The worst browser ever made.\n\t\tthis.x = 'touches' in e ? e.touches[0].clientX : e.clientX;\n\t\tthis.y = 'touches' in e ? e.touches[0].clientY : e.clientY;\n\n\t\t// Reduce offset of target if not the Document\n\t\tif (this.target !== document) {\n\t\t\tconst rect = (this.target as HTMLElement).getBoundingClientRect();\n\t\t\tthis.x -= rect.left;\n\t\t\tthis.y -= rect.top;\n\t\t}\n\n\t\t// Save target\n\t\tthis.currentTarget = e.currentTarget as HTMLElement;\n\t\tthis.activeTarget = e.target as HTMLElement;\n\n\t\t// Set time\n\t\tthis.timeDifference = Date.now() - this.time;\n\t\tthis.time = Date.now();\n\n\t\t// Event\n\t\tthis.dispatch('move', {\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t});\n\n\t\t// Maintain a history of velocities\n\t\tthis.vxHistory.push((this.x - this.lastX) / this.timeDifference);\n\t\tthis.vyHistory.push((this.y - this.lastY) / this.timeDifference);\n\n\t\t// Only keep the last N velocities\n\t\tif (this.vxHistory.length > 5) this.vxHistory.shift();\n\t\tif (this.vyHistory.length > 5) this.vyHistory.shift();\n\n\t\t// Dragging\n\t\tif (this.down) {\n\t\t\tthis.dx = this.x - this.ox;\n\t\t\tthis.dy = this.y - this.oy;\n\t\t\tthis.rx = this.rox + this.dx;\n\t\t\tthis.ry = this.roy + this.dy;\n\t\t\tthis.rx2 = this.rox2 + this.dx;\n\t\t\tthis.ry2 = this.roy2 + this.dy;\n\t\t\tthis.angle = Math.atan2(this.dy, this.dx) * (180 / Math.PI);\n\t\t\tthis.distance = Math.sqrt(Math.pow(this.dx, 2) + Math.pow(this.dy, 2));\n\t\t\tthis.moved = Math.abs(this.distance) > this.moveThreshold;\n\t\t\tthis.x2 = this.x;\n\t\t\tthis.y2 = this.y;\n\t\t\tthis.timeDownDifference = this.time - this.timeDown;\n\n\t\t\t// Calculate the inertia\n\t\t\tthis.inertia = Math.sqrt(Math.pow(this.dx, 2) + Math.pow(this.dy, 2));\n\n\t\t\t// Calculate the moving average (default to 1 to avoid infinity)\n\t\t\tthis.vx = this.vxHistory.reduce((a, b) => a + b) / (this.vxHistory.length || 1);\n\t\t\tthis.vy = this.vyHistory.reduce((a, b) => a + b) / (this.vyHistory.length || 1);\n\n\t\t\t// Event\n\t\t\tthis.dispatch('drag', {\n\t\t\t\tangle: this.angle,\n\t\t\t\tchanged: this.changed,\n\t\t\t\tdistance: this.distance,\n\t\t\t\tdx: this.dx,\n\t\t\t\tdy: this.dy,\n\t\t\t\tinertia: this.inertia,\n\t\t\t\tmoved: this.moved,\n\t\t\t\tox: this.ox,\n\t\t\t\toy: this.oy,\n\t\t\t\trx: this.rx,\n\t\t\t\try: this.ry,\n\t\t\t\trx2: this.rx2,\n\t\t\t\try2: this.ry2,\n\t\t\t\ttime: this.time,\n\t\t\t\ttimeDifference: this.timeDifference,\n\t\t\t\ttimeDown: this.timeDown,\n\t\t\t\ttimeDownDifference: this.timeDownDifference,\n\t\t\t\ttouches: this.touches,\n\t\t\t\tvx: this.vx,\n\t\t\t\tvy: this.vy,\n\t\t\t\tx: this.x,\n\t\t\t\ty: this.y,\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @param PointerEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnPointerUp(e: MouseEvent | PointerEvent | TouchEvent): Promise<void> {\n\t\tconst timeDifference = Date.now() - this.timeDown;\n\n\t\tthis.down = 'touches' in e ? e.touches.length > 0 : false;\n\t\tthis.touches = 'touches' in e ? e.touches.length : 1;\n\n\t\t// Reset touches\n\t\tif (this.touches > 1) {\n\t\t\tthis.initialPinchDistance = 0;\n\t\t\tthis.lastPinchDistance = 0;\n\t\t}\n\n\t\t// Event\n\t\tthis.dispatch('up', {\n\t\t\ttouches: this.touches,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t});\n\n\t\t// Check if we meet swipe thresholds\n\t\tif (this.moved && timeDifference < this.swipeTimeThreshold) {\n\t\t\tconst dx = this.x - this.ox;\n\t\t\tconst dy = this.y - this.oy;\n\t\t\tconst distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\tconst velocity = distance / this.timeDifference;\n\n\t\t\tif (distance > this.swipeThreshold && velocity > this.swipeVelocityThreshold) {\n\t\t\t\tconst direction = Math.abs(dx) > Math.abs(dy) ? (dx > 0 ? 'right' : 'left') : dy > 0 ? 'down' : 'up';\n\n\t\t\t\tthis.dispatch('swipe', {\n\t\t\t\t\tdirection: direction,\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tduration: this.timeDifference,\n\t\t\t\t\tvelocity: velocity,\n\t\t\t\t});\n\n\t\t\t\tthis.dispatch('swipe:' + direction, {\n\t\t\t\t\tdirection: direction,\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\tduration: this.timeDifference,\n\t\t\t\t\tvelocity: velocity,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Clear tap testing\n\t\tif (this.holdTimeout) {\n\t\t\tclearTimeout(this.holdTimeout);\n\t\t}\n\t}\n\n\t/**\n\t * @param WheelEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnWheel(e: WheelEvent): Promise<void> {\n\t\t// @ts-ignore\n\t\tconst isTrackpad = ~~(Math.abs(e.wheelDeltaY || 1) / Math.abs(e.deltaY || 1)) > 1;\n\t\tconst deltaY = e.deltaY;\n\t\tconst direction = deltaY > 0 ? 'out' : 'in';\n\n\t\tUtility.Debounce.exec(\n\t\t\tthis.cid,\n\t\t\t() => {\n\t\t\t\tthis.wheel = false;\n\t\t\t\tthis.wheelDelta = 0;\n\t\t\t},\n\t\t\t100,\n\t\t\ttrue,\n\t\t);\n\n\t\tif (deltaY) {\n\t\t\tthis.wheel = true;\n\t\t}\n\n\t\tthis.wheelDelta = deltaY;\n\n\t\tthis.dispatch('zoom', {\n\t\t\tdelta: deltaY * -1,\n\t\t\tdirection: direction,\n\t\t\tisTrackpad: isTrackpad,\n\t\t\ttype: 'wheel',\n\t\t});\n\n\t\tthis.dispatch('zoom:' + direction, {\n\t\t\tdelta: deltaY * -1,\n\t\t\tdirection: direction,\n\t\t\tisTrackpad: isTrackpad,\n\t\t\ttype: 'wheel',\n\t\t});\n\t}\n\n\t// endregion: Event Handlers\n}\n", "import { Event } from '../index.js';\n\n/**\n * @type type\n */\nexport type TSensorEventNames = 'devicemotion' | 'deviceorientation';\n\n/**\n * TODO update interface\n * @type interface\n */\nexport interface IDeviceMotionEventData {\n\tacceleration: any;\n\taccelerationIncludingGravity: any;\n\tinterval: number;\n\trotationRate: any;\n}\n\n/**\n * @type interface\n */\nexport interface IDeviceOrientationEventData {\n\tabsolute: boolean;\n\talpha: number | null;\n\tbeta: number | null;\n\tgamma: number | null;\n}\n\n/**\n * @type type\n */\nexport type TSensorEventHandler = (data: IDeviceMotionEventData | IDeviceOrientationEventData) => void;\n\n/**\n * Sensor is a singleton class that handles sensor events\n * and dispatches them to the appropriate targets.\n *\n * Example Usage:\n *\n * \timport Sensor from '@/Input/Sensor';\n *\n * \tSensor.start();\n *\n * \tSensor.on('orientation', ({ data }) => {\n * \t\tconsole.log('Orientation:', data);\n * \t});\n *\n * \tSensor.on('gyroscope', ({ data }) => {\n * \t\tconsole.log('Gyroscope:', data);\n * \t});\n *\n * \tSensor.on('accelerometer', ({ data }) => {\n * \t\tconsole.log('Accelerometer:', data);\n * \t});\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Input\n * @project ChalkySticks SDK Core\n */\nexport class Sensor extends Event.Dispatcher {\n\t/**\n\t * @return boolean\n\t */\n\tpublic get hasMotion(): boolean {\n\t\treturn 'ondevicemotion' in window;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic get hasOrientation(): boolean {\n\t\treturn 'ondeviceorientation' in window;\n\t}\n\n\t/**\n\t * @return boolean\n\t */\n\tpublic get hasSensors(): boolean {\n\t\treturn this.hasOrientation && this.hasMotion;\n\t}\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\t// Bindings\n\t\tthis.Handle_OnDeviceMotion = this.Handle_OnDeviceMotion.bind(this);\n\t\tthis.Handle_OnDeviceOrientation = this.Handle_OnDeviceOrientation.bind(this);\n\n\t\t// Automatically attach\n\t\tthis.attachEvents();\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic attachEvents(): void {\n\t\twindow.addEventListener('devicemotion', this.Handle_OnDeviceMotion);\n\t\twindow.addEventListener('deviceorientation', this.Handle_OnDeviceOrientation);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic detachEvents(): void {\n\t\twindow.removeEventListener('devicemotion', this.Handle_OnDeviceMotion);\n\t\twindow.removeEventListener('deviceorientation', this.Handle_OnDeviceOrientation);\n\t}\n\n\t// region: Event Handlers\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @param DeviceMotionEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnDeviceMotion(e: IDeviceMotionEventData): Promise<void> {\n\t\tconst { acceleration, accelerationIncludingGravity, rotationRate } = e;\n\n\t\tthis.dispatch('gyroscope', rotationRate);\n\t\tthis.dispatch('accelerometer', acceleration);\n\t\tthis.dispatch('accelerometer:gravity', accelerationIncludingGravity);\n\t}\n\n\t/**\n\t * @param DeviceOrientationEvent e\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnDeviceOrientation(e: IDeviceOrientationEventData): Promise<void> {\n\t\tconst { absolute, alpha, beta, gamma } = e;\n\n\t\tthis.dispatch('orientation', {\n\t\t\tabsolute,\n\t\t\talpha,\n\t\t\tbeta,\n\t\t\tgamma,\n\t\t});\n\t}\n\n\t// endregion: Event Handlers\n}\n\n// Singleton\nexport default new Sensor();\n", "import { Event } from '../index.js';\n\n/**\n * @type interface\n */\nexport interface IVideoSource {\n\tdeviceId: string;\n\tlabel: string;\n}\n\n/**\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package Input\n * @project ChalkySticks SDK Core\n */\nexport class Video extends Event.Dispatcher {\n\t/**\n\t * Get a list of video input devices.\n\t *\n\t * @returns Promise<IVideoSource[]>\n\t */\n\tpublic static async getSources(): Promise<IVideoSource[]> {\n\t\t// Get list of devices\n\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t// Search for videos\n\t\tconst videoInputs = devices.filter((device) => device.kind === 'videoinput');\n\n\t\t// Return objects\n\t\treturn videoInputs.map((device) => ({\n\t\t\tdeviceId: device.deviceId,\n\t\t\tlabel: device.label,\n\t\t}));\n\t}\n}\n", "export * as Analytics from './Analytics.js';\nexport * as Device from './Device';\nexport * as Format from './Format.js';\nexport * as Geolocation from './Geolocation';\nexport * as Math from './Math.js';\nexport * as Share from './Share.js';\nexport * from './Cache';\nexport * from './Debounce';\nexport * from './General';\nexport * from './Hysteresis';\nexport * from './Interval';\nexport { default as String } from './String';\nexport { default as Easing, EasingFunction, getEasingMethod } from './Easing.js';\n", "// @ts-nocheck\n\n/**\n * @type interface\n */\ninterface IRedditPixelOptions {\n\taaid?: string;\n\temail?: string;\n\texternalId?: string;\n\tidfa?: string;\n\toptOut?: boolean;\n\tuseDecimalCurrencyValues?: boolean;\n}\n\n/**\n * Embeds Google Analytics script into the page.\n *\n * @param id Google Analytics ID.\n * @see https://developers.google.com/analytics/devguides/collection/gtagjs\n * @see https://developers.google.com/analytics/devguides/collection/gtagjs/pages\n * @return void\n */\nexport function embedGoogleAnalytics(id: string): void {\n\tif (window.gtag) {\n\t\tconsole.warn('Analytics is already embedded');\n\t\treturn;\n\t}\n\n\tconst script = document.createElement('script');\n\tscript.async = true;\n\tscript.src = 'https://www.googletagmanager.com/gtag/js?id=' + id;\n\tdocument.head.appendChild(script);\n\n\twindow.dataLayer = window.dataLayer || [];\n\n\t// Log\n\tconsole.log('GA:', id);\n\n\t/**\n\t * @return void\n\t */\n\twindow.gtag = function gtag(): void {\n\t\twindow.dataLayer.push(arguments);\n\t};\n\n\tgtag('js', new Date());\n\tgtag('config', id);\n}\n\n/**\n * Example:\n *\n * \tembedRedditPixel('t2_8jfy6s9bf', {\n * \t    optOut: false,\n * \t    useDecimalCurrencyValues: true,\n * \t    aaid: '<AAID-HERE>',\n * \t    email: '<EMAIL-HERE>',\n * \t    externalId: '<EXTERNAL-ID-HERE>',\n * \t    idfa: '<IDFA-HERE>'\n * \t});\n *\n * @param string pixelId\n * @param IRedditPixelOptions options\n * @return void\n */\nexport function embedRedditPixel(pixelId: string, options: IRedditPixelOptions = {}): void {\n\tif (window.rdt) {\n\t\tconsole.warn('Reddit pixel is already embedded');\n\t\treturn;\n\t}\n\n\tconst script = document.createElement('script');\n\tscript.async = true;\n\tscript.src = 'https://www.redditstatic.com/ads/pixel.js';\n\n\tconst firstScript = document.getElementsByTagName('script')[0];\n\tfirstScript.parentNode.insertBefore(script, firstScript);\n\n\twindow.rdt = function rdt(): void {\n\t\twindow.rdt.sendEvent ? window.rdt.sendEvent(...arguments) : window.rdt.callQueue.push(arguments);\n\t};\n\twindow.rdt.callQueue = [];\n\n\t// Log\n\tconsole.log('RP:', pixelId);\n\n\trdt('init', pixelId, options);\n\trdt('track', 'PageVisit');\n}\n\n/**\n * Example:\n *\n * \tembedMetaPixel('1181907652602034');\n *\n * @param string pixelId\n * @return void\n */\nexport function embedMetaPixel(pixelId: string): void {\n\tif (window.fbq) {\n\t\tconsole.warn('Facebook pixel is already embedded');\n\t\treturn;\n\t}\n\n\tconst script = document.createElement('script');\n\tscript.async = true;\n\tscript.src = 'https://connect.facebook.net/en_US/fbevents.js';\n\n\tconst firstScript = document.getElementsByTagName('script')[0];\n\tfirstScript.parentNode.insertBefore(script, firstScript);\n\n\twindow.fbq = function fbq(): void {\n\t\twindow.fbq.callMethod ? window.fbq.callMethod(...arguments) : window.fbq.queue.push(arguments);\n\t};\n\n\tif (!window._fbq) {\n\t\twindow._fbq = window.fbq;\n\t}\n\n\twindow.fbq.push = window.fbq;\n\twindow.fbq.queue = [];\n\twindow.fbq.loaded = true;\n\twindow.fbq.version = '2.0';\n\n\t// Log\n\tconsole.log('MP:', pixelId);\n\n\tfbq('init', pixelId);\n\tfbq('track', 'PageView');\n}\n", "/**\n * @return string\n */\nexport function userAgent(): string {\n\treturn navigator.userAgent;\n}\n\n/**\n * @return boolean\n */\nexport function isMobile(): boolean {\n\treturn /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent());\n}\n\n/**\n * @return boolean\n */\nexport function isIOS(): boolean {\n\treturn /iphone|ipad|ipod/i.test(userAgent());\n}\n\n/**\n * @return boolean\n */\nexport function isAndroid(): boolean {\n\treturn /android/i.test(userAgent());\n}\n\n/**\n * @return boolean\n */\nexport function isLandscape(): boolean {\n\treturn window.orientation === 90 || window.orientation === -90;\n}\n\n/**\n * @return boolean\n */\nexport function isPortrait(): boolean {\n\treturn !isLandscape();\n}\n\n/**\n * @return boolean\n */\nexport function getOrientation(): 'portrait' | 'landscape' {\n\treturn isLandscape() ? 'landscape' : 'portrait';\n}\n\n/**\n * @return boolean\n */\nexport function isTouchDevice(): boolean {\n\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n}\n\n/**\n * @return boolean\n */\nexport function getScreenWidth(): number {\n\treturn window.screen.width;\n}\n\n/**\n * @return boolean\n */\nexport function getScreenHeight(): number {\n\treturn window.screen.height;\n}\n\n/**\n * @return boolean\n */\nexport function getBrowserName(): string {\n\tconst ua = userAgent();\n\n\tif (ua.indexOf('firefox') > -1) {\n\t\treturn 'Firefox';\n\t} else if (ua.indexOf('opera') > -1 || ua.indexOf('opr') > -1) {\n\t\treturn 'Opera';\n\t} else if (ua.indexOf('chrome') > -1) {\n\t\treturn 'Chrome';\n\t} else if (ua.indexOf('safari') > -1) {\n\t\treturn 'Safari';\n\t} else if (ua.indexOf('msie') > -1 || ua.indexOf('trident') > -1) {\n\t\treturn 'Internet Explorer';\n\t} else {\n\t\treturn 'Unknown';\n\t}\n}\n\n/**\n * @return boolean\n */\nexport function getBrowserVersion(): string {\n\tconst ua = userAgent();\n\tlet tem: RegExpMatchArray | null = ua.match(/version\\/(\\d+)/i);\n\n\tif (tem === null) {\n\t\ttem = ua.match(/(?:msie |rv:)(\\d+)/);\n\t}\n\n\tif (tem === null) {\n\t\ttem = ua.match(/(?:chrome|safari|firefox|opera|opr|edge)\\/(\\d+)/i);\n\t}\n\n\tif (tem === null) {\n\t\treturn 'Unknown';\n\t}\n\n\treturn tem[1];\n}\n\n/**\n * @return boolean\n */\nexport function isIE(): boolean {\n\treturn getBrowserName() === 'Internet Explorer';\n}\n\n/**\n * @return boolean\n */\nexport function isEdge(): boolean {\n\treturn getBrowserName() === 'Edge';\n}\n\n/**\n * @return boolean\n */\nexport function isChrome(): boolean {\n\treturn getBrowserName() === 'Chrome';\n}\n\n/**\n * @return boolean\n */\nexport function isFirefox(): boolean {\n\treturn getBrowserName() === 'Firefox';\n}\n\n/**\n * @return boolean\n */\nexport function isSafari(): boolean {\n\treturn getBrowserName() === 'Safari';\n}\n\n/**\n * @return boolean\n */\nexport function isOpera(): boolean {\n\treturn getBrowserName() === 'Opera';\n}\n", "/**\n * Convert bytes to human readable format\n *\n * @param bytes\n * @returns string\n */\nexport function bytesToSize(bytes: number): string {\n\tlet sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n\tif (bytes == 0) return '0 Byte';\n\n\tlet i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)).toString());\n\n\treturn Math.round(bytes / Math.pow(1024, i)) + ' ' + sizes[i];\n}\n\n/**\n * Get amount of days between two dates\n *\n * @param Date date1\n * @param Date date2\n * @return number\n */\nexport function daysBetweenDates(date1: Date, date2: Date): number {\n\tconst timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\treturn Math.ceil(timeDiff / (1000 * 3600 * 24));\n}\n\n/**\n * Convert seconds to time format\n *\n * @param seconds\n * @param format\n * @returns string\n */\nexport function secondsToTime(seconds: number, format: string = '00:00:00'): string {\n\tlet date = new Date(0);\n\tdate.setSeconds(seconds);\n\n\tswitch (format) {\n\t\tcase '00:00:00':\n\t\t\treturn date.toISOString().substr(11, 8);\n\n\t\tcase '00:00':\n\t\t\treturn date.toISOString().substr(14, 5);\n\n\t\tcase '00':\n\t\t\treturn date.toISOString().substr(17, 2);\n\t}\n\n\treturn date.toISOString().substr(11, 8);\n}\n\n/**\n * Convert time to seconds\n *\n * @param time\n * @returns number\n */\nexport function timeToSeconds(time: string): number {\n\tlet [hours, minutes, seconds] = time.split(':').map(Number);\n\n\treturn hours * 3600 + minutes * 60 + seconds;\n}\n\n/**\n * Convert time to human readable format\n *\n * @param time\n * @returns string\n */\nexport function timeToHuman(time: string): string {\n\tlet [hours, minutes, seconds] = time.split(':').map(Number);\n\n\treturn `${hours}h ${minutes}m ${seconds}s`;\n}\n\n/**\n * @param Date date\n * @return string\n */\nexport function timeAgo(date: Date): string {\n\tlet seconds = Math.floor((new Date().getTime() - date.getTime()) / 1000);\n\tlet interval = seconds / 31536000;\n\n\tif (interval > 1) {\n\t\treturn Math.floor(interval) + ' years ago';\n\t}\n\n\tinterval = seconds / 2592000;\n\tif (interval > 1) {\n\t\treturn Math.floor(interval) + ' months ago';\n\t}\n\n\tinterval = seconds / 86400;\n\tif (interval > 1) {\n\t\treturn Math.floor(interval) + ' days ago';\n\t}\n\n\tinterval = seconds / 3600;\n\tif (interval > 1) {\n\t\treturn Math.floor(interval) + ' hours ago';\n\t}\n\n\tinterval = seconds / 60;\n\tif (interval > 1) {\n\t\treturn Math.floor(interval) + ' minutes ago';\n\t}\n\n\treturn Math.floor(seconds) + ' seconds ago';\n}\n", "import * as Event from '../Event';\nimport * as Exception from '../Exception';\nimport { Cache } from './Cache';\nimport { toRadians, toDegrees, EARTH_RADIUS } from './Math';\n\n/**\n * @type interface\n */\nexport interface ICoordinateBounds {\n\tlatitudeMin: number;\n\tlatitudeMax: number;\n\tlongitudeMin: number;\n\tlongitudeMax: number;\n}\n\n/**\n * @type interface\n */\ninterface IPAPIResponse {\n\tlatitude: number;\n\tlongitude: number;\n\tcity: string;\n\tcountry: string;\n}\n\n/**\n * @type object\n */\nexport const config = {\n\tIP_LOCATION_API: 'https://ipapi.co/json/',\n};\n\n/**\n * Cache expiration of 2 minutes for the geolocation\n *\n * @type number\n */\nexport const CACHE_EXPIRATION = 1000 * 6 * 2;\n\n/**\n * Prevent us from hitting the geolocation services all the time\n *\n * @type Cache\n */\nexport const cache = new Cache(CACHE_EXPIRATION);\n\n/**\n * Get location explicitly either through browser events, Capacitor, or IP-based fallback\n *\n * @return Promise<GeolocationPosition>\n */\nexport async function getLocation(): Promise<GeolocationPosition> {\n\tconst cacheKey = 'geolocation';\n\tconst cachedLocation = cache.get(cacheKey);\n\n\tif (cachedLocation) {\n\t\treturn cachedLocation;\n\t}\n\n\ttry {\n\t\tif (navigator?.geolocation) {\n\t\t\treturn await getBrowserLocation(cacheKey);\n\t\t} else if (await isCapacitorGeolocationAvailable()) {\n\t\t\treturn await getCapacitorLocation(cacheKey);\n\t\t} else {\n\t\t\treturn await getIPLocationFallback(cacheKey);\n\t\t}\n\t} catch (error) {\n\t\tthrow error instanceof Error ? error : new Exception.Geolocation('Unknown error occurred');\n\t}\n}\n\n/**\n * Get location using browser geolocation API\n *\n * @param string cacheKey\n * @return Promise<GeolocationPosition>\n */\n/**\n * Get location using browser geolocation API\n *\n * @param string cacheKey\n * @return Promise<GeolocationPosition>\n */\nasync function getBrowserLocation(cacheKey: string): Promise<GeolocationPosition> {\n\treturn new Promise((resolve, reject) => {\n\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t(position: GeolocationPosition) => {\n\t\t\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\t\t\tconsole.info('\uD83D\uDD38 Location', position);\n\t\t\t\tEvent.Bus.dispatch('location:change', position);\n\t\t\t\tresolve(position);\n\t\t\t},\n\t\t\tasync (error: GeolocationPositionError) => {\n\t\t\t\tconsole.warn('Browser geolocation error:', error);\n\n\t\t\t\tif (error.code === error.PERMISSION_DENIED) {\n\t\t\t\t\treject(new Exception.Geolocation('Permission denied for geolocation.'));\n\t\t\t\t} else if (error.code === error.POSITION_UNAVAILABLE) {\n\t\t\t\t\treject(new Exception.Geolocation('Geolocation position unavailable.'));\n\t\t\t\t} else if (error.code === error.TIMEOUT) {\n\t\t\t\t\treject(new Exception.Geolocation('Geolocation request timed out.'));\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst position = await getIPLocation();\n\t\t\t\t\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\t\t\t\t\tconsole.info('\uD83D\uDD3A Location', position);\n\t\t\t\t\t\tEvent.Bus.dispatch('location:change', position);\n\t\t\t\t\t\tresolve(position);\n\t\t\t\t\t} catch (ipError) {\n\t\t\t\t\t\treject(new Exception.Geolocation('Fallback IP location failed.'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t});\n}\n\n/**\n * Get location using Capacitor Geolocation plugin\n *\n * @param string cacheKey\n * @return Promise<GeolocationPosition>\n */\nasync function getCapacitorLocation(cacheKey: string): Promise<GeolocationPosition> {\n\ttry {\n\t\tconst { Geolocation } = await import('@capacitor/geolocation');\n\t\tconst position = await Geolocation.getCurrentPosition();\n\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\tconsole.info('\uD83D\uDD39 Location', position);\n\t\tEvent.Bus.dispatch('location:change', position);\n\t\treturn position;\n\t} catch (error) {\n\t\ttry {\n\t\t\tconst position = await getIPLocation();\n\t\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\t\tconsole.info('\uD83D\uDD3A Location', position);\n\t\t\tEvent.Bus.dispatch('location:change', position);\n\t\t\treturn position;\n\t\t} catch (ipError) {\n\t\t\tEvent.Bus.dispatch('location:error', error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\n/**\n * Get IP-based location as a fallback\n *\n * @param string cacheKey\n * @return Promise<GeolocationPosition>\n */\nasync function getIPLocationFallback(cacheKey: string): Promise<GeolocationPosition> {\n\ttry {\n\t\tconst position = await getIPLocation();\n\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\tconsole.info('\uD83D\uDD3A Location', position);\n\t\tEvent.Bus.dispatch('location:change', position);\n\t\treturn position;\n\t} catch (error) {\n\t\tEvent.Bus.dispatch('location:error', error);\n\t\tthrow new Exception.Geolocation('Failed to get IP location');\n\t}\n}\n\n/**\n * @return Promise<GeolocationPosition>\n */\nasync function getIPLocation(): Promise<GeolocationPosition> {\n\tconst response = await fetch(config.IP_LOCATION_API);\n\tconst data: IPAPIResponse = await response.json();\n\n\treturn {\n\t\tcoords: {\n\t\t\taccuracy: 5000, // City-level accuracy (~5km)\n\t\t\taltitude: null,\n\t\t\taltitudeAccuracy: null,\n\t\t\theading: null,\n\t\t\tlatitude: data.latitude,\n\t\t\tlongitude: data.longitude,\n\t\t\tspeed: null,\n\t\t},\n\t\ttimestamp: Date.now(),\n\t} as GeolocationPosition;\n}\n\n/**\n * Watch the user's geolocation\n *\n * @param PositionCallback callback\n * @param PositionErrorCallback errorCallback\n * @param PositionOptions options\n * @returns number watchId\n */\nexport function watchLocation(\n\tcallback?: PositionCallback,\n\terrorCallback?: PositionErrorCallback,\n\toptions: PositionOptions = { enableHighAccuracy: true },\n): number {\n\tconst cacheKey = 'geolocation';\n\n\tif (navigator?.geolocation) {\n\t\treturn navigator.geolocation.watchPosition(\n\t\t\t(position: GeolocationPosition) => {\n\t\t\t\tcache.set(cacheKey, position, CACHE_EXPIRATION);\n\t\t\t\tEvent.Bus.dispatch('location:change', position);\n\t\t\t\tcallback?.(position);\n\t\t\t},\n\t\t\tasync (error: GeolocationPositionError) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst ipPosition = await getIPLocation();\n\t\t\t\t\tcache.set(cacheKey, ipPosition, CACHE_EXPIRATION);\n\t\t\t\t\tEvent.Bus.dispatch('location:change', ipPosition);\n\t\t\t\t\tcallback?.(ipPosition);\n\t\t\t\t} catch (ipError) {\n\t\t\t\t\tEvent.Bus.dispatch('location:error', error);\n\t\t\t\t\terrorCallback?.(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\toptions,\n\t\t);\n\t}\n\n\treturn 0;\n}\n\n/**\n * Clear the watch\n *\n * @param number watchId\n * @returns void\n */\nexport function clearWatch(watchId: number): void {\n\ttry {\n\t\tif (!navigator?.geolocation) {\n\t\t\tthrow new Exception.Geolocation('Geolocation is not supported by this browser.');\n\t\t}\n\n\t\tnavigator.geolocation.clearWatch(watchId);\n\t} catch (error) {\n\t\tconsole.error('Error clearing geolocation watch:', error);\n\t}\n}\n\n// region: Utility\n// ---------------------------------------------------------------------------\n\n/**\n * Get the distance between two points\n *\n * @param number latitude1\n * @param number longitude1\n * @param number latitude2\n * @param number longitude2\n * @returns number\n */\nexport function distanceBetween(latitude1: number, longitude1: number, latitude2: number, longitude2: number): number {\n\tconst R = EARTH_RADIUS;\n\tconst dLatitude = toRadians(latitude2 - latitude1);\n\tconst dLongitude = toRadians(longitude2 - longitude1);\n\tconst a =\n\t\tMath.sin(dLatitude / 2) * Math.sin(dLatitude / 2) +\n\t\tMath.cos(toRadians(latitude1)) * Math.cos(toRadians(latitude2)) * Math.sin(dLongitude / 2) * Math.sin(dLongitude / 2);\n\tconst c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\tconst d = R * c; // Distance in km\n\treturn d;\n}\n\n/**\n * Get bearing of two directions\n *\n * @param number latitude1\n * @param number longitude1\n * @param number latitude2\n * @param number longitude2\n * @returns number\n */\nexport function getBearing(latitude1: number, longitude1: number, latitude2: number, longitude2: number): number {\n\tconst dLongitude = toRadians(longitude2 - longitude1);\n\tconst y = Math.sin(dLongitude) * Math.cos(toRadians(latitude2));\n\tconst x =\n\t\tMath.cos(toRadians(latitude1)) * Math.sin(toRadians(latitude2)) -\n\t\tMath.sin(toRadians(latitude1)) * Math.cos(toRadians(latitude2)) * Math.cos(dLongitude);\n\tconst brng = toDegrees(Math.atan2(y, x));\n\n\treturn (brng + 360) % 360;\n}\n\n/**\n * Get bounds of a circle around a point\n *\n * @param number latitude\n * @param number longitude\n * @param number radius\n * @returns ICoordinateBounds\n */\nexport function getBounds(latitude: number, longitude: number, radius: number): ICoordinateBounds {\n\tconst R = EARTH_RADIUS; // Radius of the earth in km\n\tconst latitude1 = toRadians(latitude);\n\tconst longitude1 = toRadians(longitude);\n\tconst d = radius / R; // Distance in km\n\tconst bounds = {\n\t\tlatitudeMin: toDegrees(latitude1 - d),\n\t\tlatitudeMax: toDegrees(latitude1 + d),\n\t\tlongitudeMin: toDegrees(longitude1 - d / Math.cos(latitude1)),\n\t\tlongitudeMax: toDegrees(longitude1 + d / Math.cos(latitude1)),\n\t};\n\n\treturn bounds;\n}\n\n/**\n * Check if a point is in a circular bounds\n *\n * @param number latitude\n * @param number longitude\n * @param ICoordinateBounds bounds\n * @returns boolean\n */\nexport function isPointInBounds(latitude: number, longitude: number, bounds: ICoordinateBounds): boolean {\n\treturn latitude >= bounds.latitudeMin && latitude <= bounds.latitudeMax && longitude >= bounds.longitudeMin && longitude <= bounds.longitudeMax;\n}\n\n/**\n * Flexible way of simplifying lat/long coordinates from various providers.\n *\n * This is valuable because it helps prevent cache busting on HTTP urls\n * with overly precise floats.\n *\n * \t// Original format\n * \tsimplifyCoordinates(40.7128, -74.0060);\n *\n * \t// Object format\n * \tsimplifyCoordinates({ lat: 40.7128, lng: -74.0060 });\n *\n * \t// Array format\n * \tsimplifyCoordinates([40.7128, -74.0060]);\n *\n * \t// Google Maps format\n * \tsimplifyCoordinates({ position: { lat: 40.7128, lng: -74.0060 } });\n *\n * \t// With custom precision\n * \tsimplifyCoordinates({ lat: 40.7128, lng: -74.0060 }, undefined, 1e5);\n *\n * @param coordinates The coordinates to simplify\n * @param longitudeOrRoundAmount The longitude or the round amount\n * @param roundAmount The round amount\n * @return object\n */\nexport function simplifyCoordinates(\n\tcoordinates: CoordinateInput | number,\n\tlongitudeOrRoundAmount?: number,\n\troundAmount: number = 1e3,\n): { latitude: number; longitude: number } {\n\tlet lat: number;\n\tlet lng: number;\n\tlet precision = roundAmount;\n\n\t// Handle different input formats\n\tif (typeof coordinates === 'number' && typeof longitudeOrRoundAmount === 'number') {\n\t\t// Original format: (latitude, longitude, roundAmount?)\n\t\tlat = coordinates;\n\t\tlng = longitudeOrRoundAmount;\n\t\tprecision = roundAmount;\n\t} else if (Array.isArray(coordinates)) {\n\t\t// Handle array format: [lat, lng]\n\t\t[lat, lng] = coordinates;\n\t} else if (typeof coordinates === 'object') {\n\t\tif ('position' in coordinates) {\n\t\t\t// Handle Google Maps format: { position: { lat, lng } }\n\t\t\tlat = coordinates.position.lat;\n\t\t\tlng = coordinates.position.lng;\n\t\t} else {\n\t\t\t// Handle object format with various property names\n\t\t\tlat = coordinates?.latitude ?? (coordinates?.lat || 0);\n\t\t\tlng = coordinates?.longitude ?? (coordinates?.lng || 0);\n\t\t}\n\t} else {\n\t\tthrow new Error('Invalid coordinates format');\n\t}\n\n\t// Validate coordinates\n\tif (typeof lat !== 'number' || typeof lng !== 'number') {\n\t\tthrow new Error('Invalid coordinates: latitude and longitude must be numbers');\n\t}\n\n\treturn {\n\t\tlatitude: Math.round(lat * precision) / precision,\n\t\tlongitude: Math.round(lng * precision) / precision,\n\t};\n}\n\n// endregion: Utility\n\n// region: Helpers\n// ---------------------------------------------------------------------------\n\ntype CoordinateInput =\n\t| { lat?: number; latitude?: number; lng?: number; longitude?: number }\n\t| [number, number]\n\t| { position: { lat: number; lng: number } }\n\t| [latitude: number, longitude: number];\n\n/**\n * Check if Capacitor Geolocation plugin is available dynamically\n */\nasync function isCapacitorGeolocationAvailable(): Promise<boolean> {\n\ttry {\n\t\t// Dynamically import @capacitor/geolocation\n\t\tconst { Geolocation } = await import('@capacitor/geolocation');\n\t\treturn !!Geolocation;\n\t} catch {\n\t\treturn false;\n\t}\n}\n\n// endregion: Helpers\n", "/**\n * @type interface\n */\ninterface ICachedItem {\n\timmutable: boolean;\n\ttime: number;\n\tttl: number;\n\tvalue: any;\n}\n\n/**\n * Cache is a simple key/value store with TTL support\n *\n * Example Usage:\n *\n * \tconst cache: Cache = new Cache();\n *\n * \tcache.set('foo', 'bar', 1000);\n * \tcache.set('foo', 'baz', 1000, true);\n *\n * \tconst value = cache.get('foo');\n * \tconsole.log(value); // bar\n *\n * \tcache.delete('foo');\n * \tconsole.log(cache.get('foo')); // undefined\n *\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @package Utility\n * @project ChalkySticks SDK Core\n */\nexport class Cache {\n\t/**\n\t * @type Record<string, ICachedItem>\n\t */\n\tprivate storage: Record<string, ICachedItem> = {};\n\n\t/**\n\t * Default TTL\n\t *\n\t * @type number ttl\n\t */\n\tprivate ttl: number;\n\n\t/**\n\t * @param number ttl\n\t */\n\tconstructor(ttl: number = -1) {\n\t\tthis.ttl = ttl > 0 ? ttl : 0;\n\t}\n\n\t/**\n\t * @return Record<string, ICachedItem>\n\t */\n\tpublic all(): Record<string, ICachedItem> {\n\t\tconst keys: string[] = Object.keys(this.storage);\n\t\tconst output: any = {};\n\t\tlet value: any;\n\n\t\tfor (const key of keys) {\n\t\t\tvalue = this.get(key);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\toutput[key] = this.get(key);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return void\n\t */\n\tpublic delete(key: string): void {\n\t\tif (this.storage[key]) {\n\t\t\tdelete this.storage[key];\n\t\t}\n\t}\n\n\t/**\n\t * @param string key\n\t * @return any\n\t */\n\tpublic get(key: string): any {\n\t\t// Check time on it\n\t\tconst item: ICachedItem = this.storage[key];\n\t\tlet value: any;\n\n\t\t// Does item exist?\n\t\tif (!item) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Check if it's a 0 expiration (first-access)\n\t\telse if (item.ttl === 0) {\n\t\t\tvalue = item.value;\n\t\t\tthis.delete(key);\n\t\t}\n\n\t\t// Check if it's healthy within the TTL\n\t\telse if (this.isCachedItemHealthy(item)) {\n\t\t\tvalue = item.value;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Checks whether or not a cached item exists at all without\n\t * regard to the TTL\n\t *\n\t * @param string key\n\t * @return boolean\n\t */\n\tpublic exists(key: string): boolean {\n\t\treturn this.storage[key] !== undefined;\n\t}\n\n\t/**\n\t * Checks if we have a cached item within our TTL\n\t *\n\t * @param string key\n\t * @return boolean\n\t */\n\tpublic has(key: string): boolean {\n\t\treturn this.get(key) !== undefined;\n\t}\n\n\t/**\n\t * Returns false if trying to overwrite existing cache when\n\t * overwrite is set to false\n\t *\n\t * @param string key\n\t * @param any value\n\t * @param number ttl\n\t * @param boolean overwrite\n\t * @return boolean\n\t */\n\tpublic set(key: string, value: any, ttl: number = 0, immutable: boolean = false): boolean {\n\t\tconst hasItem: boolean = this.has(key);\n\t\tconst time: number = Date.now();\n\n\t\t// Do not overwrite existing item\n\t\tif (hasItem && this.isImmutable(key)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Set cache\n\t\tthis.storage[key] = {\n\t\t\timmutable,\n\t\t\ttime,\n\t\t\tttl,\n\t\t\tvalue,\n\t\t};\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @param ICachedItem item\n\t * @return boolean\n\t */\n\tprivate isCachedItemHealthy(item: ICachedItem): boolean {\n\t\tconst now: number = Date.now();\n\t\tconst then: number = item.time;\n\t\tconst ttl: number = item.ttl;\n\n\t\treturn then + ttl > now;\n\t}\n\n\t/**\n\t * @param string key\n\t * @return boolean\n\t */\n\tprivate isImmutable(key: string): boolean {\n\t\tconst item: ICachedItem = this.storage[key];\n\t\treturn !!item?.immutable;\n\t}\n}\n", "import Easing, { getEasingMethod } from './Easing';\n\nexport interface IVector {\n\tx: number;\n\ty: number;\n}\n\n/**\n * Earth radius in kilometers\n * @type number\n */\nexport const EARTH_RADIUS = 6371;\n\n/**\n * For converting feet to meters\n * @type number\n */\nexport const FOOT_METER_RATIO = 3.28084;\n\n/**\n * For converting miles per hour to meters per second\n * @type number\n */\nexport const MPH_METER_RATIO = 0.44704;\n\n/**\n * @param number x1\n * @param number y1\n * @param number x2\n * @param number y2\n * @returns number\n */\nexport function angle(x1: number, y1: number, x2: number, y2: number): number {\n\treturn Math.atan2(y2 - y1, x2 - x1);\n}\n\n/**\n * @param number x1\n * @param number y1\n * @param number x2\n * @param number y2\n * @returns number\n */\nexport function angleAsDegrees(x1: number, y1: number, x2: number, y2: number): number {\n\treturn (angle(x1, y1, x2, y2) * 180) / Math.PI;\n}\n\n/**\n * @param number a\n * @param number b\n * @returns number\n */\nexport function angleDifference(a: number, b: number): number {\n\treturn Math.atan2(Math.sin(b - a), Math.cos(b - a));\n}\n\n/**\n * @param number a\n * @param number b\n * @returns number\n */\nexport function angleDifferenceAsDegrees(a: number, b: number): number {\n\treturn (angleDifference(a, b) * 180) / Math.PI;\n}\n\n/**\n * Returns angle in radians\n *\n * @param IVector vector\n * @returns number\n */\nexport function angleFromVector(vector: IVector): number {\n\treturn Math.atan2(vector.y, vector.x);\n}\n\n/**\n * Returns angle in radians\n *\n * @param IVector vectorA\n * @param IVector vectorB\n * @returns number\n */\nexport function angleFromVectors(vectorA: IVector, vectorB: IVector): number {\n\treturn Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);\n}\n\n/**\n * @param number angle\n * @returns number\n */\nexport function angleNormalize(angle: number): number {\n\tangle = angle % 360;\n\tif (angle < 0) angle += 360;\n\treturn angle;\n}\n\n/**\n * Clamp\n *\n * @param number value\n * @param number min\n * @param number max\n * @returns number\n */\nexport function clamp(value: number, min: number, max: number): number {\n\treturn Math.min(Math.max(value, min), max);\n}\n\n/**\n * Clamp, unsigned\n *\n * @param number value\n * @param number min\n * @param number max\n * @returns number\n */\nexport function clampUnsigned(value: number, min: number, max: number): number {\n\t// Ensure min is less than max\n\t[min, max] = [Math.min(min, max), Math.max(min, max)];\n\n\t// Clamp the absolute value within the range, then restore the sign\n\treturn Math.sign(value) * Math.min(Math.abs(value), Math.abs(value) > min ? max : min);\n}\n\n/**\n * Convert degrees to slope\n *\n * @param number degrees\n * @returns number\n */\nexport function degreesToSlope(degrees: number): number {\n\treturn Math.tan(degrees * (Math.PI / 180));\n}\n\n/**\n * @param number value\n * @param number min\n * @param number max\n * @param boolean useClamp\n * @returns number\n */\nexport function denormalize(value: number, min: number, max: number, useClamp: boolean = false): number {\n\tlet output = value * (max - min) + min;\n\n\tif (useClamp) {\n\t\toutput = clamp(output, min, max);\n\t}\n\n\treturn output;\n}\n\n/**\n * @param number x1\n * @param number y1\n * @param number x2\n * @param number y2\n * @returns number\n */\nexport function distance(x1: number, y1: number, x2: number, y2: number): number {\n\treturn Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);\n}\n\n/**\n * Dot product of two vectors\n *\n * @param number x1\n * @param number y1\n * @param number x2\n * @param number y2\n * @returns number\n */\nexport function dot(x1: number, y1: number, x2: number, y2: number): number {\n\treturn x1 * x2 + y1 * y2;\n}\n\n/**\n * @param number feet\n * @returns number\n */\nexport function feetToMeters(feet: number): number {\n\treturn feet / FOOT_METER_RATIO;\n}\n\n/**\n * Inverse Lerp\n *\n * Finding the progress between two values given a specific value within that\n * range. For instance, determining how far along a player has moved between\n * two checkpoints\n *\n * const checkpointStart = 0;\n * const checkpointEnd = 100;\n * const playerPosition = 75; // Example player position\n * const progress = inverseLerp(checkpointStart, checkpointEnd, playerPosition);\n *\n * @param number a\n * @param number b\n * @param number value\n * @returns number\n */\nexport function inverseLerp(a: number, b: number, value: number): number {\n\treturn (value - a) / (b - a);\n}\n\n/**\n * Lerp\n *\n * @param number a\n * @param number b\n * @param number t\n * @returns number\n */\nexport function lerp(a: number, b: number, t: number): number {\n\treturn a + (b - a) * t;\n}\n\n/**\n * This is useful incrementing smaller values over a larger period of time\n * and larger values over a smaller period of time. It helps linearize\n * something like increasing the volume on a tv or zooming into a canvas.\n *\n * @param number startValue\n * @param number delta\n * @param number increment\n * @returns number\n */\nexport function logarithmicZoom(startValue: number, delta: number, increment: number = 0.025): number {\n\tconst currentZoomLog = Math.log(startValue);\n\n\t// Apply the logarithmic scale to the zoom amount.\n\t// The base for the logarithm (e.g., 2) can be adjusted to control the scaling effect.\n\tconst amountLog = Math.log(delta + 1) || 0;\n\n\t// Calculate new zoom value in log scale and convert it back\n\tlet newZoom = Math.exp(currentZoomLog + amountLog * increment);\n\n\t// Update the state with the new zoom level\n\treturn newZoom;\n}\n\n/**\n * @param number meters\n * @return number\n */\nexport function metersToFeet(meters: number): number {\n\treturn meters * FOOT_METER_RATIO;\n}\n\n/**\n * @param number value\n * @param number min\n * @param number max\n * @returns number\n */\nexport function minMax(value: number, min: number, max: number): number {\n\treturn clamp(value, min, max);\n}\n\n/**\n * @param number value\n * @param number min\n * @param number max\n * @returns number\n */\nexport function minMaxUnsigned(value: number, min: number, max: number): number {\n\treturn clampUnsigned(value, min, max);\n}\n\n/**\n * Convert miles per hour to meters per second\n *\n * @param number mph\n * @return number\n */\nexport function mphToMs(mph: number): number {\n\treturn mph * MPH_METER_RATIO;\n}\n\n/**\n * Convert meters per second to miles per hour\n *\n * @param number ms\n * @returns number\n */\nexport function msToMph(ms: number): number {\n\treturn ms / MPH_METER_RATIO;\n}\n\n/**\n * @param number value\n * @param number min\n * @param number max\n * @param boolean useClamp\n * @returns number\n */\nexport function normalize(value: number, min: number, max: number, useClamp: boolean = false): number {\n\tlet output = (value - min) / (max - min);\n\n\tif (useClamp) {\n\t\toutput = clamp(output, min, max);\n\t}\n\n\treturn output;\n}\n\n/**\n * Remap\n *\n * Converting a value from one scale to another. For example, mapping a temperature value from Celsius to Fahrenheit.\n *\n * const celsiusTemperature = 20; // Example temperature in Celsius\n * const minCelsius = -20;\n * const maxCelsius = 40;\n * const minFahrenheit = 32;\n * const maxFahrenheit = 104;\n * const fahrenheitTemperature = remap(celsiusTemperature, minCelsius, maxCelsius, minFahrenheit, maxFahrenheit);\n *\n * @param number value\n * @param number a\n * @param number b\n * @param number c\n * @param number d\n * @returns number\n */\nexport function remap(value: number, a: number, b: number, c: number, d: number): number {\n\treturn c + (d - c) * inverseLerp(a, b, value);\n}\n\n/**\n * Random Range\n *\n * @param number min\n * @param number max\n * @returns number\n */\nexport function randomRange(min: number, max: number): number {\n\treturn lerp(min, max, Math.random());\n}\n\n/**\n * Random Int\n *\n * @param number min\n * @param number max\n * @returns number\n */\nexport function randomInt(min: number, max: number): number {\n\treturn Math.floor(randomRange(min, max + 1));\n}\n\n/**\n * Random Sign\n *\n * @returns number\n */\nexport function randomSign(): number {\n\treturn Math.random() < 0.5 ? -1 : 1;\n}\n\n/**\n * @param number x\n * @param number y\n * @param number angle\n * @returns [number, number]\n */\nexport function rotate(x: number, y: number, angle: number): [number, number] {\n\tconst s = Math.sin(angle);\n\tconst c = Math.cos(angle);\n\treturn [x * c - y * s, x * s + y * c];\n}\n\n/**\n * @param number x\n * @param number y\n * @param number angle\n * @returns [number, number]\n */\nexport function rotateDeg(x: number, y: number, angle: number): [number, number] {\n\treturn rotate(x, y, (angle * Math.PI) / 180);\n}\n\n/**\n * @param number value\n * @param number decimals\n * @return number\n */\nexport function round(value: number, decimals: number = 2): number {\n\treturn Number(value.toFixed(decimals));\n}\n\n/**\n * Round to nearest number\n *\n * @param number value\n * @param number nearest\n * @returns number\n */\nexport function roundToNearest(value: number, nearest: number): number {\n\treturn Math.round(value / nearest) * nearest;\n}\n\n/**\n * Round to nearest fraction\n *\n * @param number value\n * @param number fraction\n * @returns number\n */\nexport function roundToNearestFraction(value: number, fraction: number): number {\n\treturn Math.round(value * fraction) / fraction;\n}\n\n/**\n * Round to decimal\n *\n * @param number value\n * @param number decimals\n * @returns number\n */\nexport function roundToDecimal(value: number, decimals: number): number {\n\treturn Math.round(value * 10 ** decimals) / 10 ** decimals;\n}\n\n/**\n * Convert slope to degrees\n *\n * @param number slope\n * @returns number\n */\nexport function slopeToDegrees(slope: number): number {\n\treturn Math.atan(slope) * (180 / Math.PI);\n}\n\n/**\n * Smoothstep\n *\n * Creating smooth transitions in animations or camera movements\n *\n * const startValue = 0;\n * const endValue = 100;\n * const currentValue = 75; // Example current value\n * const smoothedValue = smoothstep(startValue, endValue, currentValue);\n * console.log(smoothedValue); // Output: 0.75\n *\n * @param number min\n * @param number max\n * @param number value\n * @returns number\n */\nexport function smoothstep(min: number, max: number, value: number): number {\n\tconst x = clamp((value - min) / (max - min), 0, 1);\n\treturn x * x * (3 - 2 * x);\n}\n\n/**\n * Smootherstep\n *\n * @param number min\n * @param number max\n * @param number value\n * @returns number\n */\nexport function smootherstep(min: number, max: number, value: number): number {\n\tconst x = clamp((value - min) / (max - min), 0, 1);\n\treturn x * x * x * (x * (x * 6 - 15) + 10);\n}\n\n/**\n * Convert degrees to radians\n *\n * @param number degrees\n * @returns number\n */\nexport function toRadians(degrees: number): number {\n\treturn (degrees * Math.PI) / 180;\n}\n\n/**\n * Convert radians to degrees\n *\n * @param number radians\n * @returns number\n */\nexport function toDegrees(radians: number): number {\n\treturn (radians * 180) / Math.PI;\n}\n\n/**\n * Converts a normalized number like 0 - 1 into a ramped range, like 0 - 1 - 0.\n *\n * It's useful for having something enter early, hold, then exit. If we do\n * by = 4, it will enter at 0.25, hold until 0.75, then exit.\n *\n * Example:\n *\n * \tconst newRatio = transformRatio(ratio, 4, 'easeInQuad', 'easeOutQuad');\n *\n * @param number ratio\n * @param number by\n * @param string easeInFunction\n * @param string easeOutFunction\n * @return number\n */\nexport function transformRatio(ratio: number, by: number = 4, easeInFunction: string = 'linear', easeOutFunction: string = ''): number {\n\tif (!easeOutFunction) {\n\t\teaseOutFunction = easeInFunction;\n\t}\n\n\tconst easeInMethod = getEasingMethod(easeInFunction);\n\tconst easeOutMethod = getEasingMethod(easeOutFunction);\n\n\tif (ratio <= 1 / by) {\n\t\treturn easeInMethod(ratio / (1 / by));\n\t} else if (ratio <= 1 - 1 / by) {\n\t\treturn 1;\n\t} else {\n\t\treturn easeOutMethod((1 - ratio) / (1 / by));\n\t}\n}\n\n// export function transformRatio(ratio: number, by: number = 4, easing: string = 'linear'): number {\n// \tconst easingMethod = getEasingMethod(easing);\n\n// \treturn ratio <= 1 / by ? by * ratio : ratio <= 1 - 1 / by ? 1 : by - by * ratio;\n// }\n", "/**\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @package Library\n * @project ChalkySticks SDK Core\n */\nexport class EasingFunction {\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic linear(t: number): number {\n\t\treturn t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInQuad(t: number): number {\n\t\treturn t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutQuad(t: number): number {\n\t\treturn t * (2 - t);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutQuad(t: number): number {\n\t\treturn t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInCubic(t: number): number {\n\t\treturn t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutCubic(t: number): number {\n\t\treturn --t * t * t + 1;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutCubic(t: number): number {\n\t\treturn t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInQuart(t: number): number {\n\t\treturn t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutQuart(t: number): number {\n\t\treturn 1 - --t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutQuart(t: number): number {\n\t\treturn t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInQuint(t: number): number {\n\t\treturn t * t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutQuint(t: number): number {\n\t\treturn 1 + --t * t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutQuint(t: number): number {\n\t\treturn t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInSine(t: number): number {\n\t\treturn 1 - Math.cos((t * Math.PI) / 2);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutSine(t: number): number {\n\t\treturn Math.sin((t * Math.PI) / 2);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutSine(t: number): number {\n\t\treturn -(Math.cos(Math.PI * t) - 1) / 2;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInExpo(t: number): number {\n\t\treturn t === 0 ? 0 : Math.pow(2, 10 * (t - 1));\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutExpo(t: number): number {\n\t\treturn t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutExpo(t: number): number {\n\t\tif (t === 0) return 0;\n\t\tif (t === 1) return 1;\n\t\tif ((t *= 2) < 1) return 0.5 * Math.pow(2, 10 * (t - 1));\n\t\treturn 0.5 * (-Math.pow(2, -10 * --t) + 2);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInCirc(t: number): number {\n\t\treturn -(Math.sqrt(1 - t * t) - 1);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutCirc(t: number): number {\n\t\treturn Math.sqrt(1 - --t * t);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutCirc(t: number): number {\n\t\tif ((t /= 0.5) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\t\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInBack(t: number, s: number = 1.70158): number {\n\t\treturn t * t * ((s + 1) * t - s);\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeOutBack(t: number, s: number = 1.70158): number {\n\t\treturn --t * t * ((s + 1) * t + s) + 1;\n\t}\n\n\t/**\n\t * @param number t\n\t * @returns number\n\t */\n\tstatic easeInOutBack(t: number, s: number = 1.70158): number {\n\t\tif ((t /= 0.5) < 1) return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n\t\treturn 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n\t}\n}\n\n/**\n * Usage:\n *\n * \t// Normalize inOutQuad 0.0 - 1.0 when a value is 0.0 - 0.5\n * \tthis.positions.microsoftPanel.width = 50 + Easing.easeInOutQuad(ratio.idle, 0.0, 0.5) * 50;\n *\n * Available Easings:\n *\n * \tlinear\n * \teaseInQuad\n * \teaseOutQuad\n * \teaseInOutQuad\n * \teaseInQuart\n * \teaseOutQuart\n * \teaseInOutQuart\n * \teaseInQuint\n * \teaseOutQuint\n * \teaseInOutQuint\n * \teaseInCubic\n * \teaseOutCubic\n * \teaseInOutCubic\n * \teaseInSine\n * \teaseOutSine\n * \teaseInOutSine\n * \teaseInExpo\n * \teaseOutExpo\n * \teaseInOutExpo\n * \teaseInCirc\n * \teaseOutCirc\n * \teaseInOutCirc\n * \teaseInBack\n * \teaseOutBack\n * \teaseInOutBack\n *\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @package Lib\n * @project Microsoft Case Study\n */\nexport default class Easing {\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic linear(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.linear, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInQuad(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInQuad, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutQuad(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutQuad, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutQuad(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutQuad, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInQuart(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInQuart, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutQuart(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutQuart, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutQuart(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutQuart, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInQuint(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInQuint, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutQuint(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutQuint, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutQuint(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutQuint, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInCubic(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInCubic, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutCubic(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutCubic, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutCubic(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutCubic, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInSine(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInSine, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutSine(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutSine, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutSine(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutSine, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInExpo(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInExpo, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutExpo(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutExpo, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutExpo(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutExpo, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInCirc(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInCirc, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutCirc(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutCirc, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutCirc(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutCirc, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInBack(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInBack, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeOutBack(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeOutBack, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param boolean clamp\n\t * @return number\n\t */\n\tstatic easeInOutBack(value: number, min: number = 0, max: number = 1, clamp: boolean = true): number {\n\t\treturn Easing.normalize(value, min, max, EasingFunction.easeInOutBack, clamp);\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @param (t: number) => number easingFn\n\t * @param boolean clamp\n\t * @returns number\n\t */\n\tstatic normalize(value: number, min: number = 0, max: number = 1, easingFn: (t: number) => number, clamp: boolean = true): number {\n\t\tlet t: number = Easing.clamp((value - min) / (max - min), 0, 1);\n\t\tlet output: number = clamp ? easingFn(t) : min + (max - min) * easingFn(t);\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @param number value\n\t * @param number min\n\t * @param number max\n\t * @returns number\n\t */\n\tstatic clamp(value: number, min: number = 0, max: number = 1): number {\n\t\treturn Math.min(Math.max(value, min), max);\n\t}\n}\n\n/**\n * @param string type\n * @return (t: number) => number\n */\nexport function getEasingMethod(type: string) {\n\tif (Easing.hasOwnProperty(type)) {\n\t\treturn (Easing as any)[type];\n\t}\n\n\treturn Easing.easeInOutQuad;\n}\n", "import * as Event from '../Event/index.js';\n\n/**\n * Share is a class that allows you to pass media to your\n * native share dialog, e.g. instagram, facebook, etc.\n *\n * Example Usage:\n *\n * \tShare.native([file], 'My Title', 'My Text', 'https://myurl.com');\n *\n * \tShare.remoteFile('https://myurl.com/image.jpg', 'My Title', 'My Text', 'https://myurl.com');\n *\n * @author Matt Kenefick<matt.kenefick@buck.co>\n * @project BUCK Utility\n */\n\n/**\n * @param File[] selectedFiles\n * @param string title\n * @param string text\n * @param string url\n * @return Promise<boolean>\n */\nexport async function native(files: File[] = [], title: string = '', text: string = '', url: string = ''): Promise<boolean> {\n\tlet shareData = {\n\t\tfiles,\n\t\ttext,\n\t\ttitle,\n\t\turl,\n\t};\n\n\t// Check if this browser supports share\n\tif (hasSupport() === false) {\n\t\tthrow new Error('This browser does not support navigator share');\n\t}\n\n\t// Check if we have ability\n\tif (canShare() === false) {\n\t\tthrow new Error('Sharing is not supported, make sure you are on HTTPS');\n\t}\n\n\t// Check if we are capable of sharing this data\n\tif (!navigator.canShare(shareData)) {\n\t\treturn false;\n\t}\n\n\t// Attempt to share data\n\tawait navigator.share(shareData);\n\n\t// Assume success\n\treturn true;\n}\n\n/**\n * @param string remoteFileUrl\n * @param string title\n * @param string text\n * @param string url\n * @return Promise<File>\n */\nexport async function remoteFile(remoteFileUrl: string, title: string = '', text: string = '', url: string = ''): Promise<boolean> {\n\t// Fetch the file\n\tconst file: File = await fetchRemoteImage(remoteFileUrl);\n\n\t// Share\n\treturn native([file], title, text, url);\n}\n\n/**\n * @return boolean\n */\nexport function hasSupport(): boolean {\n\treturn 'share' in navigator;\n}\n\n/**\n * @return boolean\n */\nexport function canShare(): boolean {\n\treturn hasSupport() && !!navigator.canShare;\n}\n\n/**\n * @param string url\n * @param string filename\n * @return File\n */\nasync function fetchRemoteImage(url: string = '', filename: string = 'my-file.png'): Promise<File> {\n\t// Use default image if one is not set\n\tif (!url) {\n\t\turl = 'https://cdn.glitch.com/f96f78ec-d35d-447b-acf4-86f2b3658491%2Fchuck.png?v=1618311092497';\n\t}\n\n\t// Fetch remote file as a blob\n\tconst blob = await fetch(url).then((response) => response.blob());\n\n\t// Convert blob to File\n\tconst mimeType = blob.type.split(';').shift();\n\tconst file = new File([blob], filename, {\n\t\ttype: mimeType,\n\t});\n\n\treturn file;\n}\n", "const debouncerInstances: any = {};\n\n/**\n * Debounce (Inclusive)\n *\n * Prevents a function from being fired too often by determining\n * a difference in time from the last time in which it was fired.\n *\n * Applies inclusive techniques to execute functions one last time.\n *\n * Example Usage:\n *\n * \tfunction foo() {\n * \t\tconsole.log('foo');\n * \t}\n *\n * \tconst debouncedFoo = new Debounce(foo, 1000);\n *\n * \tdebouncedFoo.run();\n *\n * \tsetInterval(() => {\n * \t\tdebouncedFoo.run();\n * \t}, 1000 / 30);\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package ChalkySticks SDK Core\n */\nexport class Debounce {\n\t/**\n\t * Statically call a debounced method and infer its categorization\n\t *\n\t * @return void\n\t */\n\tpublic static exec(reference: symbol | string, callable: () => void, timeout: number = 1000, inclusive: boolean = false, args: any[] = []): void {\n\t\tif (!debouncerInstances[reference]) {\n\t\t\tconst debouncer = new Debounce(callable, timeout, true, inclusive);\n\t\t\tdebouncerInstances[reference] = debouncer.run;\n\t\t}\n\n\t\tdebouncerInstances[reference](...args);\n\t}\n\n\t/**\n\t * Debounced function\n\t *\n\t * @type function\n\t */\n\tpublic callback: () => void;\n\n\t/**\n\t * Time in between triggers\n\t *\n\t * @type number\n\t */\n\tpublic threshold: number;\n\n\t/**\n\t * If we should trigger a future event after run call\n\t *\n\t * @type boolean\n\t */\n\tprivate inclusive: boolean = false;\n\n\t/**\n\t * Last time this function was triggered\n\t *\n\t * @type number\n\t */\n\tprivate lastTrigger: number = 0;\n\n\t/**\n\t * Timeout for calling future events\n\t *\n\t * @type number\n\t */\n\tprivate timeout: number = 0;\n\n\t/**\n\t * @param function callback\n\t * @param number threshold\n\t * @param boolean immediate\n\t * @param boolean inclusive\n\t * @return function\n\t */\n\tpublic constructor(callback: () => void, threshold: number = 200, immediate: boolean = false, inclusive: boolean = false) {\n\t\tthis.callback = callback;\n\t\tthis.inclusive = inclusive;\n\t\tthis.threshold = threshold;\n\n\t\t// Don't execute on first pass; only after threshold waits\n\t\t// Disable this if you want immediate execution as well as inclusive\n\t\tif (!inclusive) {\n\t\t\tthis.lastTrigger = Date.now();\n\t\t}\n\n\t\t// Bind callback to this class\n\t\tthis.run = this.run.bind(this);\n\t}\n\n\t/**\n\t * Executable function\n\t *\n\t * @param boolean wasInclusive\n\t * @return void\n\t */\n\tpublic run(wasInclusive: boolean = false): void {\n\t\tconst now: number = Date.now();\n\t\tconst diff: number = now - this.lastTrigger;\n\n\t\t// Execute Immediately\n\t\tif (diff > this.threshold) {\n\t\t\tthis.lastTrigger = now;\n\n\t\t\t// @ts-ignore\n\t\t\tthis.callback.apply(null, arguments);\n\t\t}\n\n\t\t// mk: We might want to turn this into an await sleep() then call .run()\n\t\t// directly. When making extensions, the setTimeout runs eval to call the\n\t\t// function which violates unsafe-eval for Trusted Types.\n\n\t\t// Cancel future event, if exists\n\t\tif (this.timeout !== 0) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = 0;\n\t\t}\n\n\t\t// Create future event\n\t\tif (this.inclusive && !wasInclusive) {\n\t\t\t// @ts-ignore\n\t\t\tthis.timeout = setTimeout(() => this.run(true), this.threshold);\n\t\t}\n\t}\n}\n", "import Constants from '../Common/Constants';\n\n/**\n * @return number\n */\nexport function documentHeight(): number {\n\treturn Math.max(\n\t\tdocument.body.scrollHeight,\n\t\tdocument.body.offsetHeight,\n\t\tdocument.documentElement.clientHeight,\n\t\tdocument.documentElement.scrollHeight,\n\t\tdocument.documentElement.offsetHeight,\n\t);\n}\n\n/**\n * @param string variableName\n * @param HTMLElement element\n * @return string\n */\nexport function getCSSVariable(variableName: string, element: HTMLElement = document.documentElement): string {\n\tconst value = getComputedStyle(element).getPropertyValue(variableName).trim();\n\treturn value;\n}\n\n/**\n * @return Promise<void>\n */\nexport function getDate(dateString: string = ''): Date {\n\tdateString || (dateString = Constants.CURRENT_DATE);\n\n\treturn dateString ? new Date(dateString) : new Date();\n}\n\n/**\n * @param HTMLElement element\n * @return number\n */\nexport function offsetLeft(element: HTMLElement): number {\n\tlet offset = 0;\n\n\tdo {\n\t\toffset += element.offsetLeft;\n\t\telement = element.offsetParent as HTMLElement;\n\t} while (element);\n\n\treturn offset;\n}\n\n/**\n * @param HTMLElement element\n * @return number\n */\nexport function offsetHeight(element: HTMLElement): number {\n\treturn element.offsetHeight;\n}\n\n/**\n * @param HTMLElement element\n * @return number\n */\nexport function offsetTop(element: HTMLElement): number {\n\tlet offset = 0;\n\n\tdo {\n\t\toffset += element.offsetTop;\n\t\telement = element.offsetParent as HTMLElement;\n\t} while (element);\n\n\treturn offset;\n}\n\n/**\n * @param HTMLElement element\n * @return number\n */\nexport function offsetWidth(element: HTMLElement): number {\n\treturn element.offsetWidth;\n}\n\n/**\n * Polyfill for requestAnimationFrame\n */\nexport const requestAnimationFrame =\n\ttypeof window !== 'undefined' && window.requestAnimationFrame\n\t\t? window.requestAnimationFrame.bind(window)\n\t\t: (callback: any) => setTimeout(() => callback(Date.now()), 16);\n\n/**\n * @param number ms\n * @return Promise<void>\n */\nexport function sleep(ms: number): Promise<void> {\n\treturn new Promise((resolve) => setTimeout(resolve, ms));\n}\n", "/**\n * Polyfill for requestAnimationFrame\n */\nexport const requestAnimationFrame =\n\ttypeof window !== 'undefined' && window.requestAnimationFrame\n\t\t? window.requestAnimationFrame.bind(window)\n\t\t: (callback: any) => setTimeout(() => callback(Date.now()), 16);\n", "import { requestAnimationFrame } from '../Common/Functions.js';\n\n/**\n * @type interface\n */\nexport interface IInterval {\n\texecutions: number;\n\tfps: number;\n\tfunc: (e: any) => any;\n\tlastTick?: number;\n\tname: string | symbol;\n\tstopAfter?: number;\n}\n\n/**\n * Interval is a single destination to manage multiple intervals\n * throughout an application.\n *\n * Example Usage:\n *\n * \timport Interval from '@/Utility/Interval';\n *\n * \tInterval.start();\n *\n *\n * Then you can add items as per:\n *\n * \tInterval.add(myMethod, 1000 / 30);\n *\n *\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @package ChalkySticks SDK Core\n */\nexport class Interval {\n\t// region: Static\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @type Interval\n\t */\n\tprivate static _instance: Interval;\n\n\t/**\n\t * @type Interval\n\t */\n\tpublic static get instance(): Interval {\n\t\tif (!this._instance) {\n\t\t\tthis._instance = new Interval();\n\t\t}\n\n\t\treturn this._instance;\n\t}\n\n\t/**\n\t * @param Function func\n\t * @param number fps\n\t * @param string | symbol name\n\t * @return string\n\t */\n\tpublic static add(optionsOrFunc: any, fps: number = 16, name: string | symbol = ''): string | symbol {\n\t\tlet func,\n\t\t\texecutions = 0,\n\t\t\tlastTick = 0,\n\t\t\tstopAfter = 0;\n\n\t\t// Default name\n\t\tname || (name = Math.random().toString(32).substr(2, 6));\n\n\t\t// Fix our deprecated arguments\n\t\tif (optionsOrFunc.hasOwnProperty('callback')) {\n\t\t\tfps = optionsOrFunc.fps || fps;\n\t\t\tfunc = optionsOrFunc.callback;\n\t\t\tname = optionsOrFunc.name || name;\n\t\t\tstopAfter = optionsOrFunc.stopAfter || 0;\n\t\t} else {\n\t\t\tfunc = optionsOrFunc;\n\t\t}\n\n\t\t// Start the interval\n\t\tthis.instance.unpause();\n\n\t\t// Add interval\n\t\tthis.instance.intervals.push({\n\t\t\texecutions,\n\t\t\tfps,\n\t\t\tfunc,\n\t\t\tlastTick,\n\t\t\tname,\n\t\t\tstopAfter,\n\t\t});\n\n\t\treturn name;\n\t}\n\n\t/**\n\t * @param string | symbol name\n\t * @param number fps\n\t * @param Function func\n\t * @return Interval\n\t */\n\tpublic static fps(name: string | symbol, fps: number, func: (e: any) => any): Interval {\n\t\tthis.instance.intervals.filter((interval: IInterval) => {\n\t\t\tif (interval.name === name) {\n\t\t\t\tinterval.fps = fps || interval.fps;\n\t\t\t\tinterval.func = func || interval.func;\n\t\t\t}\n\t\t});\n\n\t\treturn this.instance;\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic static list(): void {\n\t\tconsole.log(this.instance.intervals);\n\t}\n\n\t/**\n\t * @param string | symbol name\n\t * @return void\n\t */\n\tpublic static remove(name: string | symbol): void {\n\t\tthis.instance.intervals = this.instance.intervals.filter((interval: IInterval) => interval.name != name);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic static start(): void {\n\t\tthis.instance && this.instance.unpause();\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic static stop(): void {\n\t\tif (!this.instance) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.instance.pause();\n\t}\n\n\t// endregion: Static\n\n\t// region: Instance\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @type boolean\n\t */\n\tpublic enabled: boolean = false;\n\n\t/**\n\t * @type IInterval\n\t */\n\tpublic intervals: IInterval[] = [];\n\n\t/**\n\t * @type number\n\t */\n\tprotected lastFrameTime: number = 0;\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.Handle_OnRequestAnimationFrame = this.Handle_OnRequestAnimationFrame.bind(this);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tprotected pause(): void {\n\t\tthis.enabled = false;\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tprotected unpause(): void {\n\t\tthis.enabled = true;\n\n\t\t// Start loop\n\t\tthis.Handle_OnRequestAnimationFrame();\n\t}\n\n\t// endregion: Instance\n\n\t// region: Event Handlers\n\t// ---------------------------------------------------------------------------\n\n\t/**\n\t * @return Promise<void>\n\t */\n\tprotected async Handle_OnRequestAnimationFrame(): Promise<void> {\n\t\t// Do not process\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Diff\n\t\tconst now = Date.now();\n\n\t\t// Iterate through items\n\t\tthis.intervals.forEach((interval: IInterval) => {\n\t\t\tconst diff = now - (interval.lastTick || 0);\n\n\t\t\tif (diff > interval.fps) {\n\t\t\t\tif (interval.stopAfter && interval.executions >= interval.stopAfter) {\n\t\t\t\t\tInterval.remove(interval.name);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tinterval.func({});\n\t\t\t\tinterval.lastTick = now;\n\t\t\t\tinterval.executions++;\n\t\t\t}\n\t\t});\n\n\t\t// Mark last frame time\n\t\tthis.lastFrameTime = Date.now();\n\n\t\t// Request frame\n\t\trequestAnimationFrame(this.Handle_OnRequestAnimationFrame);\n\t}\n\n\t// endregion: Event Handlers\n}\n", "import { Event } from '../index.js';\nimport { Interval } from './Interval.js';\n\n/**\n * @interface IHysteresisOptions\n */\nexport interface IHysteresisOptions {\n\tcondition: () => boolean;\n\tthreshold?: number;\n\tduration?: number;\n}\n\n/**\n * Hysteresis implement a mechanism where a variable is set or unset\n * based on the consistent fulfillment of a condition over a specified\n * duration or number of occurrences, preventing rapid toggling in\n * response to transient changes.\n *\n * It broadcasts the following events:\n *\n * \t- set: when the variable is set\n * \t- unset: when the variable is unset\n * \t- change: when the variable is set or unset\n *\n * Example Usage:\n *\n * \timport Hysteresis from '@/Utility/Hysteresis';\n *\n *\t// Condition: turn heater on if temperature exceeds 70\u00B0C\n *\tconst temperatureControl = Utility.Hysteresis.add(\n * \t\t() => getTemperature() > 70,\n * \t);\n *\n * \ttemperatureControl.on('set', () => turnHeaterOn());\n * \ttemperatureControl.on('unset', () => turnHeaterOff())\n *\n * @author Matt Kenefick <matt@chalkysticks.com>\n * @package ChalkySticks SDK Core\n */\nexport class Hysteresis extends Event.Dispatcher {\n\t/**\n\t * @param IHysteresisOptions options\n\t * @return Hysteresis\n\t */\n\tpublic static add(options: IHysteresisOptions) {\n\t\tconst instance = new Hysteresis(options.condition, options.threshold || 1, options.duration || 25);\n\t\tinstance.start();\n\n\t\treturn instance;\n\t}\n\n\t/**\n\t * @param IHysteresisOptions options\n\t * @return Hysteresis\n\t */\n\tpublic static wait(options: IHysteresisOptions) {\n\t\tconst instance = new Hysteresis(options.condition, options.threshold || 1, options.duration || 25);\n\t\tinstance.start();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tinstance.once('change', (data) => {\n\t\t\t\tinstance.stop();\n\t\t\t\tresolve(data);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * @type number\n\t */\n\tprivate readonly threshold: number;\n\n\t/**\n\t * @type number\n\t */\n\tprivate readonly duration: number;\n\n\t/**\n\t * @type number\n\t */\n\tprivate conditionMetCount: number = 0;\n\n\t/**\n\t * @type number\n\t */\n\tprivate isVariableSet: boolean = false;\n\n\t/**\n\t * @type () => boolean\n\t */\n\tprivate condition: () => boolean;\n\n\t/**\n\t * @type string | symbol\n\t */\n\tprivate intervalName: string | symbol = '';\n\n\t/**\n\t * @param () => boolean condition\n\t * @param () => void onVariableSet\n\t * @param () => void onVariableUnset\n\t * @param number threshold\n\t * @param number duration\n\t */\n\tconstructor(condition: () => boolean, threshold: number = 20, duration: number = 2000) {\n\t\tsuper();\n\n\t\tthis.condition = condition;\n\t\tthis.threshold = threshold;\n\t\tthis.duration = duration;\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic reset() {\n\t\tthis.conditionMetCount = 0;\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic start() {\n\t\tthis.intervalName = Interval.add(() => this.checkCondition(), this.duration / this.threshold);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tpublic stop() {\n\t\tInterval.remove(this.intervalName);\n\t}\n\n\t/**\n\t * @return void\n\t */\n\tprotected checkCondition() {\n\t\tconst conditionMet = this.condition();\n\n\t\tif (conditionMet) {\n\t\t\tthis.conditionMetCount = Math.min(this.threshold, this.conditionMetCount + 1);\n\n\t\t\tif (this.conditionMetCount >= this.threshold && !this.isVariableSet) {\n\t\t\t\tthis.isVariableSet = true;\n\t\t\t\tthis.dispatch('set');\n\t\t\t\tthis.dispatch('change', {\n\t\t\t\t\tset: this.isVariableSet,\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.conditionMetCount = Math.max(0, this.conditionMetCount - 1);\n\n\t\t\tif (this.conditionMetCount <= 0 && this.isVariableSet) {\n\t\t\t\tthis.isVariableSet = false;\n\t\t\t\tthis.dispatch('unset');\n\t\t\t\tthis.dispatch('change', {\n\t\t\t\t\tset: this.isVariableSet,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n", "/**\n * @author Matt Kenefick<matt@chalkysticks.com>\n * @class String\n * @package Utility\n * @project ChalkySticks SDK Core\n */\nexport class String {\n\t/**\n\t * @param string str\n\t * @return string\n\t */\n\tpublic capitalize(str: string): string {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\t/**\n\t * Break paragraph into chunks of sentences at least 50 characters or more\n\t *\n\t * @param string paragraph\n\t * @param number chunkSize\n\t * @return string[]\n\t */\n\tpublic chunkSentences(paragraph: string, chunkSize: number = 130): string[] {\n\t\tconst sentences: string[] = paragraph.replace(/\\.$/, '').split('. ');\n\t\tconst chunks: string[] = [];\n\n\t\tsentences.forEach((sentence: string) => {\n\t\t\tif (chunks.length === 0 || chunks[chunks.length - 1].length > chunkSize) {\n\t\t\t\tchunks.push(sentence + '.');\n\t\t\t} else {\n\t\t\t\tsentence = sentence.trim();\n\n\t\t\t\tchunks[chunks.length - 1] += ` ${sentence}.`;\n\t\t\t}\n\t\t});\n\n\t\treturn chunks;\n\t}\n\n\t/**\n\t * @param string str\n\t * @param number length\n\t * @return string\n\t */\n\tpublic truncate(str: string, length: number = 30): string {\n\t\treturn str.length > length ? str.slice(0, length).trim() + '...' : str;\n\t}\n\n\t/**\n\t * @param string paragraph\n\t * @param number targetCharacters\n\t * @return string\n\t */\n\tpublic trimSentences(paragraph: string, targetCharacters: number = 500): string {\n\t\tconst periodIndex = paragraph.indexOf('.', targetCharacters);\n\t\treturn paragraph.substr(0, periodIndex > 0 ? periodIndex + 1 : paragraph.length);\n\t}\n}\n\nexport default new String();\n", "import * as Event from '../Event';\n\n/**\n * @class Core\n * @package Common\n * @project ChalkySticks SDK Core\n */\nexport class Core extends Event.Dispatcher {}\n", "declare global {\n\tinterface Window {\n\t\tChalkySticks: any;\n\t}\n}\n\nexport { default as ChalkySticks } from './ChalkySticks';\n\nexport * as Collection from './Collection';\nexport * as Event from './Event';\nexport * as Exception from './Exception';\nexport * as Factory from './Factory';\nexport * as Input from './Input';\nexport * as Model from './Model';\nexport * as Provider from './Provider';\nexport * as Utility from './Utility';\n\nexport { Core } from './Common/Core';\nexport { default as Environment } from './Common/Environment';\nexport { default as Constants } from './Common/Constants';\n\nexport { IDispatcher } from './Event/Dispatcher.js';\nexport { IDispatcherEvent, TDispatcherCallback, TDispatcherData } from './Event/DispatcherEvent.js';\nexport { IHysteresisOptions } from './Utility/Hysteresis.js';\n\n// I think exporting the interfaces here might have been an issue\n\nexport { Request } from 'restmc';\n\nexport const Version = '1.15.0';\n"],
  "mappings": "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",
  "names": ["Builder", "activeRecord", "baseUrl", "endpoint", "queryParamStr", "isModified", "modifiedBefore", "modifiedAfter", "urlBuilder", "_a", "_c", "_b", "key", "str", "entryA", "entryB", "entry", "index", "value", "id", "exports", "DispatcherEvent", "eventName", "detail", "callbacks", "fires", "event", "callback", "value", "index", "exports", "DispatcherEvent_js_1", "Dispatcher", "name", "detail", "event", "eventName", "callback", "exports", "Dispatcher_js_1", "Core", "options", "exports", "require_browser", "__commonJSMin", "exports", "module", "require_bind", "__commonJSMin", "exports", "module", "fn", "thisArg", "args", "i", "require_utils", "__commonJSMin", "exports", "module", "bind", "toString", "isArray", "val", "isUndefined", "isBuffer", "isArrayBuffer", "isFormData", "isArrayBufferView", "result", "isString", "isNumber", "isObject", "isPlainObject", "prototype", "isDate", "isFile", "isBlob", "isFunction", "isStream", "isURLSearchParams", "trim", "str", "isStandardBrowserEnv", "forEach", "obj", "fn", "i", "l", "key", "merge", "assignValue", "extend", "a", "b", "thisArg", "stripBOM", "content", "require_buildURL", "__commonJSMin", "exports", "module", "utils", "encode", "val", "url", "params", "paramsSerializer", "serializedParams", "parts", "key", "v", "hashmarkIndex", "require_InterceptorManager", "__commonJSMin", "exports", "module", "utils", "InterceptorManager", "fulfilled", "rejected", "options", "id", "fn", "h", "require_normalizeHeaderName", "__commonJSMin", "exports", "module", "utils", "headers", "normalizedName", "value", "name", "require_enhanceError", "__commonJSMin", "exports", "module", "error", "config", "code", "request", "response", "require_createError", "__commonJSMin", "exports", "module", "enhanceError", "message", "config", "code", "request", "response", "error", "require_settle", "__commonJSMin", "exports", "module", "createError", "resolve", "reject", "response", "validateStatus", "require_cookies", "__commonJSMin", "exports", "module", "utils", "name", "value", "expires", "path", "domain", "secure", "cookie", "match", "require_isAbsoluteURL", "__commonJSMin", "exports", "module", "url", "require_combineURLs", "__commonJSMin", "exports", "module", "baseURL", "relativeURL", "require_buildFullPath", "__commonJSMin", "exports", "module", "isAbsoluteURL", "combineURLs", "baseURL", "requestedURL", "require_parseHeaders", "__commonJSMin", "exports", "module", "utils", "ignoreDuplicateOf", "headers", "parsed", "key", "val", "i", "line", "require_isURLSameOrigin", "__commonJSMin", "exports", "module", "utils", "msie", "urlParsingNode", "originURL", "resolveURL", "url", "href", "requestURL", "parsed", "require_xhr", "__commonJSMin", "exports", "module", "utils", "settle", "cookies", "buildURL", "buildFullPath", "parseHeaders", "isURLSameOrigin", "createError", "config", "resolve", "reject", "requestData", "requestHeaders", "responseType", "request", "username", "password", "fullPath", "onloadend", "responseHeaders", "responseData", "response", "timeoutErrorMessage", "xsrfValue", "val", "key", "cancel", "require_defaults", "__commonJSMin", "exports", "module", "utils", "normalizeHeaderName", "enhanceError", "DEFAULT_CONTENT_TYPE", "setContentTypeIfUnset", "headers", "value", "getDefaultAdapter", "adapter", "stringifySafely", "rawValue", "parser", "encoder", "e", "defaults", "data", "transitional", "silentJSONParsing", "forcedJSONParsing", "strictJSONParsing", "status", "method", "require_transformData", "__commonJSMin", "exports", "module", "utils", "defaults", "data", "headers", "fns", "context", "fn", "require_isCancel", "__commonJSMin", "exports", "module", "value", "require_dispatchRequest", "__commonJSMin", "exports", "module", "utils", "transformData", "isCancel", "defaults", "throwIfCancellationRequested", "config", "method", "adapter", "response", "reason", "require_mergeConfig", "__commonJSMin", "exports", "module", "utils", "config1", "config2", "config", "valueFromConfig2Keys", "mergeDeepPropertiesKeys", "defaultToConfig2Keys", "directMergeKeys", "getMergedValue", "target", "source", "mergeDeepProperties", "prop", "axiosKeys", "otherKeys", "key", "require_package", "__commonJSMin", "exports", "module", "require_validator", "__commonJSMin", "exports", "module", "pkg", "validators", "type", "i", "thing", "deprecatedWarnings", "currentVerArr", "isOlderVersion", "version", "thanVersion", "pkgVersionArr", "destVer", "validator", "message", "isDeprecated", "formatMessage", "opt", "desc", "value", "opts", "assertOptions", "options", "schema", "allowUnknown", "keys", "result", "require_Axios", "__commonJSMin", "exports", "module", "utils", "buildURL", "InterceptorManager", "dispatchRequest", "mergeConfig", "validator", "validators", "Axios", "instanceConfig", "config", "transitional", "requestInterceptorChain", "synchronousRequestInterceptors", "interceptor", "responseInterceptorChain", "promise", "chain", "newConfig", "onFulfilled", "onRejected", "error", "method", "url", "data", "require_Cancel", "__commonJSMin", "exports", "module", "Cancel", "message", "require_CancelToken", "__commonJSMin", "exports", "module", "Cancel", "CancelToken", "executor", "resolvePromise", "resolve", "token", "message", "cancel", "c", "require_spread", "__commonJSMin", "exports", "module", "callback", "arr", "require_isAxiosError", "__commonJSMin", "exports", "module", "payload", "require_axios", "__commonJSMin", "exports", "module", "utils", "bind", "Axios", "mergeConfig", "defaults", "createInstance", "defaultConfig", "context", "instance", "axios", "instanceConfig", "promises", "require_axios", "__commonJSMin", "exports", "module", "Cache", "key", "keep", "item", "value", "ttl", "immutable", "hasItem", "time", "now", "then", "exports", "RequestError", "status", "text", "exports", "axios_1", "Cache_js_1", "Core_js_1", "RequestError_js_1", "Request", "_Request", "url", "options", "method", "body", "headers", "ttl", "params", "requestEvent", "event", "progressEvent", "resolve", "reject", "cacheKey", "resolveCacheLayer", "result", "response", "error", "self", "xhr", "key", "xhrSend", "xhrArguments", "e", "blob", "init", "header", "value", "_a", "message", "_b", "data", "status", "exports", "Builder_js_1", "Core_js_1", "form_data_1", "Request_js_1", "ActiveRecord", "_ActiveRecord", "options", "event", "func", "key", "params", "instance", "attributes", "trigger", "possibleSetters", "json", "possibleGetters", "url", "output", "request", "_a", "method", "view", "preHook", "postHook", "ttl", "data", "self", "callback", "id", "queryParams", "name", "file", "additionalFields", "formData", "value", "item", "body", "headers", "originalEndpoint", "activeRecord", "position", "endpoint", "header", "k", "jsonData", "response", "param", "token", "remoteJson", "e", "_b", "exports", "CollectionIterator", "_CollectionIterator", "collection", "kind", "filter", "model", "iteratorFilter", "exports", "ActiveRecord_js_1", "Model", "_Model", "attributes", "options", "model", "key", "queryParams", "_super", "relationshipName", "relationshipClass", "content", "camelRelationship", "underscoreRelationship", "x", "relationshipId", "dataKey", "collection", "exports", "ActiveRecord_js_1", "CollectionIterator_js_1", "Model_js_1", "Collection", "_Collection", "options", "collection", "models", "trigger", "append", "qp", "data", "model", "i", "ii", "items", "attributes", "url", "body", "headers", "callback", "predicate", "params", "query", "obj", "index", "item", "key", "json", "first", "fullMatch", "constructor", "filteredModels", "intersection", "cid", "a", "b", "attribute", "filter", "result", "exports", "ActiveRecord_js_1", "exports", "Cache_js_1", "Collection_js_1", "Core_js_1", "Dispatcher_js_1", "DispatcherEvent_js_1", "Model_js_1", "Request_js_1", "Constants_default", "ChalkySticks", "options", "key", "Constants_default", "Collection_exports", "__export", "Advertisement", "Base", "Media", "Meta", "User", "Model_exports", "__export", "Advertisement", "Base", "Geocode", "Media", "Meta", "User", "Event_exports", "__export", "Dispatcher_default", "Dispatcher", "DispatcherEvent", "DispatcherEvent", "eventName", "envelope", "callback", "index", "Dispatcher", "eventName", "data", "event", "callback", "DispatcherEvent", "onceCallback", "envelope", "Dispatcher_default", "Provider_exports", "__export", "Store_default", "Store", "context", "payload", "store", "Store_default", "Environment", "singleton", "key", "defaults", "Environment_default", "import_restmc", "Base", "attributes", "options", "_a", "_b", "Environment_default", "Constants_default", "Store_default", "e", "data", "Dispatcher_default", "_c", "status", "Advertisement", "Base", "Geocode", "_Geocode", "Base", "address", "geocode", "_a", "_b", "addressComponents", "city", "comp", "state", "_c", "_d", "_e", "_f", "streetNumber", "route", "locality", "administrativeArea", "country", "postalCode", "latitude", "longitude", "location", "results", "Media", "Base", "options", "parts", "filters", "dimension", "wm", "Meta", "Base", "User", "Base", "Media", "Meta", "import_restmc", "Base", "options", "_a", "_b", "Environment_default", "Constants_default", "Store_default", "e", "data", "Dispatcher_default", "_c", "status", "Advertisement", "Base", "Media", "Base", "media", "Meta", "Base", "key", "meta", "group", "User", "Base", "Exception_exports", "__export", "ConnectionRefused", "Geolocation", "InvalidInput", "InvalidRenderer", "InvalidStorageProvider", "NotImplemented", "ParserFailure", "Unauthorized", "ConnectionRefused", "Geolocation", "message", "InvalidInput", "InvalidRenderer", "InvalidStorageProvider", "NotImplemented", "ParserFailure", "Unauthorized", "Factory_exports", "__export", "Advertisement_exports", "Geocode_exports", "Advertisement_exports", "__export", "collection", "model", "model", "options", "Advertisement", "Constants_default", "collection", "Geocode_exports", "__export", "model", "model", "options", "Geocode", "Constants_default", "Input_exports", "__export", "Keyboard", "Pointer", "Sensor", "Shortcut", "ShortcutSequencer", "Video", "Shortcut", "Event_exports", "options", "key", "callback", "shortcutSingleton", "keys", "a", "b", "_a", "_b", "e", "currentTarget", "match", "ShortcutSequencer", "_ShortcutSequencer", "shortcutSequencerSingleton", "sequence", "matches", "index", "Keyboard", "Event_exports", "Shortcut", "Keyboard_default", "Pointer", "_Pointer", "Event_exports", "eventType", "autoTouchEvents", "target", "Utility_exports", "disableTouchMove", "disableTouchEnd", "disableContextMenu", "e", "capture", "options", "x", "y", "output", "touch1", "touch2", "dx", "dy", "ovx", "ovy", "isTwoFingerTap", "rect", "xy", "currentDistance", "delta", "totalScale", "a", "b", "timeDifference", "distance", "velocity", "direction", "isTrackpad", "deltaY", "Sensor", "Event_exports", "acceleration", "accelerationIncludingGravity", "rotationRate", "absolute", "alpha", "beta", "gamma", "Sensor_default", "Video", "Event_exports", "device", "Utility_exports", "__export", "Analytics_exports", "Cache", "Debounce", "Device_exports", "Easing", "EasingFunction", "Format_exports", "Geolocation_exports", "Hysteresis", "Interval", "Math_exports", "Share_exports", "String_default", "documentHeight", "getCSSVariable", "getDate", "getEasingMethod", "offsetHeight", "offsetLeft", "offsetTop", "offsetWidth", "requestAnimationFrame", "sleep", "Analytics_exports", "__export", "embedGoogleAnalytics", "embedMetaPixel", "embedRedditPixel", "id", "script", "pixelId", "options", "firstScript", "Device_exports", "__export", "getBrowserName", "getBrowserVersion", "getOrientation", "getScreenHeight", "getScreenWidth", "isAndroid", "isChrome", "isEdge", "isFirefox", "isIE", "isIOS", "isLandscape", "isMobile", "isOpera", "isPortrait", "isSafari", "isTouchDevice", "userAgent", "ua", "tem", "Format_exports", "__export", "bytesToSize", "daysBetweenDates", "secondsToTime", "timeAgo", "timeToHuman", "timeToSeconds", "bytes", "sizes", "i", "date1", "date2", "timeDiff", "seconds", "format", "date", "time", "hours", "minutes", "interval", "Geolocation_exports", "__export", "CACHE_EXPIRATION", "cache", "clearWatch", "config", "distanceBetween", "getBearing", "getBounds", "getLocation", "isPointInBounds", "simplifyCoordinates", "watchLocation", "Cache", "ttl", "keys", "output", "value", "key", "item", "immutable", "hasItem", "time", "now", "then", "Math_exports", "__export", "EARTH_RADIUS", "FOOT_METER_RATIO", "MPH_METER_RATIO", "angle", "angleAsDegrees", "angleDifference", "angleDifferenceAsDegrees", "angleFromVector", "angleFromVectors", "angleNormalize", "clamp", "clampUnsigned", "degreesToSlope", "denormalize", "distance", "dot", "feetToMeters", "inverseLerp", "lerp", "logarithmicZoom", "metersToFeet", "minMax", "minMaxUnsigned", "mphToMs", "msToMph", "normalize", "randomInt", "randomRange", "randomSign", "remap", "rotate", "rotateDeg", "round", "roundToDecimal", "roundToNearest", "roundToNearestFraction", "slopeToDegrees", "smootherstep", "smoothstep", "toDegrees", "toRadians", "transformRatio", "EasingFunction", "t", "s", "Easing", "_Easing", "value", "min", "max", "clamp", "easingFn", "getEasingMethod", "type", "EARTH_RADIUS", "FOOT_METER_RATIO", "MPH_METER_RATIO", "angle", "x1", "y1", "x2", "y2", "angleAsDegrees", "angleDifference", "a", "b", "angleDifferenceAsDegrees", "angleFromVector", "vector", "angleFromVectors", "vectorA", "vectorB", "angleNormalize", "clamp", "value", "min", "max", "clampUnsigned", "degreesToSlope", "degrees", "denormalize", "useClamp", "output", "distance", "dot", "feetToMeters", "feet", "inverseLerp", "lerp", "logarithmicZoom", "startValue", "delta", "increment", "currentZoomLog", "amountLog", "metersToFeet", "meters", "minMax", "minMaxUnsigned", "mphToMs", "mph", "msToMph", "ms", "normalize", "remap", "c", "d", "randomRange", "randomInt", "randomSign", "rotate", "x", "y", "s", "rotateDeg", "round", "decimals", "roundToNearest", "nearest", "roundToNearestFraction", "fraction", "roundToDecimal", "slopeToDegrees", "slope", "smoothstep", "smootherstep", "toRadians", "toDegrees", "radians", "transformRatio", "ratio", "by", "easeInFunction", "easeOutFunction", "easeInMethod", "getEasingMethod", "easeOutMethod", "config", "CACHE_EXPIRATION", "cache", "Cache", "getLocation", "cacheKey", "cachedLocation", "getBrowserLocation", "isCapacitorGeolocationAvailable", "getCapacitorLocation", "getIPLocationFallback", "error", "Geolocation", "resolve", "reject", "position", "Dispatcher_default", "getIPLocation", "ipError", "data", "watchLocation", "callback", "errorCallback", "options", "ipPosition", "clearWatch", "watchId", "distanceBetween", "latitude1", "longitude1", "latitude2", "longitude2", "R", "EARTH_RADIUS", "dLatitude", "toRadians", "dLongitude", "a", "c", "getBearing", "y", "x", "toDegrees", "getBounds", "latitude", "longitude", "radius", "d", "isPointInBounds", "bounds", "simplifyCoordinates", "coordinates", "longitudeOrRoundAmount", "roundAmount", "_a", "_b", "lat", "lng", "precision", "e", "Share_exports", "__export", "canShare", "hasSupport", "native", "remoteFile", "files", "title", "text", "url", "shareData", "remoteFileUrl", "file", "fetchRemoteImage", "filename", "blob", "response", "mimeType", "debouncerInstances", "Debounce", "_Debounce", "callback", "threshold", "immediate", "inclusive", "reference", "callable", "timeout", "args", "debouncer", "wasInclusive", "now", "documentHeight", "getCSSVariable", "variableName", "element", "getDate", "dateString", "Constants_default", "offsetLeft", "offset", "offsetHeight", "offsetTop", "offsetWidth", "requestAnimationFrame", "callback", "sleep", "ms", "resolve", "requestAnimationFrame", "callback", "Interval", "_Interval", "optionsOrFunc", "fps", "name", "func", "executions", "lastTick", "stopAfter", "interval", "now", "requestAnimationFrame", "Hysteresis", "_Hysteresis", "Event_exports", "condition", "threshold", "duration", "options", "instance", "resolve", "data", "Interval", "String", "str", "paragraph", "chunkSize", "sentences", "chunks", "sentence", "length", "targetCharacters", "periodIndex", "String_default", "Core", "Dispatcher", "import_restmc", "Version"]
}
