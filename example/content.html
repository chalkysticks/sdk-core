<!DOCTYPE html>
<html>
	<head>
		<title>ChalkySticks Core SDK Example</title>

		<link rel="icon" href="https://static.chalkysticks.com/favicon.png" />

		<style>
			body {
				background: #11110b;
				color: #fffff1;
			}

			.shape {
				background: red;
				height: 300px;
				left: 50%;
				position: absolute;
				top: 50%;
				transform: translate(-50%, -50%);
				width: 500px;
			}
		</style>
	</head>
	<body>
		<main>
			<header>
				<h1>ChalkySticks API</h1>
			</header>

			<section>
				<h2>Content</h2>
				<p>Check the console for the output.</p>

				<button id="btnFavorite">Favorite</button>
				<button id="btnUnfavorite">Unfavorite</button>
			</section>
		</main>

		<!-- Script -->
		<script>
			window.env = {
				app: {
					localUrl: 'http://localhost:8000/v3',
					// api_url: 'https://api.chalkysticks.com/v1',
				},
			};
		</script>

		<script type="module">
			import * as ChalkySticksCore from '../build/web/chalkysticks-core.js';

			const store = ChalkySticksCore.Provider.Store.get();
			store.state.token = '426|0KiEIxj3HkNSDqgDDJb2lAHneEGI8UCDLimLa0Ibb1b3a824';

			store.getters['authentication/user'] = new ChalkySticksCore.Model.User({
				id: 1,
				name: 'John Doe',
			});

			console.log('Store', store);

			const collectionA = new ChalkySticksCore.Collection.Content({
				limit: 1,
				qp: {
					include: 'reactions',
				},
			});

			collectionA.fetch().then(() => {
				const contentModel = collectionA.at(0);

				console.log('Content Collection A', collectionA.toJSON());

				// Have I liked anything?
				const liked = contentModel.reactions.hasReaction('like');
				const loved = contentModel.reactions.hasReaction('love');

				console.log('Reactions', contentModel.reactions);
				console.log('Liked', liked);
				console.log('Loved', loved);
			});

			// -----------------------------------------------------------------

			// const collectionB = ChalkySticksCore.Factory.Content.collection({
			// 	baseUrl: 'http://localhost:8000/v3',
			// });

			// collectionB
			// 	.tutorials()
			// 	.fetch()
			// 	.then(() => {
			// 		console.log('Content B', collectionB.toJSON());
			// 	});

			// -----------------------------------------------------------------

			btnFavorite.addEventListener('click', () => {
				const contentModel = collectionA.at(0);
				contentModel.reactions.favorite();
			});

			btnUnfavorite.addEventListener('click', () => {
				const contentModel = collectionA.at(0);
				contentModel.reactions.unfavorite();
			});
		</script>
	</body>
</html>
